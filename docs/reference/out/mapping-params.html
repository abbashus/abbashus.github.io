<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>OpenSearch Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="mapping-params" class="book toc2 toc-left">
<div id="header">
<h1>OpenSearch Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OpenSearch Reference</a></span></p><ul class="sectlevel1">
<li><a href="opensearch-intro.html">What is OpenSearch?</a>
</li>
<li><a href="getting-started.html">Getting started with OpenSearch</a>
</li>
<li><a href="setup.html">Set up OpenSearch</a>
</li>
<li><a href="setup-upgrade.html">Upgrade OpenSearch</a>
</li>
<li><a href="index-modules.html">Index modules</a>
</li>
<li><a href="mapping.html">Mapping</a>
<ul class="sectlevel1">
<li><a href="mapping-types.html">Field data types</a>
</li>
<li><a href="mapping-fields.html">Metadata fields</a>
</li>
<li><a href="mapping-params.html"><span class="toc-current">Mapping parameters</span></a>
<ul class="sectlevel2">
<li><a href="mapping-params.html#analyzer"><code>analyzer</code></a>
</li>
<li><a href="mapping-params.html#mapping-boost"><code>boost</code></a>
</li>
<li><a href="mapping-params.html#coerce"><code>coerce</code></a>
</li>
<li><a href="mapping-params.html#copy-to"><code>copy_to</code></a>
</li>
<li><a href="mapping-params.html#doc-values"><code>doc_values</code></a>
</li>
<li><a href="mapping-params.html#dynamic"><code>dynamic</code></a>
</li>
<li><a href="mapping-params.html#eager-global-ordinals"><code>eager_global_ordinals</code></a>
</li>
<li><a href="mapping-params.html#enabled"><code>enabled</code></a>
</li>
<li><a href="mapping-params.html#mapping-date-format"><code>format</code></a>
</li>
<li><a href="mapping-params.html#ignore-above"><code>ignore_above</code></a>
</li>
<li><a href="mapping-params.html#ignore-malformed"><code>ignore_malformed</code></a>
</li>
<li><a href="mapping-params.html#mapping-index"><code>index</code></a>
</li>
<li><a href="mapping-params.html#index-options"><code>index_options</code></a>
</li>
<li><a href="mapping-params.html#index-phrases"><code>index_phrases</code></a>
</li>
<li><a href="mapping-params.html#index-prefixes"><code>index_prefixes</code></a>
</li>
<li><a href="mapping-params.html#mapping-field-meta"><code>meta</code></a>
</li>
<li><a href="mapping-params.html#multi-fields"><code>fields</code></a>
</li>
<li><a href="mapping-params.html#normalizer"><code>normalizer</code></a>
</li>
<li><a href="mapping-params.html#norms"><code>norms</code></a>
</li>
<li><a href="mapping-params.html#null-value"><code>null_value</code></a>
</li>
<li><a href="mapping-params.html#position-increment-gap"><code>position_increment_gap</code></a>
</li>
<li><a href="mapping-params.html#properties"><code>properties</code></a>
</li>
<li><a href="mapping-params.html#search-analyzer"><code>search_analyzer</code></a>
</li>
<li><a href="mapping-params.html#similarity"><code>similarity</code></a>
</li>
<li><a href="mapping-params.html#mapping-store"><code>store</code></a>
</li>
<li><a href="mapping-params.html#term-vector"><code>term_vector</code></a>
</li>
</ul>
</li>
<li><a href="dynamic-mapping.html">Dynamic Mapping</a>
</li>
</ul>
</li>
<li><a href="analysis.html">Text analysis</a>
</li>
<li><a href="index-templates.html">Index templates</a>
</li>
<li><a href="ingest.html">Ingest node</a>
</li>
<li><a href="search-your-data.html">Search your data</a>
</li>
<li><a href="query-dsl.html">Query DSL</a>
</li>
<li><a href="search-aggregations.html">Aggregations</a>
</li>
<li><a href="modules-scripting.html">Scripting</a>
</li>
<li><a href="high-availability.html">Set up a cluster for high availability</a>
</li>
<li><a href="snapshot-restore.html">Snapshot and restore</a>
</li>
<li><a href="commands.html">Command line tools</a>
</li>
<li><a href="how-to.html">How To</a>
</li>
<li><a href="glossary.html">Glossary of terms</a>
</li>
<li><a href="rest-apis.html">REST APIs</a>
</li>
<li><a href="breaking-changes.html">Migration guide</a>
</li>
<li><a href="opensearch-release-notes.html">Release notes</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="mapping-params">Mapping parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following pages provide detailed explanations of the various mapping
parameters that are used by <a href="mapping-types.html">field mappings</a>:</p>
</div>
<div class="paragraph">
<p>The following mapping parameters are common to some or all field data types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="mapping-params.html#analyzer"><code>analyzer</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#mapping-boost"><code>boost</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#coerce"><code>coerce</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#copy-to"><code>copy_to</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#doc-values"><code>doc_values</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#dynamic"><code>dynamic</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#eager-global-ordinals"><code>eager_global_ordinals</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#enabled"><code>enabled</code></a></p>
</li>
<li>
<p><a href="getting-started-modify-data.html#fielddata"><code>fielddata</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#multi-fields"><code>fields</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#mapping-date-format"><code>format</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#ignore-above"><code>ignore_above</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#ignore-malformed"><code>ignore_malformed</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#index-options"><code>index_options</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#index-phrases"><code>index_phrases</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#index-prefixes"><code>index_prefixes</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#mapping-index"><code>index</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#mapping-field-meta"><code>meta</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#normalizer"><code>normalizer</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#norms"><code>norms</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#null-value"><code>null_value</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#position-increment-gap"><code>position_increment_gap</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#properties"><code>properties</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#search-analyzer"><code>search_analyzer</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#similarity"><code>similarity</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#mapping-store"><code>store</code></a></p>
</li>
<li>
<p><a href="mapping-params.html#term-vector"><code>term_vector</code></a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="analyzer"><code>analyzer</code></h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Only <a href="mapping-types.html#text"><code>text</code></a> fields support the <code>analyzer</code> mapping parameter.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>analyzer</code> parameter specifies the <a href="analysis-concepts.html#analyzer-anatomy">analyzer</a> used for
<a href="analysis.html">text analysis</a> when indexing or searching a <code>text</code> field.</p>
</div>
<div class="paragraph">
<p>Unless overridden with the <a href="mapping-params.html#search-analyzer"><code>search_analyzer</code></a> mapping
parameter, this analyzer is used for both <a href="analysis-concepts.html#analysis-index-search-time">index and
search analysis</a>. See <a href="configure-text-analysis.html#specify-analyzer">Specify an analyzer</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>We recommend testing analyzers before using them in production. See
<a href="configure-text-analysis.html#test-analyzer">Test an analyzer</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="search-quote-analyzer"><code>search_quote_analyzer</code></h4>
<div class="paragraph">
<p>The <code>search_quote_analyzer</code> setting allows you to specify an analyzer for phrases, this is particularly useful when dealing with disabling
stop words for phrase queries.</p>
</div>
<div class="paragraph">
<p>To disable stop words for phrases a field utilising three analyzer settings will be required:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>An <code>analyzer</code> setting for indexing all terms including stop words</p>
</li>
<li>
<p>A <code>search_analyzer</code> setting for non-phrase queries that will remove stop words</p>
</li>
<li>
<p>A <code>search_quote_analyzer</code> setting for phrase queries that will not remove stop words</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
   "settings":{
      "analysis":{
         "analyzer":{
            "my_analyzer":{ <b class="conum">(1)</b>
               "type":"custom",
               "tokenizer":"standard",
               "filter":[
                  "lowercase"
               ]
            },
            "my_stop_analyzer":{ <b class="conum">(2)</b>
               "type":"custom",
               "tokenizer":"standard",
               "filter":[
                  "lowercase",
                  "english_stop"
               ]
            }
         },
         "filter":{
            "english_stop":{
               "type":"stop",
               "stopwords":"_english_"
            }
         }
      }
   },
   "mappings":{
       "properties":{
          "title": {
             "type":"text",
             "analyzer":"my_analyzer", <b class="conum">(3)</b>
             "search_analyzer":"my_stop_analyzer", <b class="conum">(4)</b>
             "search_quote_analyzer":"my_analyzer" <b class="conum">(5)</b>
         }
      }
   }
}

PUT my-index-000001/_doc/1
{
   "title":"The Quick Brown Fox"
}

PUT my-index-000001/_doc/2
{
   "title":"A Quick Brown Fox"
}

GET my-index-000001/_search
{
   "query":{
      "query_string":{
         "query":"\"the quick brown fox\"" <b class="conum">(6)</b>
      }
   }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>my_analyzer</code> analyzer which tokens all terms including stop words</p>
</li>
<li>
<p><code>my_stop_analyzer</code> analyzer which removes stop words</p>
</li>
<li>
<p><code>analyzer</code> setting that points to the <code>my_analyzer</code> analyzer which will be used at index time</p>
</li>
<li>
<p><code>search_analyzer</code> setting that points to the <code>my_stop_analyzer</code> and removes stop words for non-phrase queries</p>
</li>
<li>
<p><code>search_quote_analyzer</code> setting that points to the <code>my_analyzer</code> analyzer and ensures that stop words are not removed from phrase queries</p>
</li>
<li>
<p>Since the query is wrapped in quotes it is detected as a phrase query therefore the <code>search_quote_analyzer</code> kicks in and ensures the stop words
are not removed from the query. The <code>my_analyzer</code> analyzer will then return the following tokens [<code>the</code>, <code>quick</code>, <code>brown</code>, <code>fox</code>] which will match one
of the documents. Meanwhile term queries will be analyzed with the <code>my_stop_analyzer</code> analyzer which will filter out stop words. So a search for either
<code>The quick brown fox</code> or <code>A quick brown fox</code> will return both documents since both documents contain the following tokens [<code>quick</code>, <code>brown</code>, <code>fox</code>].
Without the <code>search_quote_analyzer</code> it would not be possible to do exact matches for phrase queries as the stop words from phrase queries would be
removed resulting in both documents matching.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mapping-boost"><code>boost</code></h3>
<div class="paragraph">
<p>Individual fields can be <em>boosted</em> automatically&#8201;&#8212;&#8201;count more towards the relevance score&#8201;&#8212;&#8201;at query time, with the <code>boost</code> parameter as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "boost": 2 <b class="conum">(1)</b>
      },
      "content": {
        "type": "text"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Matches on the <code>title</code> field will have twice the weight as those on the
<code>content</code> field, which has the default <code>boost</code> of <code>1.0</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The boost is applied only for term queries (prefix, range and fuzzy queries are not <em>boosted</em>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can achieve the same effect by using the boost parameter directly in the query, for instance the following query (with field time boost):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST _search
{
  "query": {
    "match": {
      "title": {
        "query": "quick brown fox"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST _search
{
  "query": {
    "match": {
      "title": {
        "query": "quick brown fox",
        "boost": 2
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="title">Why index time boosting is deprecated</div>
<div class="paragraph">
<p>We advise against using index time boosting for the following reasons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You cannot change index-time <code>boost</code> values without reindexing all of your
documents.</p>
</li>
<li>
<p>Every query supports query-time boosting which achieves the same effect. The
difference is that you can tweak the <code>boost</code> value without having to reindex.</p>
</li>
<li>
<p>Index-time boosts are stored as part of the <a href="mapping-params.html#norms"><code>norm</code></a>, which is only one
byte.  This reduces the resolution of the field length normalization factor
which can lead to lower quality relevance calculations.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="coerce"><code>coerce</code></h3>
<div class="paragraph">
<p>Data is not always clean.  Depending on how it is produced a number might be
rendered in the JSON body as a true JSON number, e.g. <code>5</code>, but it might also
be rendered as a string, e.g. <code>"5"</code>.  Alternatively, a number that should be
an integer might instead be rendered as a floating point, e.g. <code>5.0</code>, or even
<code>"5.0"</code>.</p>
</div>
<div class="paragraph">
<p>Coercion attempts to clean up dirty values to fit the data type of a field.
For instance:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Strings will be coerced to numbers.</p>
</li>
<li>
<p>Floating points will be truncated for integer values.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer"
      },
      "number_two": {
        "type": "integer",
        "coerce": false
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "number_one": "10" <b class="conum">(1)</b>
}

PUT my-index-000001/_doc/2
{
  "number_two": "10" <b class="conum">(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>number_one</code> field will contain the integer <code>10</code>.</p>
</li>
<li>
<p>This document will be rejected because coercion is disabled.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>coerce</code> setting value can be updated on existing fields
using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="coerce-setting">Index-level default</h4>
<div class="paragraph">
<p>The <code>index.mapping.coerce</code> setting can be set on the index level to disable
coercion globally across all mapping types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "settings": {
    "index.mapping.coerce": false
  },
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer",
        "coerce": true
      },
      "number_two": {
        "type": "integer"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{ "number_one": "10" } <b class="conum">(1)</b>

PUT my-index-000001/_doc/2
{ "number_two": "10" } <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>number_one</code> field overrides the index level setting to enable coercion.</p>
</li>
<li>
<p>This document will be rejected because the <code>number_two</code> field inherits the index-level coercion setting.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="copy-to"><code>copy_to</code></h3>
<div class="paragraph">
<p>The <code>copy_to</code> parameter allows you to copy the values of multiple
fields into a group field, which can then be queried as a single
field.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you often search multiple fields, you can improve search speeds by using
<code>copy_to</code> to search fewer fields. See <a href="tune-for-search-speed.html#search-as-few-fields-as-possible">Search as few fields as possible</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, the <code>first_name</code> and <code>last_name</code> fields can be copied to
the <code>full_name</code> field as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "first_name": {
        "type": "text",
        "copy_to": "full_name" <b class="conum">(1)</b>
      },
      "last_name": {
        "type": "text",
        "copy_to": "full_name" <b class="conum">(1)</b>
      },
      "full_name": {
        "type": "text"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "first_name": "John",
  "last_name": "Smith"
}

GET my-index-000001/_search
{
  "query": {
    "match": {
      "full_name": { <b class="conum">(2)</b>
        "query": "John Smith",
        "operator": "and"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The values of the <code>first_name</code> and <code>last_name</code> fields are copied to the
<code>full_name</code> field.</p>
</li>
<li>
<p>The <code>first_name</code> and <code>last_name</code> fields can still be queried for the
first name and last name respectively, but the <code>full_name</code> field can be
queried for both first and last names.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Some important points:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is the field <em>value</em> which is copied, not the terms (which result from the analysis process).</p>
</li>
<li>
<p>The original <a href="mapping-fields.html#mapping-source-field"><code>_source</code></a> field will not be modified to show the copied values.</p>
</li>
<li>
<p>The same value can be copied to multiple fields, with <code>"copy_to": [ "field_1", "field_2" ]</code></p>
</li>
<li>
<p>You cannot copy recursively via intermediary fields such as a <code>copy_to</code> on
<code>field_1</code> to <code>field_2</code> and <code>copy_to</code> on <code>field_2</code> to <code>field_3</code> expecting
indexing into <code>field_1</code> will eventuate in <code>field_3</code>, instead use copy_to
directly to multiple fields from the originating field.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="doc-values"><code>doc_values</code></h3>
<div class="paragraph">
<p>Most fields are <a href="mapping-params.html#mapping-index">indexed</a> by default, which makes them
searchable. The inverted index allows queries to look up the search term in
unique sorted list of terms, and from that immediately have access to the list
of documents that contain the term.</p>
</div>
<div class="paragraph">
<p>Sorting, aggregations, and access to field values in scripts requires a
different data access pattern.  Instead of looking up the term and finding
documents, we need to be able to look up the document and find the terms that
it has in a field.</p>
</div>
<div class="paragraph">
<p>Doc values are the on-disk data structure, built at document index time, which
makes this data access pattern possible. They store the same values as the
<code>_source</code> but in a column-oriented fashion that is way more efficient for
sorting and aggregations. Doc values are supported on almost all field types,
with the <em>notable exception of <code>text</code> and <code>annotated_text</code> fields</em>.</p>
</div>
<div class="paragraph">
<p>All fields which support doc values have them enabled by default. If you are
sure that you don&#8217;t need to sort or aggregate on a field, or access the field
value from a script, you can disable doc values in order to save disk space:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "status_code": { <b class="conum">(1)</b>
        "type":       "keyword"
      },
      "session_id": { <b class="conum">(2)</b>
        "type":       "keyword",
        "doc_values": false
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>status_code</code> field has <code>doc_values</code> enabled by default.</p>
</li>
<li>
<p>The <code>session_id</code> has <code>doc_values</code> disabled, but can still be queried.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="dynamic"><code>dynamic</code></h3>
<div class="paragraph">
<p>By default, fields can be added <em>dynamically</em> to a document, or to
<a href="mapping-types.html#object">inner objects</a> within a document, just by indexing a document
containing the new field.  For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001/_doc/1 <b class="conum">(1)</b>
{
  "username": "johnsmith",
  "name": {
    "first": "John",
    "last": "Smith"
  }
}

GET my-index-000001/_mapping <b class="conum">(2)</b>

PUT my-index-000001/_doc/2 <b class="conum">(3)</b>
{
  "username": "marywhite",
  "email": "mary@white.com",
  "name": {
    "first": "Mary",
    "middle": "Alice",
    "last": "White"
  }
}

GET my-index-000001/_mapping <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This document introduces the string field <code>username</code>, the object field
<code>name</code>, and two string fields under the <code>name</code> object which can be
referred to as <code>name.first</code> and <code>name.last</code>.</p>
</li>
<li>
<p>Check the mapping to verify the above.</p>
</li>
<li>
<p>This document adds two string fields: <code>email</code> and <code>name.middle</code>.</p>
</li>
<li>
<p>Check the mapping to verify the changes.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The details of how new fields are detected and added to the mapping is explained in <a href="dynamic-mapping.html">Dynamic Mapping</a>.</p>
</div>
<div class="paragraph">
<p>The <code>dynamic</code> setting controls whether new fields can be added dynamically or
not.  It accepts three settings:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>true</code>
</td>
<td class="hdlist2">
<p>Newly detected fields are added to the mapping. (default)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>false</code>
</td>
<td class="hdlist2">
<p>Newly detected fields are ignored. These fields will not be indexed so will not be searchable
but will still appear in the <code>_source</code> field of returned hits. These fields will not be added
to the mapping,  new fields must be added explicitly.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>strict</code>
</td>
<td class="hdlist2">
<p>If new fields are detected, an exception is thrown and the document is rejected. New fields
must be explicitly added to the mapping.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>dynamic</code> setting may be set at the mapping type level, and on each
<a href="mapping-types.html#object">inner object</a>.  Inner objects inherit the setting from their parent
object or from the mapping type.  For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "dynamic": false, <b class="conum">(1)</b>
    "properties": {
      "user": { <b class="conum">(2)</b>
        "properties": {
          "name": {
            "type": "text"
          },
          "social_networks": { <b class="conum">(3)</b>
            "dynamic": true,
            "properties": {}
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Dynamic mapping is disabled at the type level, so no new top-level fields will be added dynamically.</p>
</li>
<li>
<p>The <code>user</code> object inherits the type-level setting.</p>
</li>
<li>
<p>The <code>user.social_networks</code> object enables dynamic mapping, so new fields may be added to this inner object.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>dynamic</code> setting can be updated on existing fields
using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="eager-global-ordinals"><code>eager_global_ordinals</code></h3>
<div class="sect3">
<h4 id="_what_are_global_ordinals">What are global ordinals?</h4>
<div class="paragraph">
<p>To support aggregations and other operations that require looking up field
values on a per-document basis, OpenSearch uses a data structure called
<a href="mapping-params.html#doc-values">doc values</a>. Term-based field types such as <code>keyword</code> store
their doc values using an ordinal mapping for a more compact representation.
This mapping works by assigning each term an incremental integer or 'ordinal'
based on its lexicographic order. The field&#8217;s doc values store only the
ordinals for each document instead of the original terms, with a separate
lookup structure to convert between ordinals and terms.</p>
</div>
<div class="paragraph">
<p>When used during aggregations, ordinals can greatly improve performance. As an
example, the <code>terms</code> aggregation relies only on ordinals to collect documents
into buckets at the shard-level, then converts the ordinals back to their
original term values when combining results across shards.</p>
</div>
<div class="paragraph">
<p>Each index segment defines its own ordinal mapping, but aggregations collect
data across an entire shard. So to be able to use ordinals for shard-level
operations like aggregations, OpenSearch creates a unified mapping called
'global ordinals'. The global ordinal mapping is built on top of segment
ordinals, and works by maintaining a map from global ordinal to the local
ordinal for each segment.</p>
</div>
<div class="paragraph">
<p>Global ordinals are used if a search contains any of the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Certain bucket aggregations on <code>keyword</code>, <code>ip</code>, and <code>flattened</code> fields. This
includes <code>terms</code> aggregations as mentioned above, as well as <code>composite</code>,
<code>diversified_sampler</code>, and <code>significant_terms</code>.</p>
</li>
<li>
<p>Bucket aggregations on <code>text</code> fields that require <a href="getting-started-modify-data.html#fielddata"><code>fielddata</code></a>
to be enabled.</p>
</li>
<li>
<p>Operations on parent and child documents from a <code>join</code> field, including
<code>has_child</code> queries and <code>parent</code> aggregations.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The global ordinal mapping uses heap memory as part of the
<a href="settings.html#modules-fielddata">field data cache</a>. Aggregations on high cardinality fields
can use a lot of memory and trigger the <a href="settings.html#fielddata-circuit-breaker">field data
circuit breaker</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_loading_global_ordinals">Loading global ordinals</h4>
<div class="paragraph">
<p>The global ordinal mapping must be built before ordinals can be used during a
search. By default, the mapping is loaded during search on the first time that
global ordinals are needed. This is is the right approach if you are optimizing
for indexing speed, but if search performance is a priority, it&#8217;s recommended
to eagerly load global ordinals eagerly on fields that will be used in
aggregations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001/_mapping
{
  "properties": {
    "tags": {
      "type": "keyword",
      "eager_global_ordinals": true
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When <code>eager_global_ordinals</code> is enabled, global ordinals are built when a shard
is <a href="indices.html#indices-refresh">refreshed</a>&#8201;&#8212;&#8201;OpenSearch always loads them before
exposing changes to the content of the index. This shifts the cost of building
global ordinals from search to index-time. OpenSearch will also eagerly
build global ordinals when creating a new copy of a shard, as can occur when
increasing the number of replicas or relocating a shard onto a new node.</p>
</div>
<div class="paragraph">
<p>Eager loading can be disabled at any time by updating the <code>eager_global_ordinals</code> setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001/_mapping
{
  "properties": {
    "tags": {
      "type": "keyword",
      "eager_global_ordinals": false
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_avoiding_global_ordinal_loading">Avoiding global ordinal loading</h4>
<div class="paragraph">
<p>Usually, global ordinals do not present a large overhead in terms of their
loading time and memory usage. However, loading global ordinals can be
expensive on indices with large shards, or if the fields contain a large
number of unique term values. Because global ordinals provide a unified mapping
for all segments on the shard, they also need to be rebuilt entirely when a new
segment becomes visible.</p>
</div>
<div class="paragraph">
<p>In some cases it is possible to avoid global ordinal loading altogether:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>terms</code>, <code>sampler</code>, and <code>significant_terms</code> aggregations support a
parameter
<a href="search-aggregations-bucket.html#search-aggregations-bucket-terms-aggregation-execution-hint"><code>execution_hint</code></a>
that helps control how buckets are collected. It defaults to <code>global_ordinals</code>,
but can be set to <code>map</code> to instead use the term values directly.</p>
</li>
<li>
<p>If a shard has been <a href="indices.html#indices-forcemerge">force-merged</a> down to a single
segment, then its segment ordinals are already 'global' to the shard. In this
case, OpenSearch does not need to build a global ordinal mapping and there
is no additional overhead from using global ordinals. Note that for performance
reasons you should only force-merge an index to which you will never write to
again.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabled"><code>enabled</code></h3>
<div class="paragraph">
<p>OpenSearch tries to index all of the fields you give it, but sometimes you
want to just store the field without indexing it.  For instance, imagine that
you are using OpenSearch as a web session store.  You may want to index the
session ID and last update time, but you don&#8217;t need to query or run
aggregations on the session data itself.</p>
</div>
<div class="paragraph">
<p>The <code>enabled</code> setting, which can be applied only to the top-level mapping
definition and to <a href="mapping-types.html#object"><code>object</code></a> fields, causes OpenSearch to skip
parsing of the contents of the field entirely.  The JSON can still be retrieved
from the <a href="mapping-fields.html#mapping-source-field"><code>_source</code></a> field, but it is not searchable or
stored in any other way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "user_id": {
        "type":  "keyword"
      },
      "last_updated": {
        "type": "date"
      },
      "session_data": { <b class="conum">(1)</b>
        "type": "object",
        "enabled": false
      }
    }
  }
}

PUT my-index-000001/_doc/session_1
{
  "user_id": "bilbo",
  "session_data": { <b class="conum">(2)</b>
    "arbitrary_object": {
      "some_array": [ "foo", "bar", { "baz": 2 } ]
    }
  },
  "last_updated": "2015-12-06T18:20:22"
}

PUT my-index-000001/_doc/session_2
{
  "user_id": "jpountz",
  "session_data": "none", <b class="conum">(3)</b>
  "last_updated": "2015-12-06T18:22:13"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>session_data</code> field is disabled.</p>
</li>
<li>
<p>Any arbitrary data can be passed to the <code>session_data</code> field as it will be entirely ignored.</p>
</li>
<li>
<p>The <code>session_data</code> will also ignore values that are not JSON objects.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The entire mapping may be disabled as well, in which case the document is
stored in the <a href="mapping-fields.html#mapping-source-field"><code>_source</code></a> field, which means it can be
retrieved, but none of its contents are indexed in any way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "enabled": false <b class="conum">(1)</b>
  }
}

PUT my-index-000001/_doc/session_1
{
  "user_id": "bilbo",
  "session_data": {
    "arbitrary_object": {
      "some_array": [ "foo", "bar", { "baz": 2 } ]
    }
  },
  "last_updated": "2015-12-06T18:20:22"
}

GET my-index-000001/_doc/session_1 <b class="conum">(2)</b>

GET my-index-000001/_mapping <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The entire mapping is disabled.</p>
</li>
<li>
<p>The document can be retrieved.</p>
</li>
<li>
<p>Checking the mapping reveals that no fields have been added.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>enabled</code> setting for existing fields and the top-level mapping
definition cannot be updated.</p>
</div>
<div class="paragraph">
<p>Note that because OpenSearch completely skips parsing the field
contents, it is possible to add non-object data to a disabled field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "session_data": {
        "type": "object",
        "enabled": false
      }
    }
  }
}

PUT my-index-000001/_doc/session_1
{
  "session_data": "foo bar" <b class="conum">(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The document is added successfully, even though <code>session_data</code> contains non-object data.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="mapping-date-format"><code>format</code></h3>
<div class="paragraph">
<p>In JSON documents, dates are represented as strings. OpenSearch uses a set
of preconfigured formats to recognize and parse these strings into a long
value representing <em>milliseconds-since-the-epoch</em> in UTC.</p>
</div>
<div class="paragraph">
<p>Besides the <a href="mapping-params.html#built-in-date-formats">built-in formats</a>, your own
<a href="mapping-params.html#custom-date-formats">custom formats</a> can be specified using the familiar
<code>yyyy/MM/dd</code> syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "date": {
        "type":   "date",
        "format": "yyyy-MM-dd"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Many APIs which support date values also support <a href="api-conventions.html#date-math">date math</a>
expressions, such as <code>now-1m/d</code>&#8201;&#8212;&#8201;the current time, minus one month, rounded
down to the nearest day.</p>
</div>
<div class="sect3">
<h4 id="custom-date-formats">Custom date formats</h4>
<div class="paragraph">
<p>Completely customizable date formats are supported.  The syntax for these is explained
<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">DateTimeFormatter docs</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="built-in-date-formats">Built In Formats</h4>
<div class="paragraph">
<p>Most of the below formats have a <code>strict</code> companion format, which means that
year, month and day parts of the week must use respectively 4, 2 and 2 digits
exactly, potentially prepending zeros. For instance a date like <code>5/11/1</code> would
be considered invalid and would need to be rewritten to <code>2005/11/01</code> to be
accepted by the date parser.</p>
</div>
<div class="paragraph">
<p>To use them, you need to prepend <code>strict_</code> to the name of the date format, for
instance <code>strict_date_optional_time</code> instead of <code>date_optional_time</code>.</p>
</div>
<div class="paragraph">
<p>These strict date formats are especially useful when
<a href="dynamic-mapping.html#date-detection">date fields are dynamically mapped</a> in order to make sure to
not accidentally map irrelevant strings as dates.</p>
</div>
<div class="paragraph">
<p>The following tables lists all the defaults ISO formats supported:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>epoch_millis</code></dt>
<dd>
<p>A formatter for the number of milliseconds since the epoch. Note, that
this timestamp is subject to the limits of a Java <code>Long.MIN_VALUE</code> and
<code>Long.MAX_VALUE</code>.</p>
</dd>
<dt class="hdlist1"><code>epoch_second</code></dt>
<dd>
<p>A formatter for the number of seconds since the epoch. Note, that this
timestamp is subject to the limits of a Java <code>Long.MIN_VALUE</code> and <code>Long.
MAX_VALUE</code> divided by 1000 (the number of milliseconds in a second).</p>
</dd>
<dt class="hdlist1"><a id="strict-date-time"></a><code>date_optional_time</code> or <code>strict_date_optional_time</code></dt>
<dd>
<p>A generic ISO datetime parser, where the date must include the year at a minimum, and the time
(separated by <code>T</code>), is optional.
Examples: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSSZ</code> or  <code>yyyy-MM-dd</code>.</p>
</dd>
<dt class="hdlist1"><a id="strict-date-time-nanos"></a><code>strict_date_optional_time_nanos</code></dt>
<dd>
<p>A generic ISO datetime parser, where the date must include the year at a minimum, and the time
(separated by <code>T</code>), is optional. The fraction of a second
part has a nanosecond resolution.
Examples: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSSSSSZ</code> or  <code>yyyy-MM-dd</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_date</code></dt>
<dd>
<p>A basic formatter for a full date as four digit year, two digit month of
year, and two digit day of month: <code>yyyyMMdd</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_date_time</code></dt>
<dd>
<p>A basic formatter that combines a basic date and time, separated by a 'T':
<code>yyyyMMdd&#8217;T&#8217;HHmmss.SSSZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_date_time_no_millis</code></dt>
<dd>
<p>A basic formatter that combines a basic date and time without millis,
separated by a 'T': <code>yyyyMMdd&#8217;T&#8217;HHmmssZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_ordinal_date</code></dt>
<dd>
<p>A formatter for a full ordinal date, using a four digit year and three
digit dayOfYear: <code>yyyyDDD</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_ordinal_date_time</code></dt>
<dd>
<p>A formatter for a full ordinal date and time, using a four digit year and
three digit dayOfYear: <code>yyyyDDD&#8217;T&#8217;HHmmss.SSSZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_ordinal_date_time_no_millis</code></dt>
<dd>
<p>A formatter for a full ordinal date and time without millis, using a four
digit year and three digit dayOfYear: <code>yyyyDDD&#8217;T&#8217;HHmmssZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_time</code></dt>
<dd>
<p>A basic formatter for a two digit hour of day, two digit minute of hour,
two digit second of minute, three digit millis, and time zone offset:
<code>HHmmss.SSSZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_time_no_millis</code></dt>
<dd>
<p>A basic formatter for a two digit hour of day, two digit minute of hour,
two digit second of minute, and time zone offset: <code>HHmmssZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_t_time</code></dt>
<dd>
<p>A basic formatter for a two digit hour of day, two digit minute of hour,
two digit second of minute, three digit millis, and time zone off set
prefixed by 'T': <code>'T&#8217;HHmmss.SSSZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_t_time_no_millis</code></dt>
<dd>
<p>A basic formatter for a two digit hour of day, two digit minute of hour,
two digit second of minute, and time zone offset prefixed by 'T':
<code>'T&#8217;HHmmssZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_week_date</code> or <code>strict_basic_week_date</code></dt>
<dd>
<p>A basic formatter for a full date as four digit weekyear, two digit week
of weekyear, and one digit day of week: <code>xxxx&#8217;W&#8217;wwe</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_week_date_time</code> or <code>strict_basic_week_date_time</code></dt>
<dd>
<p>A basic formatter that combines a basic weekyear date and time, separated
by a 'T': <code>xxxx&#8217;W&#8217;wwe&#8217;T&#8217;HHmmss.SSSZ</code>.</p>
</dd>
<dt class="hdlist1"><code>basic_week_date_time_no_millis</code> or <code>strict_basic_week_date_time_no_millis</code></dt>
<dd>
<p>A basic formatter that combines a basic weekyear date and time without
millis, separated by a 'T': <code>xxxx&#8217;W&#8217;wwe&#8217;T&#8217;HHmmssZ</code>.</p>
</dd>
<dt class="hdlist1"><code>date</code> or <code>strict_date</code></dt>
<dd>
<p>A formatter for a full date as four digit year, two digit month of year,
and two digit day of month: <code>yyyy-MM-dd</code>.</p>
</dd>
<dt class="hdlist1"><code>date_hour</code> or <code>strict_date_hour</code></dt>
<dd>
<p>A formatter that combines a full date and two digit hour of day:
<code>yyyy-MM-dd&#8217;T&#8217;HH</code>.</p>
</dd>
<dt class="hdlist1"><code>date_hour_minute</code> or <code>strict_date_hour_minute</code></dt>
<dd>
<p>A formatter that combines a full date, two digit hour of day, and two
digit minute of hour: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm</code>.</p>
</dd>
<dt class="hdlist1"><code>date_hour_minute_second</code> or <code>strict_date_hour_minute_second</code></dt>
<dd>
<p>A formatter that combines a full date, two digit hour of day, two digit
minute of hour, and two digit second of minute: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss</code>.</p>
</dd>
<dt class="hdlist1"><code>date_hour_minute_second_fraction</code> or <code>strict_date_hour_minute_second_fraction</code></dt>
<dd>
<p>A formatter that combines a full date, two digit hour of day, two digit
minute of hour, two digit second of minute, and three digit fraction of
second: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</code>.</p>
</dd>
<dt class="hdlist1"><code>date_hour_minute_second_millis</code> or <code>strict_date_hour_minute_second_millis</code></dt>
<dd>
<p>A formatter that combines a full date, two digit hour of day, two digit
minute of hour, two digit second of minute, and three digit fraction of
second: <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSS</code>.</p>
</dd>
<dt class="hdlist1"><code>date_time</code> or <code>strict_date_time</code></dt>
<dd>
<p>A formatter that combines a full date and time, separated by a 'T':
<code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSSZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>date_time_no_millis</code> or <code>strict_date_time_no_millis</code></dt>
<dd>
<p>A formatter that combines a full date and time without millis, separated
by a 'T': <code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ssZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>hour</code> or <code>strict_hour</code></dt>
<dd>
<p>A formatter for a two digit hour of day: <code>HH</code></p>
</dd>
<dt class="hdlist1"><code>hour_minute</code> or <code>strict_hour_minute</code></dt>
<dd>
<p>A formatter for a two digit hour of day and two digit minute of hour:
<code>HH:mm</code>.</p>
</dd>
<dt class="hdlist1"><code>hour_minute_second</code> or <code>strict_hour_minute_second</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, and two
digit second of minute: <code>HH:mm:ss</code>.</p>
</dd>
<dt class="hdlist1"><code>hour_minute_second_fraction</code> or <code>strict_hour_minute_second_fraction</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, and three digit fraction of second: <code>HH:mm:ss.SSS</code>.</p>
</dd>
<dt class="hdlist1"><code>hour_minute_second_millis</code> or <code>strict_hour_minute_second_millis</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, and three digit fraction of second: <code>HH:mm:ss.SSS</code>.</p>
</dd>
<dt class="hdlist1"><code>ordinal_date</code> or <code>strict_ordinal_date</code></dt>
<dd>
<p>A formatter for a full ordinal date, using a four digit year and three
digit dayOfYear: <code>yyyy-DDD</code>.</p>
</dd>
<dt class="hdlist1"><code>ordinal_date_time</code> or <code>strict_ordinal_date_time</code></dt>
<dd>
<p>A formatter for a full ordinal date and time, using a four digit year and
three digit dayOfYear: <code>yyyy-DDD&#8217;T&#8217;HH:mm:ss.SSSZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>ordinal_date_time_no_millis</code> or <code>strict_ordinal_date_time_no_millis</code></dt>
<dd>
<p>A formatter for a full ordinal date and time without millis, using a four
digit year and three digit dayOfYear: <code>yyyy-DDD&#8217;T&#8217;HH:mm:ssZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>time</code> or <code>strict_time</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, three digit fraction of second, and time zone
offset: <code>HH:mm:ss.SSSZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>time_no_millis</code> or <code>strict_time_no_millis</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, and time zone offset: <code>HH:mm:ssZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>t_time</code> or <code>strict_t_time</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, three digit fraction of second, and time zone
offset prefixed by 'T': <code>'T&#8217;HH:mm:ss.SSSZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>t_time_no_millis</code> or <code>strict_t_time_no_millis</code></dt>
<dd>
<p>A formatter for a two digit hour of day, two digit minute of hour, two
digit second of minute, and time zone offset prefixed by 'T': <code>'T&#8217;HH:mm:ssZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>week_date</code> or <code>strict_week_date</code></dt>
<dd>
<p>A formatter for a full date as four digit weekyear, two digit week of
weekyear, and one digit day of week: <code>xxxx-'W&#8217;ww-e</code>.</p>
</dd>
<dt class="hdlist1"><code>week_date_time</code> or <code>strict_week_date_time</code></dt>
<dd>
<p>A formatter that combines a full weekyear date and time, separated by a
'T': <code>xxxx-'W&#8217;ww-e&#8217;T&#8217;HH:mm:ss.SSSZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>week_date_time_no_millis</code> or <code>strict_week_date_time_no_millis</code></dt>
<dd>
<p>A formatter that combines a full weekyear date and time without millis,
separated by a 'T': <code>xxxx-'W&#8217;ww-e&#8217;T&#8217;HH:mm:ssZZ</code>.</p>
</dd>
<dt class="hdlist1"><code>weekyear</code> or <code>strict_weekyear</code></dt>
<dd>
<p>A formatter for a four digit weekyear: <code>xxxx</code>.</p>
</dd>
<dt class="hdlist1"><code>weekyear_week</code> or <code>strict_weekyear_week</code></dt>
<dd>
<p>A formatter for a four digit weekyear and two digit week of weekyear:
<code>xxxx-'W&#8217;ww</code>.</p>
</dd>
<dt class="hdlist1"><code>weekyear_week_day</code> or <code>strict_weekyear_week_day</code></dt>
<dd>
<p>A formatter for a four digit weekyear, two digit week of weekyear, and one
digit day of week: <code>xxxx-'W&#8217;ww-e</code>.</p>
</dd>
<dt class="hdlist1"><code>year</code> or <code>strict_year</code></dt>
<dd>
<p>A formatter for a four digit year: <code>yyyy</code>.</p>
</dd>
<dt class="hdlist1"><code>year_month</code> or <code>strict_year_month</code></dt>
<dd>
<p>A formatter for a four digit year and two digit month of year: <code>yyyy-MM</code>.</p>
</dd>
<dt class="hdlist1"><code>year_month_day</code> or <code>strict_year_month_day</code></dt>
<dd>
<p>A formatter for a four digit year, two digit month of year, and two digit
day of month: <code>yyyy-MM-dd</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ignore-above"><code>ignore_above</code></h3>
<div class="paragraph">
<p>Strings longer than the <code>ignore_above</code> setting will not be indexed or stored.
For arrays of strings, <code>ignore_above</code> will be applied for each array element separately and string elements longer than <code>ignore_above</code> will not be indexed or stored.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All strings/array elements will still be present in the <code>_source</code> field, if the latter is enabled which is the default in OpenSearch.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "message": {
        "type": "keyword",
        "ignore_above": 20 <b class="conum">(1)</b>
      }
    }
  }
}

PUT my-index-000001/_doc/1 <b class="conum">(2)</b>
{
  "message": "Syntax error"
}

PUT my-index-000001/_doc/2 <b class="conum">(3)</b>
{
  "message": "Syntax error with some long stacktrace"
}

GET my-index-000001/_search <b class="conum">(4)</b>
{
  "aggs": {
    "messages": {
      "terms": {
        "field": "message"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This field will ignore any string longer than 20 characters.</p>
</li>
<li>
<p>This document is indexed successfully.</p>
</li>
<li>
<p>This document will be indexed, but without indexing the <code>message</code> field.</p>
</li>
<li>
<p>Search returns both documents, but only the first is present in the terms aggregation.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>ignore_above</code> setting can be updated on
existing fields using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This option is also useful for protecting against Lucene&#8217;s term byte-length
limit of <code>32766</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The value for <code>ignore_above</code> is the <em>character count</em>, but Lucene counts
bytes. If you use UTF-8 text with many non-ASCII characters, you may want to
set the limit to <code>32766 / 4 = 8191</code> since UTF-8 characters may occupy at most
4 bytes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ignore-malformed"><code>ignore_malformed</code></h3>
<div class="paragraph">
<p>Sometimes you don&#8217;t have much control over the data that you receive.  One
user may send a <code>login</code> field that is a <a href="mapping-types.html#date"><code>date</code></a>, and another sends a
<code>login</code> field that is an email address.</p>
</div>
<div class="paragraph">
<p>Trying to index the wrong data type into a field throws an exception by
default, and rejects the whole document.  The <code>ignore_malformed</code> parameter, if
set to <code>true</code>, allows the exception to be ignored. The malformed field is not
indexed, but other fields in the document are processed normally.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "number_one": {
        "type": "integer",
        "ignore_malformed": true
      },
      "number_two": {
        "type": "integer"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "text":       "Some text value",
  "number_one": "foo" <b class="conum">(1)</b>
}

PUT my-index-000001/_doc/2
{
  "text":       "Some text value",
  "number_two": "foo" <b class="conum">(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This document will have the <code>text</code> field indexed, but not the <code>number_one</code> field.</p>
</li>
<li>
<p>This document will be rejected because <code>number_two</code> does not allow malformed values.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>ignore_malformed</code> setting is currently supported by the following <a href="mapping-types.html">mapping types</a>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="mapping-types.html#number">Numeric field types</a></dt>
<dd>
<p><code>long</code>, <code>integer</code>, <code>short</code>, <code>byte</code>, <code>double</code>, <code>float</code>, <code>half_float</code>, <code>scaled_float</code></p>
</dd>
<dt class="hdlist1"><a href="mapping-types.html#date">Date field type</a></dt>
<dd>
<p><code>date</code></p>
</dd>
<dt class="hdlist1"><a href="mapping-types.html#date_nanos">Date nanoseconds field type</a></dt>
<dd>
<p><code>date_nanos</code></p>
</dd>
<dt class="hdlist1"><a href="mapping-types.html#geo-point">Geo-point field type</a></dt>
<dd>
<p><code>geo_point</code> for lat/lon points</p>
</dd>
<dt class="hdlist1"><a href="mapping-types.html#geo-shape">Geo-shape field type</a></dt>
<dd>
<p><code>geo_shape</code> for complex shapes like polygons</p>
</dd>
<dt class="hdlist1"><a href="mapping-types.html#ip">IP field type</a></dt>
<dd>
<p><code>ip</code> for IPv4 and IPv6 addresses</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>ignore_malformed</code> setting value can be updated on
existing fields using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ignore-malformed-setting">Index-level default</h4>
<div class="paragraph">
<p>The <code>index.mapping.ignore_malformed</code> setting can be set on the index level to
ignore malformed content globally across all allowed mapping types.
Mapping types that don&#8217;t support the setting will ignore it if set on the index level.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "settings": {
    "index.mapping.ignore_malformed": true <b class="conum">(1)</b>
  },
  "mappings": {
    "properties": {
      "number_one": { <b class="conum">(1)</b>
        "type": "byte"
      },
      "number_two": {
        "type": "integer",
        "ignore_malformed": false <b class="conum">(2)</b>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>number_one</code> field inherits the index-level setting.</p>
</li>
<li>
<p>The <code>number_two</code> field overrides the index-level setting to turn off <code>ignore_malformed</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_dealing_with_malformed_fields">Dealing with malformed fields</h4>
<div class="paragraph">
<p>Malformed fields are silently ignored at indexing time when <code>ignore_malformed</code>
is turned on. Whenever possible it is recommended to keep the number of
documents that have a malformed field contained, or queries on this field will
become meaningless. OpenSearch makes it easy to check how many documents
have malformed fields by using <code>exists</code>,<code>term</code> or <code>terms</code> queries on the special
<a href="mapping-fields.html#mapping-ignored-field"><code>_ignored</code></a> field.</p>
</div>
</div>
<div class="sect3">
<h4 id="json-object-limits">Limits for JSON Objects</h4>
<div class="paragraph">
<p>You can&#8217;t use <code>ignore_malformed</code> with the following data types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="mapping-types.html#nested">Nested data type</a></p>
</li>
<li>
<p><a href="mapping-types.html#object">Object data type</a></p>
</li>
<li>
<p><a href="mapping-types.html#range">Range data types</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You also can&#8217;t use <code>ignore_malformed</code> to ignore JSON objects submitted to fields
of the wrong data type. A JSON object is any data surrounded by curly brackets
<code>"{}"</code> and includes data mapped to the nested, object, and range data types.</p>
</div>
<div class="paragraph">
<p>If you submit a JSON object to an unsupported field, OpenSearch will return an error
and reject the entire document regardless of the <code>ignore_malformed</code> setting.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mapping-index"><code>index</code></h3>
<div class="paragraph">
<p>The <code>index</code> option controls whether field values are indexed. It accepts <code>true</code>
or <code>false</code> and defaults to <code>true</code>. Fields that are not indexed are not queryable.</p>
</div>
</div>
<div class="sect2">
<h3 id="index-options"><code>index_options</code></h3>
<div class="paragraph">
<p>The <code>index_options</code> parameter controls what information is added to the
inverted index for search and highlighting purposes.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>index_options</code> parameter is intended for use with <a href="mapping-types.html#text"><code>text</code></a> fields
only. Avoid using <code>index_options</code> with other field data types.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It accepts the following values:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>docs</code></dt>
<dd>
<p>Only the doc number is indexed.  Can answer the question <em>Does this term
exist in this field?</em></p>
</dd>
<dt class="hdlist1"><code>freqs</code></dt>
<dd>
<p>Doc number and term frequencies are indexed.  Term frequencies are used to
score repeated terms higher than single terms.</p>
</dd>
<dt class="hdlist1"><code>positions</code> (default)</dt>
<dd>
<p>Doc number, term frequencies, and term positions (or order) are indexed.
Positions can be used for
<a href="full-text-queries.html#query-dsl-match-query-phrase">proximity or phrase queries</a>.</p>
</dd>
<dt class="hdlist1"><code>offsets</code></dt>
<dd>
<p>Doc number, term frequencies, positions, and start and end character
offsets (which map the term back to the original string) are indexed.
Offsets are used by the <a href="highlighting.html#unified-highlighter">unified highlighter</a> to speed up highlighting.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "index_options": "offsets"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "text": "Quick brown fox"
}

GET my-index-000001/_search
{
  "query": {
    "match": {
      "text": "brown fox"
    }
  },
  "highlight": {
    "fields": {
      "text": {} <b class="conum">(1)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>text</code> field will use the postings for the highlighting by default because <code>offsets</code> are indexed.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="index-phrases"><code>index_phrases</code></h3>
<div class="paragraph">
<p>If enabled, two-term word combinations ('shingles') are indexed into a separate
field.  This allows exact phrase queries (no slop) to run more efficiently, at the expense
of a larger index.  Note that this works best when stopwords are not removed,
as phrases containing stopwords will not use the subsidiary field and will fall
back to a standard phrase query.  Accepts <code>true</code> or <code>false</code> (default).</p>
</div>
</div>
<div class="sect2">
<h3 id="index-prefixes"><code>index_prefixes</code></h3>
<div class="paragraph">
<p>The <code>index_prefixes</code> parameter enables the indexing of term prefixes to speed
up prefix searches.  It accepts the following optional settings:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>min_chars</code>
</td>
<td class="hdlist2">
<p>The minimum prefix length to index.  Must be greater than 0, and defaults
to 2.  The value is inclusive.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>max_chars</code>
</td>
<td class="hdlist2">
<p>The maximum prefix length to index.  Must be less than 20, and defaults to 5.
The value is inclusive.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This example creates a text field using the default prefix length settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "body_text": {
        "type": "text",
        "index_prefixes": { }    <b class="conum">(1)</b>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>An empty settings object will use the default <code>min_chars</code> and <code>max_chars</code>
settings</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This example uses custom prefix length settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "full_name": {
        "type": "text",
        "index_prefixes": {
          "min_chars" : 1,
          "max_chars" : 10
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mapping-field-meta"><code>meta</code></h3>
<div class="paragraph">
<p>Metadata attached to the field. This metadata is opaque to OpenSearch, it is
only useful for multiple applications that work on the same indices to share
meta information about fields such as units</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "latency": {
        "type": "long",
        "meta": {
          "unit": "ms"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Field metadata enforces at most 5 entries, that keys have a length that
is less than or equal to 20, and that values are strings whose length is less
than or equal to 50.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Field metadata is updatable by submitting a mapping update. The metadata
of the update will override the metadata of the existing field.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="multi-fields"><code>fields</code></h3>
<div class="paragraph">
<p>It is often useful to index the same field in different ways for different
purposes.  This is the purpose of <em>multi-fields</em>. For instance, a <code>string</code>
field could be mapped as a <code>text</code> field for full-text
search, and as a <code>keyword</code> field for sorting or aggregations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "city": {
        "type": "text",
        "fields": {
          "raw": { <b class="conum">(1)</b>
            "type":  "keyword"
          }
        }
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "city": "New York"
}

PUT my-index-000001/_doc/2
{
  "city": "York"
}

GET my-index-000001/_search
{
  "query": {
    "match": {
      "city": "york" <b class="conum">(2)</b>
    }
  },
  "sort": {
    "city.raw": "asc" <b class="conum">(3)</b>
  },
  "aggs": {
    "Cities": {
      "terms": {
        "field": "city.raw" <b class="conum">(3)</b>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>city.raw</code> field is a <code>keyword</code> version of the <code>city</code> field.</p>
</li>
<li>
<p>The <code>city</code> field can be used for full text search.</p>
</li>
<li>
<p>The <code>city.raw</code> field can be used for sorting and aggregations</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Multi-fields do not change the original <code>_source</code> field.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
New multi-fields can be added to existing
fields using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_multi_fields_with_multiple_analyzers">Multi-fields with multiple analyzers</h4>
<div class="paragraph">
<p>Another use case of multi-fields is to analyze the same field in different
ways for better relevance. For instance we could index a field with the
<a href="analysis-analyzers.html#analysis-standard-analyzer"><code>standard</code> analyzer</a> which breaks text up into
words, and again with the <a href="analysis-analyzers.html#english-analyzer"><code>english</code> analyzer</a>
which stems words into their root form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "text": { <b class="conum">(1)</b>
        "type": "text",
        "fields": {
          "english": { <b class="conum">(2)</b>
            "type":     "text",
            "analyzer": "english"
          }
        }
      }
    }
  }
}

PUT my-index-000001/_doc/1
{ "text": "quick brown fox" } <b class="conum">(3)</b>

PUT my-index-000001/_doc/2
{ "text": "quick brown foxes" } <b class="conum">(3)</b>

GET my-index-000001/_search
{
  "query": {
    "multi_match": {
      "query": "quick brown foxes",
      "fields": [ <b class="conum">(4)</b>
        "text",
        "text.english"
      ],
      "type": "most_fields" <b class="conum">(4)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>text</code> field uses the <code>standard</code> analyzer.</p>
</li>
<li>
<p>The <code>text.english</code> field uses the <code>english</code> analyzer.</p>
</li>
<li>
<p>Index two documents, one with <code>fox</code> and the other with <code>foxes</code>.</p>
</li>
<li>
<p>Query both the <code>text</code> and <code>text.english</code> fields and combine the scores.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>text</code> field contains the term <code>fox</code> in the first document and <code>foxes</code> in
the second document.  The <code>text.english</code> field contains <code>fox</code> for both
documents, because <code>foxes</code> is stemmed to <code>fox</code>.</p>
</div>
<div class="paragraph">
<p>The query string is also analyzed by the <code>standard</code> analyzer for the <code>text</code>
field, and by the <code>english</code> analyzer for the <code>text.english</code> field.  The
stemmed field allows a query for <code>foxes</code> to also match the document containing
just <code>fox</code>.  This allows us to match as many documents as possible.  By also
querying the unstemmed <code>text</code> field, we improve the relevance score of the
document which matches <code>foxes</code> exactly.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="normalizer"><code>normalizer</code></h3>
<div class="paragraph">
<p>The <code>normalizer</code> property of <a href="mapping-types.html#keyword"><code>keyword</code></a> fields is similar to
<a href="mapping-params.html#analyzer"><code>analyzer</code></a> except that it guarantees that the analysis chain
produces a single token.</p>
</div>
<div class="paragraph">
<p>The <code>normalizer</code> is applied prior to indexing the keyword, as well as at
search-time when the <code>keyword</code> field is searched via a query parser such as
the <a href="full-text-queries.html#query-dsl-match-query"><code>match</code></a> query or via a term-level query
such as the <a href="term-level-queries.html#query-dsl-term-query"><code>term</code></a> query.</p>
</div>
<div class="paragraph">
<p>A simple normalizer called <code>lowercase</code> ships with OpenSearch and can be used.
Custom normalizers can be defined as part of analysis settings as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT index
{
  "settings": {
    "analysis": {
      "normalizer": {
        "my_normalizer": {
          "type": "custom",
          "char_filter": [],
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "foo": {
        "type": "keyword",
        "normalizer": "my_normalizer"
      }
    }
  }
}

PUT index/_doc/1
{
  "foo": "BÀR"
}

PUT index/_doc/2
{
  "foo": "bar"
}

PUT index/_doc/3
{
  "foo": "baz"
}

POST index/_refresh

GET index/_search
{
  "query": {
    "term": {
      "foo": "BAR"
    }
  }
}

GET index/_search
{
  "query": {
    "match": {
      "foo": "BAR"
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above queries match documents 1 and 2 since <code>BÀR</code> is converted to <code>bar</code> at
both index and query time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "took": $body.took,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped" : 0,
    "failed": 0
  },
  "hits": {
    "total" : {
        "value": 2,
        "relation": "eq"
    },
    "max_score": 0.4700036,
    "hits": [
      {
        "_index": "index",
        "_type": "_doc",
        "_id": "1",
        "_score": 0.4700036,
        "_source": {
          "foo": "BÀR"
        }
      },
      {
        "_index": "index",
        "_type": "_doc",
        "_id": "2",
        "_score": 0.4700036,
        "_source": {
          "foo": "bar"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also, the fact that keywords are converted prior to indexing also means that
aggregations return normalized values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET index/_search
{
  "size": 0,
  "aggs": {
    "foo_terms": {
      "terms": {
        "field": "foo"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "took": 43,
  "timed_out": false,
  "_shards": {
    "total": 1,
    "successful": 1,
    "skipped" : 0,
    "failed": 0
  },
  "hits": {
    "total" : {
        "value": 3,
        "relation": "eq"
    },
    "max_score": null,
    "hits": []
  },
  "aggregations": {
    "foo_terms": {
      "doc_count_error_upper_bound": 0,
      "sum_other_doc_count": 0,
      "buckets": [
        {
          "key": "bar",
          "doc_count": 2
        },
        {
          "key": "baz",
          "doc_count": 1
        }
      ]
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="norms"><code>norms</code></h3>
<div class="paragraph">
<p>Norms store various normalization factors that are later used at query time
in order to compute the score of a document relatively to a query.</p>
</div>
<div class="paragraph">
<p>Although useful for scoring, norms also require quite a lot of disk
(typically in the order of one byte per document per field in your index, even
for documents that don&#8217;t have this specific field). As a consequence, if you
don&#8217;t need scoring on a specific field, you should disable norms on that
field. In  particular, this is the case for fields that are used solely for
filtering or aggregations.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Norms can be disabled on existing fields using
the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Norms can be disabled (but not reenabled after the fact), using the
<a href="indices.html#indices-put-mapping">PUT mapping API</a> like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001/_mapping
{
  "properties": {
    "title": {
      "type": "text",
      "norms": false
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Norms will not be removed instantly, but will be removed as old segments
are merged into new segments as you continue indexing new documents. Any score
computation on a field that has had norms removed might return inconsistent
results since some documents won&#8217;t have norms anymore while other documents
might still have norms.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="null-value"><code>null_value</code></h3>
<div class="paragraph">
<p>A <code>null</code> value cannot be indexed or searched.  When a field is set to <code>null</code>,
(or an empty array or an array of <code>null</code> values)  it is treated as though that
field has no values.</p>
</div>
<div class="paragraph">
<p>The <code>null_value</code> parameter allows you to replace explicit <code>null</code> values with
the specified value so that it can be indexed and searched.  For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "status_code": {
        "type":       "keyword",
        "null_value": "NULL" <b class="conum">(1)</b>
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "status_code": null
}

PUT my-index-000001/_doc/2
{
  "status_code": [] <b class="conum">(2)</b>
}

GET my-index-000001/_search
{
  "query": {
    "term": {
      "status_code": "NULL" <b class="conum">(3)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Replace explicit <code>null</code> values with the term <code>NULL</code>.</p>
</li>
<li>
<p>An empty array does not contain an explicit <code>null</code>, and so won&#8217;t be replaced with the <code>null_value</code>.</p>
</li>
<li>
<p>A query for <code>NULL</code> returns document 1, but not document 2.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The <code>null_value</code> needs to be the same data type as the field.  For
instance, a <code>long</code> field cannot have a string <code>null_value</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>null_value</code> only influences how data is indexed, it doesn&#8217;t modify
the <code>_source</code> document.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="position-increment-gap"><code>position_increment_gap</code></h3>
<div class="paragraph">
<p><a href="mapping-params.html#mapping-index">Analyzed</a> text fields take term <a href="mapping-params.html#index-options">positions</a>
into account, in order to be able to support
<a href="full-text-queries.html#query-dsl-match-query-phrase">proximity or phrase queries</a>.
When indexing text fields with multiple values a "fake" gap is added between
the values to prevent most phrase queries from matching across the values. The
size of this gap is configured using <code>position_increment_gap</code> and defaults to
<code>100</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001/_doc/1
{
  "names": [ "John Abraham", "Lincoln Smith"]
}

GET my-index-000001/_search
{
  "query": {
    "match_phrase": {
      "names": {
        "query": "Abraham Lincoln" <b class="conum">(1)</b>
      }
    }
  }
}

GET my-index-000001/_search
{
  "query": {
    "match_phrase": {
      "names": {
        "query": "Abraham Lincoln",
        "slop": 101 <b class="conum">(2)</b>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>This phrase query doesn&#8217;t match our document which is totally expected.</p>
</li>
<li>
<p>This phrase query matches our document, even though <code>Abraham</code> and <code>Lincoln</code>
are in separate strings, because <code>slop</code> &gt; <code>position_increment_gap</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>position_increment_gap</code> can be specified in the mapping.  For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "names": {
        "type": "text",
        "position_increment_gap": 0 <b class="conum">(1)</b>
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "names": [ "John Abraham", "Lincoln Smith"]
}

GET my-index-000001/_search
{
  "query": {
    "match_phrase": {
      "names": "Abraham Lincoln" <b class="conum">(2)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The first term in the next array element will be 0 terms apart from the
last term in the previous array element.</p>
</li>
<li>
<p>The phrase query matches our document which is weird, but its what we asked
for in the mapping.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="properties"><code>properties</code></h3>
<div class="paragraph">
<p>Type mappings, <a href="mapping-types.html#object"><code>object</code> fields</a> and <a href="mapping-types.html#nested"><code>nested</code> fields</a>
contain sub-fields, called <code>properties</code>. These properties may be of any
<a href="mapping-types.html">data type</a>, including <code>object</code> and <code>nested</code>.  Properties can
be added:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>explicitly by defining them when <a href="indices.html#indices-create-index">creating an index</a>.</p>
</li>
<li>
<p>explicitly by defining them when adding or updating a mapping type with the <a href="indices.html#indices-put-mapping">PUT mapping</a> API.</p>
</li>
<li>
<p><a href="dynamic-mapping.html">dynamically</a> just by indexing documents containing new fields.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is an example of adding <code>properties</code> to a mapping type, an <code>object</code>
field, and a <code>nested</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": { <b class="conum">(1)</b>
      "manager": {
        "properties": { <b class="conum">(2)</b>
          "age":  { "type": "integer" },
          "name": { "type": "text"  }
        }
      },
      "employees": {
        "type": "nested",
        "properties": { <b class="conum">(3)</b>
          "age":  { "type": "integer" },
          "name": { "type": "text"  }
        }
      }
    }
  }
}

PUT my-index-000001/_doc/1 <b class="conum">(4)</b>
{
  "region": "US",
  "manager": {
    "name": "Alice White",
    "age": 30
  },
  "employees": [
    {
      "name": "John Smith",
      "age": 34
    },
    {
      "name": "Peter Brown",
      "age": 26
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Properties in the top-level mappings definition.</p>
</li>
<li>
<p>Properties under the <code>manager</code> object field.</p>
</li>
<li>
<p>Properties under the <code>employees</code> nested field.</p>
</li>
<li>
<p>An example document which corresponds to the above mapping.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>properties</code> setting is allowed to have different settings for fields
of the same name in the same index.  New properties can be added to existing
fields using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_dot_notation">Dot notation</h4>
<div class="paragraph">
<p>Inner fields can be referred to in queries, aggregations, etc., using <em>dot
notation</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET my-index-000001/_search
{
  "query": {
    "match": {
      "manager.name": "Alice White"
    }
  },
  "aggs": {
    "Employees": {
      "nested": {
        "path": "employees"
      },
      "aggs": {
        "Employee Ages": {
          "histogram": {
            "field": "employees.age",
            "interval": 5
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The full path to the inner field must be specified.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="search-analyzer"><code>search_analyzer</code></h3>
<div class="paragraph">
<p>Usually, the same <a href="mapping-params.html#analyzer">analyzer</a> should be applied at index time and at
search time, to ensure that the terms in the query are in the same format as
the terms in the inverted index.</p>
</div>
<div class="paragraph">
<p>Sometimes, though, it can make sense to use a different analyzer at search
time, such as when using the  <a href="analysis-tokenizers.html#analysis-edgengram-tokenizer"><code>edge_ngram</code></a>
tokenizer for autocomplete.</p>
</div>
<div class="paragraph">
<p>By default, queries will use the <code>analyzer</code> defined in the field mapping, but
this can be overridden with the <code>search_analyzer</code> setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "settings": {
    "analysis": {
      "filter": {
        "autocomplete_filter": {
          "type": "edge_ngram",
          "min_gram": 1,
          "max_gram": 20
        }
      },
      "analyzer": {
        "autocomplete": { <b class="conum">(1)</b>
          "type": "custom",
          "tokenizer": "standard",
          "filter": [
            "lowercase",
            "autocomplete_filter"
          ]
        }
      }
    }
  },
  "mappings": {
    "properties": {
      "text": {
        "type": "text",
        "analyzer": "autocomplete", <b class="conum">(2)</b>
        "search_analyzer": "standard" <b class="conum">(2)</b>
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "text": "Quick Brown Fox" <b class="conum">(3)</b>
}

GET my-index-000001/_search
{
  "query": {
    "match": {
      "text": {
        "query": "Quick Br", <b class="conum">(4)</b>
        "operator": "and"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Analysis settings to define the custom <code>autocomplete</code> analyzer.</p>
</li>
<li>
<p>The <code>text</code> field uses the <code>autocomplete</code> analyzer at index time, but the <code>standard</code> analyzer at search time.</p>
</li>
<li>
<p>This field is indexed as the terms: [ <code>q</code>, <code>qu</code>, <code>qui</code>, <code>quic</code>, <code>quick</code>, <code>b</code>, <code>br</code>, <code>bro</code>, <code>brow</code>, <code>brown</code>, <code>f</code>, <code>fo</code>, <code>fox</code> ]</p>
</li>
<li>
<p>The query searches for both of these terms: [ <code>quick</code>, <code>br</code> ]</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="https://www.opensearch.org/guide/en/opensearch/guide/2.x/_index_time_search_as_you_type.html">Index time search-as-you-
type</a> for a full explanation of this example.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
The <code>search_analyzer</code> setting can be updated on existing fields
using the <a href="indices.html#indices-put-mapping">PUT mapping API</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="similarity"><code>similarity</code></h3>
<div class="paragraph">
<p>OpenSearch allows you to configure a scoring algorithm or <em>similarity</em> per
field. The <code>similarity</code> setting provides a simple way of choosing a similarity
algorithm other than the default <code>BM25</code>, such as <code>TF/IDF</code>.</p>
</div>
<div class="paragraph">
<p>Similarities are mostly useful for <a href="mapping-types.html#text"><code>text</code></a> fields, but can also apply
to other field types.</p>
</div>
<div class="paragraph">
<p>Custom similarities can be configured by tuning the parameters of the built-in
similarities. For more details about this expert options, see the
<a href="index-modules-similarity.html">similarity module</a>.</p>
</div>
<div class="paragraph">
<p>The only similarities which can be used out of the box, without any further
configuration are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>BM25</code></dt>
<dd>
<p>The <a href="https://en.wikipedia.org/wiki/Okapi_BM25">Okapi BM25 algorithm</a>. The
algorithm used by default in OpenSearch and Lucene.</p>
</dd>
<dt class="hdlist1"><code>classic</code></dt>
<dd>
<p>Deprecated. The <a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF/IDF algorithm</a>, the former
default in OpenSearch and Lucene.</p>
</dd>
<dt class="hdlist1"><code>boolean</code></dt>
<dd>
<p>A simple boolean similarity, which is used when full-text ranking is not needed
and the score should only be based on whether the query terms match or not.
Boolean similarity gives terms a score equal to their query boost.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <code>similarity</code> can be set on the field level when a field is first created,
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "default_field": { <b class="conum">(1)</b>
        "type": "text"
      },
      "boolean_sim_field": {
        "type": "text",
        "similarity": "boolean" <b class="conum">(2)</b>
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>default_field</code> uses the <code>BM25</code> similarity.</p>
</li>
<li>
<p>The <code>boolean_sim_field</code> uses the <code>boolean</code> similarity.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="mapping-store"><code>store</code></h3>
<div class="paragraph">
<p>By default, field values are <a href="mapping-params.html#mapping-index">indexed</a> to make them searchable,
but they are not <em>stored</em>.  This means that the field can be queried, but the
original field value cannot be retrieved.</p>
</div>
<div class="paragraph">
<p>Usually this doesn&#8217;t matter.  The field value is already part of the
<a href="mapping-fields.html#mapping-source-field"><code>_source</code> field</a>, which is stored by default. If you
only want to retrieve the value of a single field or of a few fields, instead
of the whole <code>_source</code>, then this can be achieved with
<a href="search-fields.html#source-filtering">source filtering</a>.</p>
</div>
<div class="paragraph">
<p>In certain situations it can make sense to <code>store</code> a field.  For instance, if
you have a document with a <code>title</code>, a <code>date</code>, and a very large <code>content</code>
field, you may want to retrieve just the <code>title</code> and the <code>date</code> without having
to extract those fields from a large <code>_source</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "title": {
        "type": "text",
        "store": true <b class="conum">(1)</b>
      },
      "date": {
        "type": "date",
        "store": true <b class="conum">(1)</b>
      },
      "content": {
        "type": "text"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "title":   "Some short title",
  "date":    "2015-01-01",
  "content": "A very long content field..."
}

GET my-index-000001/_search
{
  "stored_fields": [ "title", "date" ] <b class="conum">(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>title</code> and <code>date</code> fields are stored.</p>
</li>
<li>
<p>This request will retrieve the values of the <code>title</code> and <code>date</code> fields.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Stored fields returned as arrays</div>
<div class="paragraph">
<p>For consistency, stored fields are always returned as an <em>array</em> because there
is no way of knowing if the original field value was a single value, multiple
values, or an empty array.</p>
</div>
<div class="paragraph">
<p>If you need the original value, you should retrieve it from the <code>_source</code>
field instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another situation where it can make sense to make a field stored is for those
that don&#8217;t appear in the <code>_source</code> field (such as <a href="mapping-params.html#copy-to"><code>copy_to</code> fields</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="term-vector"><code>term_vector</code></h3>
<div class="paragraph">
<p>Term vectors contain information about the terms produced by the
<a href="analysis.html">analysis</a> process, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a list of terms.</p>
</li>
<li>
<p>the position (or order) of each term.</p>
</li>
<li>
<p>the start and end character offsets mapping the term to its
origin in the original string.</p>
</li>
<li>
<p>payloads (if they are available) — user-defined binary data
associated with each term position.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These term vectors can be stored so that they can be retrieved for a
particular document.</p>
</div>
<div class="paragraph">
<p>The <code>term_vector</code> setting accepts:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>no</code>
</td>
<td class="hdlist2">
<p>No term vectors are stored. (default)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>yes</code>
</td>
<td class="hdlist2">
<p>Just the terms in the field are stored.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>with_positions</code>
</td>
<td class="hdlist2">
<p>Terms and positions are stored.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>with_offsets</code>
</td>
<td class="hdlist2">
<p>Terms and character offsets are stored.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>with_positions_offsets</code>
</td>
<td class="hdlist2">
<p>Terms, positions, and character offsets are stored.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>with_positions_payloads</code>
</td>
<td class="hdlist2">
<p>Terms, positions, and payloads are stored.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>with_positions_offsets_payloads</code>
</td>
<td class="hdlist2">
<p>Terms, positions, offsets and payloads are stored.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The fast vector highlighter requires <code>with_positions_offsets</code>.
<a href="docs.html#docs-termvectors">The term vectors API</a> can retrieve whatever is stored.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Setting <code>with_positions_offsets</code> will double the size of a field&#8217;s
index.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my-index-000001
{
  "mappings": {
    "properties": {
      "text": {
        "type":        "text",
        "term_vector": "with_positions_offsets"
      }
    }
  }
}

PUT my-index-000001/_doc/1
{
  "text": "Quick brown fox"
}

GET my-index-000001/_search
{
  "query": {
    "match": {
      "text": "brown fox"
    }
  },
  "highlight": {
    "fields": {
      "text": {} <b class="conum">(1)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The fast vector highlighter will be used by default for the <code>text</code> field
because term vectors are enabled.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="mapping-fields.html">Metadata fields</a> | ↑ Up: <a href="mapping.html">Mapping</a> | ⌂ Home: <a href="index.html">OpenSearch Reference</a> | Next: <a href="dynamic-mapping.html">Dynamic Mapping</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-04-12 14:08:20 -0700
</div>
</div>
</body>
</html>