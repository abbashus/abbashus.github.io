<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>OpenSearch Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="system-config" class="book toc2 toc-left">
<div id="header">
<h1>OpenSearch Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OpenSearch Reference</a></span></p><ul class="sectlevel1">
<li><a href="opensearch-intro.html">What is OpenSearch?</a>
</li>
<li><a href="getting-started.html">Getting started with OpenSearch</a>
</li>
<li><a href="setup.html">Set up OpenSearch</a>
<ul class="sectlevel1">
<li><a href="install-opensearch.html">Installing OpenSearch</a>
</li>
<li><a href="settings.html">Configuring OpenSearch</a>
</li>
<li><a href="important-settings.html">Important OpenSearch configuration</a>
</li>
<li><a href="system-config.html"><span class="toc-current">Important System Configuration</span></a>
<ul class="sectlevel2">
<li><a href="system-config.html#setting-system-settings">Configuring system settings</a>
</li>
<li><a href="system-config.html#setup-configuration-memory">Disable swapping</a>
</li>
<li><a href="system-config.html#file-descriptors">File Descriptors</a>
</li>
<li><a href="system-config.html#vm-max-map-count">Virtual memory</a>
</li>
<li><a href="system-config.html#max-number-of-threads">Number of threads</a>
</li>
<li><a href="system-config.html#networkaddress-cache-ttl">DNS cache settings</a>
</li>
<li><a href="system-config.html#executable-jna-tmpdir">JNA temporary directory not mounted with <code>noexec</code></a>
</li>
<li><a href="system-config.html#system-config-tcpretries">TCP retransmission timeout</a>
</li>
</ul>
</li>
<li><a href="bootstrap-checks.html">Bootstrap Checks</a>
</li>
<li><a href="starting-opensearch.html">Starting OpenSearch</a>
</li>
<li><a href="stopping-opensearch.html">Stopping OpenSearch</a>
</li>
<li><a href="modules-discovery.html">Discovery and cluster formation</a>
</li>
<li><a href="add-opensearch-nodes.html">Add and remove nodes in your cluster</a>
</li>
<li><a href="restart-cluster.html">Full-cluster restart and rolling restart</a>
</li>
<li><a href="modules-remote-clusters.html">Remote clusters</a>
</li>
<li><a href="modules-plugins.html">Plugins</a>
</li>
</ul>
</li>
<li><a href="setup-upgrade.html">Upgrade OpenSearch</a>
</li>
<li><a href="index-modules.html">Index modules</a>
</li>
<li><a href="mapping.html">Mapping</a>
</li>
<li><a href="analysis.html">Text analysis</a>
</li>
<li><a href="index-templates.html">Index templates</a>
</li>
<li><a href="ingest.html">Ingest node</a>
</li>
<li><a href="search-your-data.html">Search your data</a>
</li>
<li><a href="query-dsl.html">Query DSL</a>
</li>
<li><a href="search-aggregations.html">Aggregations</a>
</li>
<li><a href="modules-scripting.html">Scripting</a>
</li>
<li><a href="high-availability.html">Set up a cluster for high availability</a>
</li>
<li><a href="snapshot-restore.html">Snapshot and restore</a>
</li>
<li><a href="commands.html">Command line tools</a>
</li>
<li><a href="how-to.html">How To</a>
</li>
<li><a href="glossary.html">Glossary of terms</a>
</li>
<li><a href="rest-apis.html">REST APIs</a>
</li>
<li><a href="breaking-changes.html">Migration guide</a>
</li>
<li><a href="opensearch-release-notes.html">Release notes</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="system-config">Important System Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ideally, OpenSearch should run alone on a server and use all of the
resources available to it.  In order to do so, you need to configure your
operating system to allow the user running OpenSearch to access more
resources than allowed by default.</p>
</div>
<div class="paragraph">
<p>The following settings <strong>must</strong> be considered before going to production:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="system-config.html#setup-configuration-memory">Disable swapping</a></p>
</li>
<li>
<p><a href="system-config.html#file-descriptors">Increase file descriptors</a></p>
</li>
<li>
<p><a href="system-config.html#vm-max-map-count">Ensure sufficient virtual memory</a></p>
</li>
<li>
<p><a href="system-config.html#max-number-of-threads">Ensure sufficient threads</a></p>
</li>
<li>
<p><a href="system-config.html#networkaddress-cache-ttl">JVM DNS cache settings</a></p>
</li>
<li>
<p><a href="system-config.html#executable-jna-tmpdir">Temporary directory not mounted with <code>noexec</code></a></p>
</li>
<li>
<p><a href="system-config.html#system-config-tcpretries">TCP retransmission timeout</a></p>
</li>
</ul>
</div>
<h3 id="dev-vs-prod" class="discrete">Development mode vs production mode</h3>
<div class="paragraph">
<p>By default, OpenSearch assumes that you are working in development mode.
If any of the above settings are not configured correctly, a warning will be
written to the log file, but you will be able to start and run your
OpenSearch node.</p>
</div>
<div class="paragraph">
<p>As soon as you configure a network setting like <code>network.host</code>, OpenSearch
assumes that you are moving to production and will upgrade the above warnings
to exceptions.  These exceptions will prevent your OpenSearch node from
starting.  This is an important safety measure to ensure that you will not
lose data because of a malconfigured server.</p>
</div>
<div class="sect2">
<h3 id="setting-system-settings">Configuring system settings</h3>
<div class="paragraph">
<p>Where to configure systems settings depends on which package you have used to
install OpenSearch, and which operating system you are using.</p>
</div>
<div class="paragraph">
<p>When using the <code>.zip</code> or <code>.tar.gz</code> packages, system settings can be configured:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>temporarily with <a href="system-config.html#ulimit"><code>ulimit</code></a>, or</p>
</li>
<li>
<p>permanently in <a href="system-config.html#limits.conf"><code>/etc/security/limits.conf</code></a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When using the RPM or Debian packages, most system settings are set in the
<a href="system-config.html#sysconfig">system configuration file</a>. However, systems which use systemd
require that system limits are specified in a
<a href="system-config.html#systemd">systemd configuration file</a>.</p>
</div>
<div class="sect3">
<h4 id="ulimit"><code>ulimit</code></h4>
<div class="paragraph">
<p>On Linux systems, <code>ulimit</code> can be used to change resource limits on a
temporary basis. Limits usually need to be set as <code>root</code> before switching to
the user that will run OpenSearch.  For example, to set the number of
open file handles (<code>ulimit -n</code>) to 65,536, you can do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sudo su  <b class="conum">(1)</b>
ulimit -n 65535 <b class="conum">(2)</b>
su opensearch <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Become <code>root</code>.</p>
</li>
<li>
<p>Change the max number of open files.</p>
</li>
<li>
<p>Become the <code>opensearch</code> user in order to start OpenSearch.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The new limit is only applied during the current session.</p>
</div>
<div class="paragraph">
<p>You can consult all currently applied limits with <code>ulimit -a</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="limits.conf"><code>/etc/security/limits.conf</code></h4>
<div class="paragraph">
<p>On Linux systems, persistent limits can be set for a particular user by
editing the <code>/etc/security/limits.conf</code> file. To set the maximum number of
open files for the <code>opensearch</code> user to 65,535, add the following line to
the <code>limits.conf</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">opensearch  -  nofile  65535</code></pre>
</div>
</div>
<div class="paragraph">
<p>This change will only take effect the next time the <code>opensearch</code> user opens
a new session.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="title">Ubuntu and <code>limits.conf</code></div>
<div class="paragraph">
<p>Ubuntu ignores the <code>limits.conf</code> file for processes started by <code>init.d</code>.  To
enable the <code>limits.conf</code> file, edit <code>/etc/pam.d/su</code> and uncomment the
following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh"># session    required   pam_limits.so</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="sysconfig">Sysconfig file</h4>
<div class="paragraph">
<p>When using the RPM or Debian packages, system settings and environment
variables can be specified in the system configuration file, which is located
in:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
RPM
</td>
<td class="hdlist2">
<p><code>/etc/sysconfig/opensearch</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Debian
</td>
<td class="hdlist2">
<p><code>/etc/default/opensearch</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>However, for systems which uses <code>systemd</code>, system limits need to be specified
via <a href="system-config.html#systemd">systemd</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="systemd">Systemd configuration</h4>
<div class="paragraph">
<p>When using the RPM or Debian packages on systems that use
<a href="https://en.wikipedia.org/wiki/Systemd">systemd</a>, system limits must be
specified via systemd.</p>
</div>
<div class="paragraph">
<p>The systemd service file (<code>/usr/lib/systemd/system/opensearch.service</code>)
contains the limits that are applied by default.</p>
</div>
<div class="paragraph">
<p>To override them, add a file called
<code>/etc/systemd/system/opensearch.service.d/override.conf</code> (alternatively,
you may run <code>sudo systemctl edit opensearch</code> which opens the file
automatically inside your default editor). Set any changes in this file,
such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">[Service]
LimitMEMLOCK=infinity</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once finished, run the following command to reload units:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sudo systemctl daemon-reload</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setup-configuration-memory">Disable swapping</h3>
<div class="paragraph">
<p>Most operating systems try to use as much memory as possible for file system
caches and eagerly swap out unused application memory. This can result in parts
of the JVM heap or even its executable pages being swapped out to disk.</p>
</div>
<div class="paragraph">
<p>Swapping is very bad for performance, for node stability, and should be avoided
at all costs. It can cause garbage collections to last for <strong>minutes</strong> instead
of milliseconds and can cause nodes to respond slowly or even to disconnect
from the cluster. In a resilient distributed system, it&#8217;s more effective to let
the operating system kill the node.</p>
</div>
<div class="paragraph">
<p>There are three approaches to disabling swapping. The preferred option is to
completely disable swap. If this is not an option, whether or not to prefer
minimizing swappiness versus memory locking is dependent on your environment.</p>
</div>
<div class="sect3">
<h4 id="disable-swap-files">Disable all swap files</h4>
<div class="paragraph">
<p>Usually OpenSearch is the only service running on a box, and its memory usage
is controlled by the JVM options. There should be no need to have swap enabled.</p>
</div>
<div class="paragraph">
<p>On Linux systems, you can disable swap temporarily by running:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sudo swapoff -a</code></pre>
</div>
</div>
<div class="paragraph">
<p>This doesn&#8217;t require a restart of OpenSearch.</p>
</div>
<div class="paragraph">
<p>To disable it permanently, you will need to edit the <code>/etc/fstab</code> file and
comment out any lines that contain the word <code>swap</code>.</p>
</div>
<div class="paragraph">
<p>On Windows, the equivalent can be achieved by disabling the paging file entirely
via <code>System Properties → Advanced → Performance → Advanced → Virtual memory</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="swappiness">Configure <code>swappiness</code></h4>
<div class="paragraph">
<p>Another option available on Linux systems is to ensure that the sysctl value
<code>vm.swappiness</code> is set to <code>1</code>. This reduces the kernel&#8217;s tendency to swap and
should not lead to swapping under normal circumstances, while still allowing the
whole system to swap in emergency conditions.</p>
</div>
</div>
<div class="sect3">
<h4 id="bootstrap-memory_lock">Enable <code>bootstrap.memory_lock</code></h4>
<div class="paragraph">
<p>Another option is to use
<a href="http://opengroup.org/onlinepubs/007908799/xsh/mlockall.html">mlockall</a> on
Linux/Unix systems, or
<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx">VirtualLock</a>
on Windows, to try to lock the process address space into RAM, preventing any
OpenSearch heap memory from being swapped out.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Some platforms still swap off-heap memory when using a memory lock. To
prevent off-heap memory swaps, <a href="system-config.html#disable-swap-files">disable all swap files</a>
instead.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To enable a memory lock, set <code>bootstrap.memory_lock</code> to <code>true</code> in
<code>opensearch.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">bootstrap.memory_lock: true</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<code>mlockall</code> might cause the JVM or shell session to exit if it tries to
allocate more memory than is available!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After starting OpenSearch, you can see whether this setting was applied
successfully by checking the value of <code>mlockall</code> in the output from this
request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET _nodes?filter_path=**.mlockall</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you see that <code>mlockall</code> is <code>false</code>, then it means that the <code>mlockall</code>
request has failed.  You will also see a line with more information in the logs
with the words <code>Unable to lock JVM Memory</code>.</p>
</div>
<div class="paragraph">
<p>The most probable reason, on Linux/Unix systems, is that the user running
OpenSearch doesn&#8217;t have permission to lock memory.  This can be granted as
follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>.zip</code> and <code>.tar.gz</code></dt>
<dd>
<p>Set <a href="system-config.html#ulimit"><code>ulimit -l unlimited</code></a> as root before starting OpenSearch.
Alternatively, set <code>memlock</code> to <code>unlimited</code> in <code>/etc/security/limits.conf</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh"># allow user 'opensearch' mlockall
opensearch soft memlock unlimited
opensearch hard memlock unlimited</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">RPM and Debian</dt>
<dd>
<p>Set <code>MAX_LOCKED_MEMORY</code> to <code>unlimited</code> in the
<a href="system-config.html#sysconfig">system configuration file</a> (or see below for systems using
<code>systemd</code>).</p>
</dd>
<dt class="hdlist1">Systems using <code>systemd</code></dt>
<dd>
<p>Set <code>LimitMEMLOCK</code> to <code>infinity</code> in the <a href="system-config.html#systemd">systemd configuration</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Another possible reason why <code>mlockall</code> can fail is that
<a href="system-config.html#executable-jna-tmpdir">the JNA temporary directory (usually a sub-directory of
<code>/tmp</code>) is mounted with the <code>noexec</code> option</a>. This can be solved by specifying
a new temporary directory for JNA using the <code>OPENSEARCH_JAVA_OPTS</code> environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">export OPENSEARCH_JAVA_OPTS="$OPENSEARCH_JAVA_OPTS -Djna.tmpdir=&lt;path&gt;"
./bin/opensearch</code></pre>
</div>
</div>
<div class="paragraph">
<p>or setting this JVM flag in the jvm.options configuration file.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="file-descriptors">File Descriptors</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is only relevant for Linux and macOS and can be safely ignored if running
OpenSearch on Windows. On Windows that JVM uses an
<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx">API</a>
limited only by available resources.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>OpenSearch uses a lot of file descriptors or file handles.  Running out of
file descriptors can be disastrous and will most probably lead to data loss.
Make sure to increase the limit on the number of open files descriptors for
the user running OpenSearch to 65,536 or higher.</p>
</div>
<div class="paragraph">
<p>For the <code>.zip</code> and <code>.tar.gz</code> packages, set <a href="system-config.html#ulimit"><code>ulimit -n 65535</code></a> as
root before starting OpenSearch,   or set <code>nofile</code> to <code>65535</code> in
<a href="system-config.html#limits.conf"><code>/etc/security/limits.conf</code></a>.</p>
</div>
<div class="paragraph">
<p>On macOS, you must also pass the JVM option <code>-XX:-MaxFDLimit</code>
to OpenSearch in order for it to make use of the higher file descriptor limit.</p>
</div>
<div class="paragraph">
<p>RPM and Debian packages already default the maximum number of file
descriptors to 65535 and do not require further configuration.</p>
</div>
<div class="paragraph">
<p>You can check the <code>max_file_descriptors</code> configured for each node
using the <a href="cluster.html#cluster-nodes-stats">Nodes stats API</a> API, with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET _nodes/stats/process?filter_path=**.max_file_descriptors</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vm-max-map-count">Virtual memory</h3>
<div class="paragraph">
<p>OpenSearch uses a <a href="index-modules-store.html#mmapfs"><code>mmapfs</code></a> directory by
default to store its indices.  The default operating system limits on mmap
counts is likely to be too low, which may result in out of memory exceptions.</p>
</div>
<div class="paragraph">
<p>On Linux, you can increase the limits by running the following command as
<code>root</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sysctl -w vm.max_map_count=262144</code></pre>
</div>
</div>
<div class="paragraph">
<p>To set this value permanently, update the <code>vm.max_map_count</code> setting in
<code>/etc/sysctl.conf</code>.  To verify after rebooting, run <code>sysctl vm.max_map_count</code>.</p>
</div>
<div class="paragraph">
<p>The RPM and Debian packages will configure this setting automatically.  No
further configuration is required.</p>
</div>
</div>
<div class="sect2">
<h3 id="max-number-of-threads">Number of threads</h3>
<div class="paragraph">
<p>OpenSearch uses a number of thread pools for different types of operations.
It is important that it is able to create new threads whenever needed. Make
sure that the number of threads that the OpenSearch user can create is at
least 4096.</p>
</div>
<div class="paragraph">
<p>This can be done by setting <a href="system-config.html#ulimit"><code>ulimit -u 4096</code></a> as root before
starting OpenSearch, or by setting <code>nproc</code> to <code>4096</code> in
<a href="system-config.html#limits.conf"><code>/etc/security/limits.conf</code></a>.</p>
</div>
<div class="paragraph">
<p>The package distributions when run as services under <code>systemd</code> will configure
the number of threads for the OpenSearch process automatically. No
additional configuration is required.</p>
</div>
</div>
<div class="sect2">
<h3 id="networkaddress-cache-ttl">DNS cache settings</h3>
<div class="paragraph">
<p>OpenSearch runs with a security manager in place. With a security manager in
place, the JVM defaults to caching positive hostname resolutions indefinitely
and defaults to caching negative hostname resolutions for ten
seconds. OpenSearch overrides this behavior with default values to cache
positive lookups for sixty seconds, and to cache negative lookups for ten
seconds. These values should be suitable for most environments, including
environments where DNS resolutions vary with time. If not, you can edit the
values <code>opensearch.networkaddress.cache.ttl</code> and <code>opensearch.networkaddress.cache.negative.ttl</code>
in the <a href="settings.html#jvm-options">JVM options</a>. Note that the values
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html"><code>networkaddress.cache.ttl=&lt;timeout&gt;</code></a>
and
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/net/properties.html"><code>networkaddress.cache.negative.ttl=&lt;timeout&gt;</code></a>
in the
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html">Java
security policy</a> are ignored by OpenSearch unless you remove the settings for
<code>opensearch.networkaddress.cache.ttl</code> and <code>opensearch.networkaddress.cache.negative.ttl</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="executable-jna-tmpdir">JNA temporary directory not mounted with <code>noexec</code></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is only relevant for Linux.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>OpenSearch uses the Java Native Access (JNA) library for executing some
platform-dependent native code. On Linux, the native code backing this library
is extracted at runtime from the JNA archive. By default, this code is extracted
to the OpenSearch temporary directory which defaults to a sub-directory of
<code>/tmp</code>. Alternatively, this location can be controlled with the JVM flag
<code>-Djna.tmpdir=&lt;path&gt;</code>. As the native library is mapped into the JVM virtual
address space as executable, the underlying mount point of the location that
this code is extracted to must <strong>not</strong> be mounted with <code>noexec</code> as this prevents
the JVM process from being able to map this code as executable. On some hardened
Linux installations this is a default mount option for <code>/tmp</code>. One indication
that the underlying mount is mounted with <code>noexec</code> is that at startup JNA will
fail to load with a <code>java.lang.UnsatisfiedLinkerError</code> exception with a message
along the lines of <code>failed to map segment from shared object</code>.  Note that the
exception message can differ amongst JVM versions. Additionally, the components
of OpenSearch that rely on execution of native code via JNA will fail with
messages indicating that it is <code>because JNA is not available</code>. If you are seeing
such error messages, you must remount the temporary directory used for JNA to
not be mounted with <code>noexec</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="system-config-tcpretries">TCP retransmission timeout</h3>
<div class="paragraph">
<p>Each pair of nodes in a cluster communicates via a number of TCP connections
which <a href="settings.html#long-lived-connections">remain open</a> until one of the nodes shuts down
or communication between the nodes is disrupted by a failure in the underlying
infrastructure.</p>
</div>
<div class="paragraph">
<p>TCP provides reliable communication over occasionally-unreliable networks by
hiding temporary network disruptions from the communicating applications. Your
operating system will retransmit any lost messages a number of times before
informing the sender of any problem. Most Linux distributions default to
retransmitting any lost packets 15 times. Retransmissions back off
exponentially, so these 15 retransmissions take over 900 seconds to complete.
This means it takes Linux many minutes to detect a network partition or a
failed node with this method. Windows defaults to just 5 retransmissions which
corresponds with a timeout of around 6 seconds.</p>
</div>
<div class="paragraph">
<p>The Linux default allows for communication over networks that may experience
very long periods of packet loss, but this default is excessive for production
networks within a single data centre as is the case for most OpenSearch clusters.
Highly-available clusters must be able to detect node failures quickly so that
they can react promptly by reallocating lost shards, rerouting searches and
perhaps electing a new master node. Linux users should therefore reduce the
maximum number of TCP retransmissions.</p>
</div>
<div class="paragraph">
<p>You can decrease the maximum number of TCP retransmissions to <code>5</code> by running
the following command as <code>root</code>. Five retransmissions corresponds with a
timeout of around six seconds.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">sysctl -w net.ipv4.tcp_retries2=5</code></pre>
</div>
</div>
<div class="paragraph">
<p>To set this value permanently, update the <code>net.ipv4.tcp_retries2</code> setting in
<code>/etc/sysctl.conf</code>. To verify after rebooting, run
<code>sysctl net.ipv4.tcp_retries2</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This setting applies to all TCP connections and will affect the
reliability of communication with systems outside your cluster too. If your
cluster communicates with external systems over an unreliable network then you
may need to select a higher value for <code>net.ipv4.tcp_retries2</code>. For this reason,
OpenSearch does not adjust this setting automatically.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_related_configuration">Related configuration</h4>
<div class="paragraph">
<p>OpenSearch also implements its own internal health checks with timeouts that are much
shorter than the default retransmission timeout on Linux. Since these are
application-level health checks their timeouts must allow for application-level
effects such as garbage collection pauses. You should not reduce any timeouts
related to these application-level health checks.</p>
</div>
<div class="paragraph">
<p>You must also ensure your network infrastructure does not interfere with the
long-lived connections between nodes, <a href="settings.html#long-lived-connections">even if those
connections appear to be idle</a>. Devices which drop connections when they reach
a certain age are a common source of problems to OpenSearch clusters, and
must not be used.</p>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="important-settings.html">Important OpenSearch configuration</a> | ↑ Up: <a href="setup.html">Set up OpenSearch</a> | ⌂ Home: <a href="index.html">OpenSearch Reference</a> | Next: <a href="bootstrap-checks.html">Bootstrap Checks</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-04-12 14:08:20 -0700
</div>
</div>
</body>
</html>