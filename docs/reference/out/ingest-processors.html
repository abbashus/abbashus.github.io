<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>OpenSearch Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="ingest-processors" class="book toc2 toc-left">
<div id="header">
<h1>OpenSearch Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OpenSearch Reference</a></span></p><ul class="sectlevel1">
<li><a href="opensearch-intro.html">What is OpenSearch?</a>
</li>
<li><a href="getting-started.html">Getting started with OpenSearch</a>
</li>
<li><a href="setup.html">Set up OpenSearch</a>
</li>
<li><a href="setup-upgrade.html">Upgrade OpenSearch</a>
</li>
<li><a href="index-modules.html">Index modules</a>
</li>
<li><a href="mapping.html">Mapping</a>
</li>
<li><a href="analysis.html">Text analysis</a>
</li>
<li><a href="index-templates.html">Index templates</a>
</li>
<li><a href="ingest.html">Ingest node</a>
<ul class="sectlevel1">
<li><a href="pipeline.html">Pipeline Definition</a>
</li>
<li><a href="accessing-data-in-pipelines.html">Accessing Data in Pipelines</a>
</li>
<li><a href="ingest-conditionals.html">Conditional Execution in Pipelines</a>
</li>
<li><a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>
</li>
<li><a href="ingest-processors.html"><span class="toc-current">Processors</span></a>
<ul class="sectlevel2">
<li><a href="ingest-processors.html#append-processor">Append processor</a>
</li>
<li><a href="ingest-processors.html#bytes-processor">Bytes processor</a>
</li>
<li><a href="ingest-processors.html#convert-processor">Convert processor</a>
</li>
<li><a href="ingest-processors.html#csv-processor">CSV processor</a>
</li>
<li><a href="ingest-processors.html#date-processor">Date processor</a>
</li>
<li><a href="ingest-processors.html#date-index-name-processor">Date index name processor</a>
</li>
<li><a href="ingest-processors.html#dissect-processor">Dissect processor</a>
</li>
<li><a href="ingest-processors.html#dot-expand-processor">Dot expander processor</a>
</li>
<li><a href="ingest-processors.html#drop-processor">Drop processor</a>
</li>
<li><a href="ingest-processors.html#fail-processor">Fail processor</a>
</li>
<li><a href="ingest-processors.html#foreach-processor">Foreach processor</a>
</li>
<li><a href="ingest-processors.html#geoip-processor">GeoIP processor</a>
</li>
<li><a href="ingest-processors.html#grok-processor">Grok processor</a>
</li>
<li><a href="ingest-processors.html#gsub-processor">Gsub processor</a>
</li>
<li><a href="ingest-processors.html#htmlstrip-processor">HTML strip processor</a>
</li>
<li><a href="ingest-processors.html#join-processor">Join processor</a>
</li>
<li><a href="ingest-processors.html#json-processor">JSON processor</a>
</li>
<li><a href="ingest-processors.html#kv-processor">KV processor</a>
</li>
<li><a href="ingest-processors.html#lowercase-processor">Lowercase processor</a>
</li>
<li><a href="ingest-processors.html#pipeline-processor">Pipeline processor</a>
</li>
<li><a href="ingest-processors.html#remove-processor">Remove processor</a>
</li>
<li><a href="ingest-processors.html#rename-processor">Rename processor</a>
</li>
<li><a href="ingest-processors.html#script-processor">Script processor</a>
</li>
<li><a href="ingest-processors.html#set-processor">Set processor</a>
</li>
<li><a href="ingest-processors.html#ingest-node-set-security-user-processor">Set security user processor</a>
</li>
<li><a href="ingest-processors.html#sort-processor">Sort processor</a>
</li>
<li><a href="ingest-processors.html#split-processor">Split processor</a>
</li>
<li><a href="ingest-processors.html#trim-processor">Trim processor</a>
</li>
<li><a href="ingest-processors.html#uppercase-processor">Uppercase processor</a>
</li>
<li><a href="ingest-processors.html#urldecode-processor">URL decode processor</a>
</li>
<li><a href="ingest-processors.html#user-agent-processor">User agent processor</a>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="search-your-data.html">Search your data</a>
</li>
<li><a href="query-dsl.html">Query DSL</a>
</li>
<li><a href="search-aggregations.html">Aggregations</a>
</li>
<li><a href="modules-scripting.html">Scripting</a>
</li>
<li><a href="high-availability.html">Set up a cluster for high availability</a>
</li>
<li><a href="snapshot-restore.html">Snapshot and restore</a>
</li>
<li><a href="commands.html">Command line tools</a>
</li>
<li><a href="how-to.html">How To</a>
</li>
<li><a href="glossary.html">Glossary of terms</a>
</li>
<li><a href="rest-apis.html">REST APIs</a>
</li>
<li><a href="breaking-changes.html">Migration guide</a>
</li>
<li><a href="opensearch-release-notes.html">Release notes</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="ingest-processors">Processors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All processors are defined in the following way within a pipeline definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "PROCESSOR_NAME" : {
    ... processor configuration options ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each processor defines its own configuration parameters, but all processors have
the ability to declare <code>tag</code>, <code>on_failure</code> and <code>if</code> fields. These fields are optional.</p>
</div>
<div class="paragraph">
<p>A <code>tag</code> is simply a string identifier of the specific instantiation of a certain
processor in a pipeline. The <code>tag</code> field does not affect the processor&#8217;s behavior,
but is very useful for bookkeeping and tracing errors to specific processors.</p>
</div>
<div class="paragraph">
<p>The <code>if</code> field must contain a script that returns a boolean value. If the script evaluates to <code>true</code>
then the processor will be executed for the given document otherwise it will be skipped.
The <code>if</code> field takes an object with the script fields defined in <a href="ingest-processors.html#script-processor">script-options</a>
and accesses a read only version of the document via the same <code>ctx</code> variable used by scripts in the
<a href="ingest-processors.html#script-processor">Script processor</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "set": {
    "if": "ctx.foo == 'someValue'",
    "field": "found",
    "value": true
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="ingest-conditionals.html">Conditional Execution in Pipelines</a> to learn more about the <code>if</code> field and conditional execution.</p>
</div>
<div class="paragraph">
<p>See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a> to learn more about the <code>on_failure</code> field and error handling in pipelines.</p>
</div>
<div class="paragraph">
<p>The <a href="cluster.html#cluster-nodes-info">node info API</a> will provide a per node list of what processors are available.</p>
</div>
<div class="paragraph">
<p>Custom processors must be installed on all nodes. The put pipeline API will fail if a processor specified in a pipeline
doesn&#8217;t exist on all nodes. If you rely on custom processor plugins make sure to mark these plugins as mandatory by adding
<code>plugin.mandatory</code> setting to the <code>config/opensearch.yml</code> file, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">plugin.mandatory: ingest-attachment</code></pre>
</div>
</div>
<div class="paragraph">
<p>A node will not start if this plugin is not available.</p>
</div>
<div class="paragraph">
<p>The <a href="cluster.html#cluster-nodes-stats">node stats API</a> can be used to fetch ingest usage statistics, globally and on a per
pipeline basis. Useful to find out which pipelines are used the most or spent the most time on preprocessing.</p>
</div>
<h3 id="_ingest_processor_plugins" class="discrete">Ingest Processor Plugins</h3>
<div class="paragraph">
<p>Additional ingest processors can be implemented and installed as OpenSearch <a href="https://www.opensearch.org/guide/en/opensearch/plugins/{branch}/intro.html">plugins</a>.
See <a href="https://www.opensearch.org/guide/en/opensearch/plugins/{branch}/ingest.html">Ingest plugins</a> for information about the available ingest plugins.</p>
</div>
<div class="sect2">
<h3 id="append-processor">Append processor</h3>
<titleabbrev>Append</titleabbrev>
<div class="paragraph">
<p>Appends one or more values to an existing array if the field already exists and it is an array.
Converts a scalar to an array and appends one or more values to it if the field exists and it is a scalar.
Creates an array containing the provided values if the field doesn&#8217;t exist.
Accepts a single value or an array of values.</p>
</div>
<table id="append-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Append Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to be appended to. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value to be appended. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allow_duplicates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>false</code>, the processor does not append
values already present in the field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "append": {
    "field": "tags",
    "value": ["production", "{{app}}", "{{owner}}"]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="bytes-processor">Bytes processor</h3>
<titleabbrev>Bytes</titleabbrev>
<div class="paragraph">
<p>Converts a human readable byte value (e.g. 1kb) to its value in bytes (e.g. 1024). If the field is an array of strings, all members of the array will be converted.</p>
</div>
<div class="paragraph">
<p>Supported human readable units are "b", "kb", "mb", "gb", "tb", "pb" case insensitive. An error will occur if
the field is not a supported format or resultant value exceeds 2^63.</p>
</div>
<table id="bytes-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Bytes Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to convert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "bytes": {
    "field": "file.size"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="convert-processor">Convert processor</h3>
<titleabbrev>Convert</titleabbrev>
<div class="paragraph">
<p>Converts a field in the currently ingested document to a different type, such as converting a string to an integer.
If the field value is an array, all members will be converted.</p>
</div>
<div class="paragraph">
<p>The supported types include: <code>integer</code>, <code>long</code>, <code>float</code>, <code>double</code>, <code>string</code>, <code>boolean</code>, and <code>auto</code>.</p>
</div>
<div class="paragraph">
<p>Specifying <code>boolean</code> will set the field to true if its string value is equal to <code>true</code> (ignore case), to
false if its string value is equal to <code>false</code> (ignore case), or it will throw an exception otherwise.</p>
</div>
<div class="paragraph">
<p>Specifying <code>auto</code> will attempt to convert the string-valued <code>field</code> into the closest non-string type.
For example, a field whose value is <code>"true"</code> will be converted to its respective boolean type: <code>true</code>. Do note
that float takes precedence of double in <code>auto</code>. A value of <code>"242.15"</code> will "automatically" be converted to
<code>242.15</code> of type <code>float</code>. If a provided field cannot be appropriately converted, the Convert Processor will
still process successfully and leave the field value as-is. In such a case, <code>target_field</code> will
still be updated with the unconverted field value.</p>
</div>
<table id="convert-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Convert Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field whose value is to be converted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type to convert the existing value to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT _ingest/pipeline/my-pipeline-id
{
  "description": "converts the content of the id field to an integer",
  "processors" : [
    {
      "convert" : {
        "field" : "id",
        "type": "integer"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="csv-processor">CSV processor</h3>
<titleabbrev>CSV</titleabbrev>
<div class="paragraph">
<p>Extracts fields from CSV line out of a single text field within a document. Any empty field in CSV will be skipped.</p>
</div>
<table id="csv-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. CSV Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to extract data from</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_fields</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The array of fields to assign extracted values to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>separator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Separator used in CSV, has to be single character string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>quote</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quote used in CSV, has to be single character string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trim</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trim whitespaces in unquoted fields</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>empty_value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value used to fill empty fields, empty fields will be skipped if this is not provided.
                                             Empty field is one with no value (2 consecutive separators) or empty quotes (<code>""</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "csv": {
    "field": "my_field",
    "target_fields": ["field1", "field2"]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>trim</code> option is enabled then any whitespace in the beginning and in the end of each unquoted field will be trimmed.
For example with configuration above, a value of <code>A, B</code> will result in field <code>field2</code>
having value <code>&#160;B</code> (with space at the beginning). If <code>trim</code> is enabled <code>A, B</code> will result in field <code>field2</code>
having value <code>B</code> (no whitespace). Quoted fields will be left untouched.</p>
</div>
</div>
<div class="sect2">
<h3 id="date-processor">Date processor</h3>
<titleabbrev>Date</titleabbrev>
<div class="paragraph">
<p>Parses dates from fields, and then uses the date or timestamp as the timestamp for the document.
By default, the date processor adds the parsed date as a new field called <code>@timestamp</code>. You can specify a
different field by setting the <code>target_field</code> configuration parameter. Multiple date formats are supported
as part of the same date processor definition. They will be used sequentially to attempt parsing the date field,
in the same order they were defined as part of the processor definition.</p>
</div>
<table id="date-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Date options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to get the date from.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">@timestamp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field that will hold the parsed date.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>formats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of the expected date formats. Can be a <a href="mapping-params.html#mapping-date-format">java time pattern</a> or one of the following formats: ISO8601, UNIX, UNIX_MS, or TAI64N.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timezone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timezone to use when parsing the date. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENGLISH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The locale to use when parsing the date, relevant when parsing month names or week days. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>output_format</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>yyyy-MM-dd&#8217;T&#8217;HH:mm:ss.SSSXXX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The format to use when writing the date to <code>target_field</code>. Can be a <a href="mapping-params.html#mapping-date-format">java time pattern</a> or one of the following formats: ISO8601, UNIX, UNIX_MS, or TAI64N.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example that adds the parsed date to the <code>timestamp</code> field based on the <code>initial_date</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "description" : "...",
  "processors" : [
    {
      "date" : {
        "field" : "initial_date",
        "target_field" : "timestamp",
        "formats" : ["dd/MM/yyyy HH:mm:ss"],
        "timezone" : "Europe/Amsterdam"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>timezone</code> and <code>locale</code> processor parameters are templated. This means that their values can be
extracted from fields within documents. The example below shows how to extract the locale/timezone
details from existing fields, <code>my_timezone</code> and <code>my_locale</code>, in the ingested document that contain
the timezone and locale values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "description" : "...",
  "processors" : [
    {
      "date" : {
        "field" : "initial_date",
        "target_field" : "timestamp",
        "formats" : ["ISO8601"],
        "timezone" : "{{my_timezone}}",
        "locale" : "{{my_locale}}"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="date-index-name-processor">Date index name processor</h3>
<titleabbrev>Date index name</titleabbrev>
<div class="paragraph">
<p>The purpose of this processor is to point documents to the right time based index based
on a date or timestamp field in a document by using the <a href="api-conventions.html#date-math-index-names">date math index name support</a>.</p>
</div>
<div class="paragraph">
<p>The processor sets the <code>_index</code> metadata field with a date math index name expression based on the provided index name
prefix, a date or timestamp field in the documents being processed and the provided date rounding.</p>
</div>
<div class="paragraph">
<p>First, this processor fetches the date or timestamp from a field in the document being processed. Optionally,
date formatting can be configured on how the field&#8217;s value should be parsed into a date. Then this date,
the provided index name prefix and the provided date rounding get formatted into a date math index name expression.
Also here optionally date formatting can be specified on how the date should be formatted into a date math index name
expression.</p>
</div>
<div class="paragraph">
<p>An example pipeline that points documents to a monthly index that starts with a <code>my-index-</code> prefix based on a
date in the <code>date1</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/monthlyindex
{
  "description": "monthly date-time index naming",
  "processors" : [
    {
      "date_index_name" : {
        "field" : "date1",
        "index_name_prefix" : "my-index-",
        "date_rounding" : "M"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using that pipeline for an index request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index/_doc/1?pipeline=monthlyindex
{
  "date1" : "2016-04-25T12:02:01.789Z"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "_index" : "my-index-2016-04-01",
  "_type" : "_doc",
  "_id" : "1",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 55,
  "_primary_term" : 1
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above request will not index this document into the <code>my-index</code> index, but into the <code>my-index-2016-04-01</code> index because
it was rounded by month. This is because the date-index-name-processor overrides the <code>_index</code> property of the document.</p>
</div>
<div class="paragraph">
<p>To see the date-math value of the index supplied in the actual index request which resulted in the above document being
indexed into <code>my-index-2016-04-01</code> we can inspect the effects of the processor using a simulate request.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST _ingest/pipeline/_simulate
{
  "pipeline" :
  {
    "description": "monthly date-time index naming",
    "processors" : [
      {
        "date_index_name" : {
          "field" : "date1",
          "index_name_prefix" : "my-index-",
          "date_rounding" : "M"
        }
      }
    ]
  },
  "docs": [
    {
      "_source": {
        "date1": "2016-04-25T12:02:01.789Z"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and the result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "docs" : [
    {
      "doc" : {
        "_id" : "_id",
        "_index" : "&lt;my-index-{2016-04-25||/M{yyyy-MM-dd|UTC}}&gt;",
        "_type" : "_doc",
        "_source" : {
          "date1" : "2016-04-25T12:02:01.789Z"
        },
        "_ingest" : {
          "timestamp" : "2016-11-08T19:43:03.850+0000"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example shows that <code>_index</code> was set to <code>&lt;my-index-{2016-04-25||/M{yyyy-MM-dd|UTC}}&gt;</code>. OpenSearch
understands this to mean <code>2016-04-01</code> as is explained in the <a href="api-conventions.html#date-math-index-names">date math index name documentation</a></p>
</div>
<table id="date-index-name-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Date index name options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to get the date or timestamp from.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index_name_prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A prefix of the index name to be prepended before the printed date. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>date_rounding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How to round the date when formatting the date into the index name. Valid values are: <code>y</code> (year), <code>M</code> (month), <code>w</code> (week), <code>d</code> (day), <code>h</code> (hour), <code>m</code> (minute) and <code>s</code> (second). Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>date_formats</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyy-MM-dd'T'HH:mm:ss.SSSXX</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An array of the expected date formats for parsing dates / timestamps in the document being preprocessed. Can be a java time pattern or one of the following formats: ISO8601, UNIX, UNIX_MS, or TAI64N.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timezone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UTC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timezone to use when parsing the date and when date math index supports resolves expressions into concrete index names.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>locale</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENGLISH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The locale to use when parsing the date from the document being preprocessed, relevant when parsing month names or week days.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>index_name_format</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yyyy-MM-dd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The format to be used when printing the parsed date into the index name. A valid java time pattern is expected here. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="dissect-processor">Dissect processor</h3>
<titleabbrev>Dissect</titleabbrev>
<div class="paragraph">
<p>Similar to the <a href="ingest-processors.html#grok-processor">Grok Processor</a>, dissect also extracts structured fields out of a single text field
within a document.  However unlike the <a href="ingest-processors.html#grok-processor">Grok Processor</a>, dissect does not use
<a href="https://en.wikipedia.org/wiki/Regular_expression">Regular Expressions</a>. This allows dissect&#8217;s syntax to be simple and for
some cases faster than the <a href="ingest-processors.html#grok-processor">Grok Processor</a>.</p>
</div>
<div class="paragraph">
<p>Dissect matches a single text field against a defined pattern.</p>
</div>
<div class="paragraph">
<p>For example the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-txt" data-lang="txt">%{clientip} %{ident} %{auth} [%{@timestamp}] \"%{verb} %{request} HTTP/%{httpversion}\" %{status} %{size}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will match a log line of this format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-txt" data-lang="txt">1.2.3.4 - - [30/Apr/1998:22:00:52 +0000] \"GET /english/venues/cities/images/montpellier/18.gif HTTP/1.0\" 200 3171</code></pre>
</div>
</div>
<div class="paragraph">
<p>and result in a document with the following fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">"doc": {
  "_index": "_index",
  "_type": "_type",
  "_id": "_id",
  "_source": {
    "request": "/english/venues/cities/images/montpellier/18.gif",
    "auth": "-",
    "ident": "-",
    "verb": "GET",
    "@timestamp": "30/Apr/1998:22:00:52 +0000",
    "size": "3171",
    "clientip": "1.2.3.4",
    "httpversion": "1.0",
    "status": "200"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A dissect pattern is defined by the parts of the string that will be discarded. In the example above the first part
to be discarded is a single space. Dissect finds this space, then assigns the value of <code>clientip</code> is everything up
until that space.
Later dissect matches the <code>[</code> and then <code>]</code> and then assigns <code>@timestamp</code> to everything in-between <code>[</code> and <code>]</code>.
Paying special attention the parts of the string to discard will help build successful dissect patterns.</p>
</div>
<div class="paragraph">
<p>Successful matches require all keys in a pattern to have a value. If any of the <code>%{keyname}</code> defined in the pattern do
not have a value, then an exception is thrown and may be handled by the <a href="handling-failure-in-pipelines.html">on_failure</a> directive.
An empty key <code>%{}</code> or a <a href="ingest-processors.html#dissect-modifier-named-skip-key">named skip key</a> can be used to match values, but exclude the value from
the final document. All matched values are represented as string data types. The <a href="ingest-processors.html#convert-processor">convert processor</a>
may be used to convert to expected data type.</p>
</div>
<div class="paragraph">
<p>Dissect also supports <a href="ingest-processors.html#dissect-key-modifiers">key modifiers</a> that can change dissect&#8217;s default
behavior. For example you can instruct dissect to ignore certain fields, append fields, skip over padding, etc.
See <a href="ingest-processors.html#dissect-key-modifiers">below</a> for more information.</p>
</div>
<table id="dissect-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Dissect Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to dissect</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pattern to apply to the field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>append_separator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"" (empty string)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The character(s) that separate the appended fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "dissect": {
    "field": "message",
    "pattern" : "%{clientip} %{ident} %{auth} [%{@timestamp}] \"%{verb} %{request} HTTP/%{httpversion}\" %{status} %{size}"
   }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="dissect-key-modifiers">Dissect key modifiers</h4>
<div class="paragraph">
<p>Key modifiers can change the default behavior for dissection. Key modifiers may be found on the left or right
of the <code>%{keyname}</code> always inside the <code>%{</code> and <code>}</code>. For example <code>%{+keyname &#8594;}</code> has the append and right padding
modifiers.</p>
</div>
<table id="dissect-key-modifiers-table" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Dissect Key Modifiers</caption>
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Modifier</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Position</th>
<th class="tableblock halign-left valign-top">Example</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8594;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip right padding</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(far) right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{keyname1&#8594;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skips any repeated characters to the right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ingest-processors.html#dissect-modifier-skip-right-padding">link</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{+keyname} %{+keyname}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Appends two or more fields together</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ingest-processors.html#dissect-modifier-append-key">link</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code> with <code>/n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Append with order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left and right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{+keyname/2} %{+keyname/1}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Appends two or more fields together in the order specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ingest-processors.html#dissect-modifier-append-key-with-order">link</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Named skip key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{?ignoreme}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skips the matched value in the output. Same behavior as <code>%{}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ingest-processors.html#dissect-modifier-named-skip-key">link</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code> and <code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference keys</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{*r1} %{&amp;r1}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the output key as value of <code>*</code> and output value of <code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="ingest-processors.html#dissect-modifier-reference-keys">link</a></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="dissect-modifier-skip-right-padding">Right padding modifier (<code>&#8594;</code>)</h5>
<div class="paragraph">
<p>The algorithm that performs the dissection is very strict in that it requires all characters in the pattern to match
the source string. For example, the pattern <code>%{fookey} %{barkey}</code> (1 space), will match the string "foo&#160;bar"
(1 space), but will not match the string "foo&#160;&#160;bar" (2 spaces) since the pattern has only 1 space and the
source string has 2 spaces.</p>
</div>
<div class="paragraph">
<p>The right padding modifier helps with this case. Adding the right padding modifier to the pattern <code>%{fookey&#8594;} %{barkey}</code>,
It will now will match "foo&#160;bar" (1 space) and "foo&#160;&#160;bar" (2 spaces)
and even "foo&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bar" (10 spaces).</p>
</div>
<div class="paragraph">
<p>Use the right padding modifier to allow for repetition of the characters after a <code>%{keyname&#8594;}</code>.</p>
</div>
<div class="paragraph">
<p>The right padding modifier may be placed on any key with any other modifiers. It should always be the furthest right
modifier. For example: <code>%{+keyname/1&#8594;}</code> and <code>%{&#8594;}</code></p>
</div>
<div class="paragraph">
<p>Right padding modifier example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{ts&#8594;} %{level}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1998-08-10T17:15:42,466&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;WARN</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* ts = 1998-08-10T17:15:42,466<br>
* level = WARN</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The right padding modifier may be used with an empty key to help skip unwanted data. For example, the same input string, but wrapped with brackets requires the use of an empty right padded key to achieve the same result.</p>
</div>
<div class="paragraph">
<p>Right padding modifier with empty key example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[%{ts}]%{&#8594;}[%{level}]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[1998-08-10T17:15:42,466]&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;[WARN]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* ts = 1998-08-10T17:15:42,466<br>
* level = WARN</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="append-modifier">Append modifier (<code>+</code>)</h5>
<div id="dissect-modifier-append-key" class="paragraph">
<p>Dissect supports appending two or more results together for the output.
Values are appended left to right. An append separator can be specified.
In this example the append_separator is defined as a space.</p>
</div>
<div class="paragraph">
<p>Append modifier example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{+name} %{+name} %{+name} %{+name}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">john jacob jingleheimer schmidt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* name = john jacob jingleheimer schmidt</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="append-order-modifier">Append with order modifier (<code>+</code> and <code>/n</code>)</h5>
<div id="dissect-modifier-append-key-with-order" class="paragraph">
<p>Dissect supports appending two or more results together for the output.
Values are appended based on the order defined (<code>/n</code>). An append separator can be specified.
In this example the append_separator is defined as a comma.</p>
</div>
<div class="paragraph">
<p>Append with order modifier example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{+name/2} %{+name/4} %{+name/3} %{+name/1}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">john jacob jingleheimer schmidt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* name = schmidt,john,jingleheimer,jacob</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="named-skip-key">Named skip key (<code>?</code>)</h5>
<div id="dissect-modifier-named-skip-key" class="paragraph">
<p>Dissect supports ignoring matches in the final result. This can be done with an empty key <code>%{}</code>, but for readability
it may be desired to give that empty key a name.</p>
</div>
<div class="paragraph">
<p>Named skip key modifier example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%{clientip} %{?ident} %{?auth} [%{@timestamp}]</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2.3.4 - - [30/Apr/1998:22:00:52 +0000]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* clientip = 1.2.3.4<br>
* @timestamp = 30/Apr/1998:22:00:52 +0000</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="reference-keys">Reference keys (<code>*</code> and <code>&amp;</code>)</h5>
<div id="dissect-modifier-reference-keys" class="paragraph">
<p>Dissect support using parsed values as the key/value pairings for the structured content. Imagine a system that
partially logs in key/value pairs. Reference keys allow you to maintain that key/value relationship.</p>
</div>
<div class="paragraph">
<p>Reference key modifier example</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Pattern</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[%{ts}] [%{level}] %{*p1}:%{&amp;p1} %{*p2}:%{&amp;p2}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Input</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[2018-08-10T17:15:42,466] [ERR] ip:1.2.3.4 error:REFUSED</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Result</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">* ts = 1998-08-10T17:15:42,466<br>
* level = ERR<br>
* ip = 1.2.3.4<br>
* error = REFUSED</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dot-expand-processor">Dot expander processor</h3>
<titleabbrev>Dot expander</titleabbrev>
<div class="paragraph">
<p>Expands a field with dots into an object field. This processor allows fields
with dots in the name to be accessible by other processors in the pipeline.
Otherwise these <a href="accessing-data-in-pipelines.html">fields</a> can&#8217;t be accessed by any processor.</p>
</div>
<table id="dot-expander-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Dot Expand Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to expand into an object field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field that contains the field to expand. Only required if the field to expand is part another object field, because the <code>field</code> option can only understand leaf fields.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "dot_expander": {
    "field": "foo.bar"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example the dot expand processor would turn this document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foo.bar" : "value"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foo" : {
    "bar" : "value"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there is already a <code>bar</code> field nested under <code>foo</code> then
this processor merges the <code>foo.bar</code> field into it. If the field is
a scalar value then it will turn that field into an array field.</p>
</div>
<div class="paragraph">
<p>For example, the following document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foo.bar" : "value2",
  "foo" : {
    "bar" : "value1"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>is transformed by the <code>dot_expander</code> processor into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foo" : {
    "bar" : ["value1", "value2"]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If any field outside of the leaf field conflicts with a pre-existing field of the same name,
then that field needs to be renamed first.</p>
</div>
<div class="paragraph">
<p>Consider the following document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foo": "value1",
  "foo.bar": "value2"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the <code>foo</code> needs to be renamed first before the <code>dot_expander</code>
processor is applied. So in order for the <code>foo.bar</code> field to properly
be expanded into the <code>bar</code> field under the <code>foo</code> field the following
pipeline should be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "processors" : [
    {
      "rename" : {
        "field" : "foo",
        "target_field" : "foo.bar""
      }
    },
    {
      "dot_expander": {
        "field": "foo.bar"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The reason for this is that Ingest doesn&#8217;t know how to automatically cast
a scalar field to an object field.</p>
</div>
</div>
<div class="sect2">
<h3 id="drop-processor">Drop processor</h3>
<titleabbrev>Drop</titleabbrev>
<div class="paragraph">
<p>Drops the document without raising any errors. This is useful to prevent the document from
getting indexed based on some condition.</p>
</div>
<table id="drop-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Drop Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "drop": {
    "if" : "ctx.network_name == 'Guest'"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="fail-processor">Fail processor</h3>
<titleabbrev>Fail</titleabbrev>
<div class="paragraph">
<p>Raises an exception. This is useful for when
you expect a pipeline to fail and want to relay a specific message
to the requester.</p>
</div>
<table id="fail-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Fail Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The error message thrown by the processor. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "fail": {
    "if" : "ctx.tags.contains('production') != true",
    "message": "The production tag is not present, found tags: {{tags}}"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="foreach-processor">Foreach processor</h3>
<titleabbrev>Foreach</titleabbrev>
<div class="paragraph">
<p>Processes elements in an array of unknown length.</p>
</div>
<div class="paragraph">
<p>All processors can operate on elements inside an array, but if all elements of an array need to
be processed in the same way, defining a processor for each element becomes cumbersome and tricky
because it is likely that the number of elements in an array is unknown. For this reason the <code>foreach</code>
processor exists. By specifying the field holding array elements and a processor that
defines what should happen to each element, array fields can easily be preprocessed.</p>
</div>
<div class="paragraph">
<p>A processor inside the foreach processor works in the array element context and puts that in the ingest metadata
under the <code>_ingest._value</code> key. If the array element is a json object it holds all immediate fields of that json object.
and if the nested object is a value is <code>_ingest._value</code> just holds that value. Note that if a processor prior to the
<code>foreach</code> processor used <code>_ingest._value</code> key then the specified value will not be available to the processor inside
the <code>foreach</code> processor. The <code>foreach</code> processor does restore the original value, so that value is available to processors
after the <code>foreach</code> processor.</p>
</div>
<div class="paragraph">
<p>Note that any other field from the document are accessible and modifiable like with all other processors. This processor
just puts the current array element being read into <code>_ingest._value</code> ingest metadata attribute, so that it may be
pre-processed.</p>
</div>
<div class="paragraph">
<p>If the <code>foreach</code> processor fails to process an element inside the array, and no <code>on_failure</code> processor has been specified,
then it aborts the execution and leaves the array unmodified.</p>
</div>
<table id="foreach-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Foreach Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The array field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processor</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The processor to execute against each field</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Assume the following document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "values" : ["foo", "bar", "baz"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When this <code>foreach</code> processor operates on this sample document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foreach" : {
    "field" : "values",
    "processor" : {
      "uppercase" : {
        "field" : "_ingest._value"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the document will look like this after preprocessing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "values" : ["FOO", "BAR", "BAZ"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s take a look at another example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "persons" : [
    {
      "id" : "1",
      "name" : "John Doe"
    },
    {
      "id" : "2",
      "name" : "Jane Doe"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the <code>id</code> field needs to be removed,
so the following <code>foreach</code> processor is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foreach" : {
    "field" : "persons",
    "processor" : {
      "remove" : {
        "field" : "_ingest._value.id"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After preprocessing the result is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "persons" : [
    {
      "name" : "John Doe"
    },
    {
      "name" : "Jane Doe"
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The wrapped processor can have a <code>on_failure</code> definition.
For example, the <code>id</code> field may not exist on all person objects.
Instead of failing the index request, you can use an <code>on_failure</code>
block to send the document to the 'failure_index' index for later inspection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "foreach" : {
    "field" : "persons",
    "processor" : {
      "remove" : {
        "field" : "_value.id",
        "on_failure" : [
          {
            "set" : {
              "field": "_index",
              "value": "failure_index"
            }
          }
        ]
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, if the <code>remove</code> processor does fail, then
the array elements that have been processed thus far will
be updated.</p>
</div>
<div class="paragraph">
<p>Another advanced example can be found in the <a href="https://www.opensearch.org/guide/en/opensearch/plugins/{branch}/ingest-attachment-with-arrays.html">attachment processor documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="geoip-processor">GeoIP processor</h3>
<titleabbrev>GeoIP</titleabbrev>
<div class="paragraph">
<p>The <code>geoip</code> processor adds information about the geographical location of IP addresses, based on data from the Maxmind databases.
This processor adds this information by default under the <code>geoip</code> field. The <code>geoip</code> processor can resolve both IPv4 and
IPv6 addresses.</p>
</div>
<div class="paragraph">
<p>The <code>ingest-geoip</code> module ships by default with the GeoLite2 City, GeoLite2 Country and GeoLite2 ASN GeoIP2 databases from Maxmind made available
under the CCA-ShareAlike 4.0 license. For more details see, <a href="http://dev.maxmind.com/geoip/geoip2/geolite2/" class="bare">http://dev.maxmind.com/geoip/geoip2/geolite2/</a></p>
</div>
<div class="paragraph">
<p>The <code>geoip</code> processor can run with other city, country and ASN GeoIP2 databases
from Maxmind. The database files must be copied into the <code>ingest-geoip</code> config
directory located at <code>$OPENSEARCH_CONFIG/ingest-geoip</code>. Custom database files must be
stored uncompressed and the extension must be <code>-City.mmdb</code>, <code>-Country.mmdb</code>, or
<code>-ASN.mmdb</code> to indicate the type of the database. These database files can not
have the same filename as any of the built-in database names. The
<code>database_file</code> processor option is used to specify the filename of the custom
database to use for the processor.</p>
</div>
<div class="sect3">
<h4 id="using-ingest-geoip">Using the <code>geoip</code> Processor in a Pipeline</h4>
<table id="ingest-geoip-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. <code>geoip</code> options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to get the ip address from for the geographical lookup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">geoip</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field that will hold the geographical information looked up from the Maxmind database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>database_file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GeoLite2-City.mmdb</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The database filename referring to a database the module ships with (GeoLite2-City.mmdb, GeoLite2-Country.mmdb, or GeoLite2-ASN.mmdb) or a custom database in the <code>ingest-geoip</code> config directory.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>continent_name</code>, <code>country_iso_code</code>, <code>country_name</code>, <code>region_iso_code</code>, <code>region_name</code>, <code>city_name</code>, <code>location</code>] *</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls what properties are added to the <code>target_field</code> based on the geoip lookup.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>first_only</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> only first found geoip data will be returned, even if <code>field</code> contains array</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>*Depends on what is available in <code>database_file</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the GeoLite2 City database is used, then the following fields may be added under the <code>target_field</code>: <code>ip</code>,
<code>country_iso_code</code>, <code>country_name</code>, <code>continent_name</code>, <code>region_iso_code</code>, <code>region_name</code>, <code>city_name</code>, <code>timezone</code>, <code>latitude</code>, <code>longitude</code>
and <code>location</code>. The fields actually added depend on what has been found and which properties were configured in <code>properties</code>.</p>
</li>
<li>
<p>If the GeoLite2 Country database is used, then the following fields may be added under the <code>target_field</code>: <code>ip</code>,
<code>country_iso_code</code>, <code>country_name</code> and <code>continent_name</code>. The fields actually added depend on what has been found and which properties
were configured in <code>properties</code>.</p>
</li>
<li>
<p>If the GeoLite2 ASN database is used, then the following fields may be added under the <code>target_field</code>: <code>ip</code>,
<code>asn</code>, <code>organization_name</code> and <code>network</code>. The fields actually added depend on what has been found and which properties were configured
in <code>properties</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example that uses the default city database and adds the geographical information to the <code>geoip</code> field based on the <code>ip</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip"
      }
    }
  ]
}
PUT my-index-00001/_doc/my_id?pipeline=geoip
{
  "ip": "8.8.8.8"
}
GET my-index-00001/_doc/my_id</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "found": true,
  "_index": "my-index-00001",
  "_type": "_doc",
  "_id": "my_id",
  "_version": 1,
  "_seq_no": 55,
  "_primary_term": 1,
  "_source": {
    "ip": "8.8.8.8",
    "geoip": {
      "continent_name": "North America",
      "country_name": "United States",
      "country_iso_code": "US",
      "location": { "lat": 37.751, "lon": -97.822 }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example that uses the default country database and adds the
geographical information to the <code>geo</code> field based on the <code>ip</code> field. Note that
this database is included in the module. So this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip",
        "target_field" : "geo",
        "database_file" : "GeoLite2-Country.mmdb"
      }
    }
  ]
}
PUT my-index-00001/_doc/my_id?pipeline=geoip
{
  "ip": "8.8.8.8"
}
GET my-index-00001/_doc/my_id</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "found": true,
  "_index": "my-index-00001",
  "_type": "_doc",
  "_id": "my_id",
  "_version": 1,
  "_seq_no": 65,
  "_primary_term": 1,
  "_source": {
    "ip": "8.8.8.8",
    "geo": {
      "continent_name": "North America",
      "country_name": "United States",
      "country_iso_code": "US",
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Not all IP addresses find geo information from the database, When this
occurs, no <code>target_field</code> is inserted into the document.</p>
</div>
<div class="paragraph">
<p>Here is an example of what documents will be indexed as when information for "80.231.5.0"
cannot be found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/geoip
{
  "description" : "Add geoip info",
  "processors" : [
    {
      "geoip" : {
        "field" : "ip"
      }
    }
  ]
}

PUT my-index-00001/_doc/my_id?pipeline=geoip
{
  "ip": "80.231.5.0"
}

GET my-index-00001/_doc/my_id</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "_index" : "my-index-00001",
  "_type" : "_doc",
  "_id" : "my_id",
  "_version" : 1,
  "_seq_no" : 71,
  "_primary_term": 1,
  "found" : true,
  "_source" : {
    "ip" : "80.231.5.0"
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="ingest-geoip-mappings-note">Recognizing Location as a Geopoint</h5>
<div class="paragraph">
<p>Although this processor enriches your document with a <code>location</code> field containing
the estimated latitude and longitude of the IP address, this field will not be
indexed as a <a href="https://www.opensearch.org/guide/en/opensearch/reference/{branch}/geo-point.html"><code>geo_point</code></a> type in OpenSearch without explicitly defining it
as such in the mapping.</p>
</div>
<div class="paragraph">
<p>You can use the following mapping for the example index above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my_ip_locations
{
  "mappings": {
    "properties": {
      "geoip": {
        "properties": {
          "location": { "type": "geo_point" }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="ingest-geoip-settings">Node Settings</h5>
<div class="paragraph">
<p>The <code>geoip</code> processor supports the following setting:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ingest.geoip.cache_size</code></dt>
<dd>
<p>The maximum number of results that should be cached. Defaults to <code>1000</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that these settings are node settings and apply to all <code>geoip</code> processors, i.e. there is one cache for all defined <code>geoip</code> processors.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="grok-processor">Grok processor</h3>
<titleabbrev>Grok</titleabbrev>
<div class="paragraph">
<p>Extracts structured fields out of a single text field within a document. You choose which field to
extract matched fields from, as well as the grok pattern you expect will match. A grok pattern is like a regular
expression that supports aliased expressions that can be reused.</p>
</div>
<div class="paragraph">
<p>This tool is perfect for syslog logs, apache and other webserver logs, mysql logs, and in general, any log format
that is generally written for humans and not computer consumption.
This processor comes packaged with many
<a href="https://github.com/opensearch-project/OpenSearch/blob/{branch}/libs/grok/src/main/resources/patterns">reusable patterns</a>.</p>
</div>
<div class="paragraph">
<p>If you need help building patterns to match your logs, you will find the <a href="https://grokconstructor.appspot.com">Grok Constructor</a> is a useful tool.</p>
</div>
<div class="sect3">
<h4 id="grok-basics">Grok Basics</h4>
<div class="paragraph">
<p>Grok sits on top of regular expressions, so any regular expressions are valid in grok as well.
The regular expression library is Oniguruma, and you can see the full supported regexp syntax
<a href="https://github.com/kkos/oniguruma/blob/master/doc/RE">on the Oniguruma site</a>.</p>
</div>
<div class="paragraph">
<p>Grok works by leveraging this regular expression language to allow naming existing patterns and combining them into more
complex patterns that match your fields.</p>
</div>
<div class="paragraph">
<p>The syntax for reusing a grok pattern comes in three forms: <code>%{SYNTAX:SEMANTIC}</code>, <code>%{SYNTAX}</code>, <code>%{SYNTAX:SEMANTIC:TYPE}</code>.</p>
</div>
<div class="paragraph">
<p>The <code>SYNTAX</code> is the name of the pattern that will match your text. For example, <code>3.44</code> will be matched by the <code>NUMBER</code>
pattern and <code>55.3.244.1</code> will be matched by the <code>IP</code> pattern. The syntax is how you match. <code>NUMBER</code> and <code>IP</code> are both
patterns that are provided within the default patterns set.</p>
</div>
<div class="paragraph">
<p>The <code>SEMANTIC</code> is the identifier you give to the piece of text being matched. For example, <code>3.44</code> could be the
duration of an event, so you could call it simply <code>duration</code>. Further, a string <code>55.3.244.1</code> might identify
the <code>client</code> making a request.</p>
</div>
<div class="paragraph">
<p>The <code>TYPE</code> is the type you wish to cast your named field. <code>int</code>, <code>long</code>, <code>double</code>, <code>float</code> and <code>boolean</code> are supported types for coercion.</p>
</div>
<div class="paragraph">
<p>For example, you might want to match the following text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-txt" data-lang="txt">3.44 55.3.244.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>You may know that the message in the example is a number followed by an IP address. You can match this text by using the following
Grok expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-txt" data-lang="txt">%{NUMBER:duration} %{IP:client}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="using-grok">Using the Grok Processor in a Pipeline</h4>
<table id="grok-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Grok Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to use for grok expression parsing</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>patterns</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An ordered list of grok expression to match and extract named captures with. Returns on the first expression in the list that matches.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern_definitions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A map of pattern-name and pattern tuples defining custom patterns to be used by the current processor. Patterns matching existing names will override the pre-existing definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trace_match</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">when true, <code>_ingest._grok_match_index</code> will be inserted into your matched document&#8217;s metadata with the index into the pattern found in <code>patterns</code> that matched.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example of using the provided patterns to extract out and name structured fields from a string field in
a document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST _ingest/pipeline/_simulate
{
  "pipeline": {
    "description" : "...",
    "processors": [
      {
        "grok": {
          "field": "message",
          "patterns": ["%{IP:client} %{WORD:method} %{URIPATHPARAM:request} %{NUMBER:bytes:int} %{NUMBER:duration:double}"]
        }
      }
    ]
  },
  "docs":[
    {
      "_source": {
        "message": "55.3.244.1 GET /index.html 15824 0.043"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This pipeline will insert these named captures as new fields within the document, like so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "docs": [
    {
      "doc": {
        "_index": "_index",
        "_type": "_doc",
        "_id": "_id",
        "_source" : {
          "duration" : 0.043,
          "request" : "/index.html",
          "method" : "GET",
          "bytes" : 15824,
          "client" : "55.3.244.1",
          "message" : "55.3.244.1 GET /index.html 15824 0.043"
        },
        "_ingest": {
          "timestamp": "2016-11-08T19:43:03.850+0000"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="custom-patterns">Custom Patterns</h4>
<div class="paragraph">
<p>The Grok processor comes pre-packaged with a base set of patterns. These patterns may not always have
what you are looking for. Patterns have a very basic format. Each entry has a name and the pattern itself.</p>
</div>
<div class="paragraph">
<p>You can add your own patterns to a processor definition under the <code>pattern_definitions</code> option.
Here is an example of a pipeline specifying custom pattern definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "description" : "...",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": ["my %{FAVORITE_DOG:dog} is colored %{RGB:color}"],
        "pattern_definitions" : {
          "FAVORITE_DOG" : "beagle",
          "RGB" : "RED|GREEN|BLUE"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="trace-match">Providing Multiple Match Patterns</h4>
<div class="paragraph">
<p>Sometimes one pattern is not enough to capture the potential structure of a field. Let&#8217;s assume we
want to match all messages that contain your favorite pet breeds of either cats or dogs. One way to accomplish
this is to provide two distinct patterns that can be matched, instead of one really complicated expression capturing
the same <code>or</code> behavior.</p>
</div>
<div class="paragraph">
<p>Here is an example of such a configuration executed against the simulate API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST _ingest/pipeline/_simulate
{
  "pipeline": {
  "description" : "parse multiple patterns",
  "processors": [
    {
      "grok": {
        "field": "message",
        "patterns": ["%{FAVORITE_DOG:pet}", "%{FAVORITE_CAT:pet}"],
        "pattern_definitions" : {
          "FAVORITE_DOG" : "beagle",
          "FAVORITE_CAT" : "burmese"
        }
      }
    }
  ]
},
"docs":[
  {
    "_source": {
      "message": "I love burmese cats!"
    }
  }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "docs": [
    {
      "doc": {
        "_type": "_doc",
        "_index": "_index",
        "_id": "_id",
        "_source": {
          "message": "I love burmese cats!",
          "pet": "burmese"
        },
        "_ingest": {
          "timestamp": "2016-11-08T19:43:03.850+0000"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both patterns will set the field <code>pet</code> with the appropriate match, but what if we want to trace which of our
patterns matched and populated our fields? We can do this with the <code>trace_match</code> parameter. Here is the output of
that same pipeline, but with <code>"trace_match": true</code> configured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "docs": [
    {
      "doc": {
        "_type": "_doc",
        "_index": "_index",
        "_id": "_id",
        "_source": {
          "message": "I love burmese cats!",
          "pet": "burmese"
        },
        "_ingest": {
          "_grok_match_index": "1",
          "timestamp": "2016-11-08T19:43:03.850+0000"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above response, you can see that the index of the pattern that matched was <code>"1"</code>. This is to say that it was the
second (index starts at zero) pattern in <code>patterns</code> to match.</p>
</div>
<div class="paragraph">
<p>This trace metadata enables debugging which of the patterns matched. This information is stored in the ingest
metadata and will not be indexed.</p>
</div>
</div>
<div class="sect3">
<h4 id="grok-processor-rest-get">Retrieving patterns from REST endpoint</h4>
<div class="paragraph">
<p>The Grok Processor comes packaged with its own REST endpoint for retrieving which patterns the processor is packaged with.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET _ingest/processor/grok</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above request will return a response body containing a key-value representation of the built-in patterns dictionary.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "patterns" : {
    "BACULA_CAPACITY" : "%{INT}{1,3}(,%{INT}{3})*",
    "PATH" : "(?:%{UNIXPATH}|%{WINPATH})",
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the API returns patterns in the order they are read from disk. This
sort order preserves groupings of related patterns. For example, all patterns
related to parsing Linux syslog lines stay grouped together.</p>
</div>
<div class="paragraph">
<p>You can use the optional boolean <code>s</code> query parameter to sort returned patterns
by key name instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET _ingest/processor/grok?s</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "patterns" : {
    "BACULA_CAPACITY" : "%{INT}{1,3}(,%{INT}{3})*",
    "BACULA_DEVICE" : "%{USER}",
    "BACULA_DEVICEPATH" : "%{UNIXPATH}",
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be useful to reference as the built-in patterns change across versions.</p>
</div>
</div>
<div class="sect3">
<h4 id="grok-watchdog">Grok watchdog</h4>
<div class="paragraph">
<p>Grok expressions that take too long to execute are interrupted and
the grok processor then fails with an exception. The grok
processor has a watchdog thread that determines when evaluation of
a grok expression takes too long and is controlled by the following
settings:</p>
</div>
<table id="grok-watchdog-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Grok watchdog settings</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ingest.grok.watchdog.interval</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How often to check whether there are grok evaluations that take longer than the maximum allowed execution time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ingest.grok.watchdog.max_execution_time</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum allowed execution of a grok expression evaluation.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="grok-debugging">Grok debugging</h4>
<div class="paragraph">
<p>It is recommended to enable debug logging for Grok so that any additional messages may also be seen in the OpenSearch
server log.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">PUT _cluster/settings
{
  "transient": {
    "logger.org.opensearch.ingest.common.GrokProcessor": "debug"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gsub-processor">Gsub processor</h3>
<titleabbrev>Gsub</titleabbrev>
<div class="paragraph">
<p>Converts a string field by applying a regular expression and a replacement.
If the field is an array of string, all members of the array will be converted. If any non-string values are encountered, the processor will throw an exception.</p>
</div>
<table id="gsub-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Gsub Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to apply the replacement to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pattern</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The pattern to be replaced</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>replacement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string to replace the matching patterns with</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "gsub": {
    "field": "field1",
    "pattern": "\\.",
    "replacement": "-"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="htmlstrip-processor">HTML strip processor</h3>
<titleabbrev>HTML strip</titleabbrev>
<div class="paragraph">
<p>Removes HTML tags from the field. If the field is an array of strings, HTML tags will be removed from all members of the array.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Each HTML tag is replaced with a <code>\n</code> character.
</td>
</tr>
</table>
</div>
<table id="htmlstrip-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. HTML Strip Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string-valued field to remove HTML tags from</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "html_strip": {
    "field": "foo"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="join-processor">Join processor</h3>
<titleabbrev>Join</titleabbrev>
<div class="paragraph">
<p>Joins each element of an array into a single string using a separator character between each element.
Throws an error when the field is not an array.</p>
</div>
<table id="join-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Join Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Field containing array values to join</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>separator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The separator character</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the joined value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "join": {
    "field": "joined_array_field",
    "separator": "-"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="json-processor">JSON processor</h3>
<titleabbrev>JSON</titleabbrev>
<div class="paragraph">
<p>Converts a JSON string into a structured JSON object.</p>
</div>
<table id="json-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. Json Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to be parsed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field that the converted structured object will be written into. Any existing content in this field will be overwritten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>add_to_root</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag that forces the serialized json to be injected into the top level of the document. <code>target_field</code> must not be set when this option is chosen.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>All JSON-supported types will be parsed (null, boolean, number, array, object, string).</p>
</div>
<div class="paragraph">
<p>Suppose you provide this configuration of the <code>json</code> processor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "json" : {
    "field" : "string_source",
    "target_field" : "json_target"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the following document is processed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "string_source": "{\"foo\": 2000}"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>after the <code>json</code> processor operates on it, it will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "string_source": "{\"foo\": 2000}",
  "json_target": {
    "foo": 2000
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the following configuration is provided, omitting the optional <code>target_field</code> setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "json" : {
    "field" : "source_and_target"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>then after the <code>json</code> processor operates on this document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "source_and_target": "{\"foo\": 2000}"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>it will look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "source_and_target": {
    "foo": 2000
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This illustrates that, unless it is explicitly named in the processor configuration, the <code>target_field</code>
is the same field provided in the required <code>field</code> configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="kv-processor">KV processor</h3>
<titleabbrev>KV</titleabbrev>
<div class="paragraph">
<p>This processor helps automatically parse messages (or specific event fields) which are of the <code>foo=bar</code> variety.</p>
</div>
<div class="paragraph">
<p>For example, if you have a log message which contains <code>ip=1.2.3.4 error=REFUSED</code>, you can parse those fields automatically by configuring:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "kv": {
    "field": "message",
    "field_split": " ",
    "value_split": "="
  }
}</code></pre>
</div>
</div>
<table id="kv-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. KV Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to be parsed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field_split</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex pattern to use for splitting key-value pairs</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value_split</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Regex pattern to use for splitting the key from the value within a key-value pair</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to insert the extracted keys into. Defaults to the root of the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>include_keys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of keys to filter and insert into document. Defaults to including all keys</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exclude_keys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of keys to exclude from document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prefix</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prefix to be added to extracted keys</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trim_key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String of characters to trim from extracted keys</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trim_value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String of characters to trim from extracted values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>strip_brackets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> strip brackets <code>()</code>, <code>&lt;&gt;</code>, <code>[]</code> as well as quotes <code>'</code> and <code>"</code> from extracted values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="lowercase-processor">Lowercase processor</h3>
<titleabbrev>Lowercase</titleabbrev>
<div class="paragraph">
<p>Converts a string to its lowercase equivalent. If the field is an array of strings, all members of the array will be converted.</p>
</div>
<table id="lowercase-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Lowercase Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to make lowercase</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "lowercase": {
    "field": "foo"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pipeline-processor">Pipeline processor</h3>
<titleabbrev>Pipeline</titleabbrev>
<div class="paragraph">
<p>Executes another pipeline.</p>
</div>
<table id="pipeline-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Pipeline Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the pipeline to execute. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "pipeline": {
    "name": "inner-pipeline"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the current pipeline can be accessed from the <code>_ingest.pipeline</code> ingest metadata key.</p>
</div>
<div class="paragraph">
<p>An example of using this processor for nesting pipelines would be:</p>
</div>
<div class="paragraph">
<p>Define an inner pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/pipelineA
{
  "description" : "inner pipeline",
  "processors" : [
    {
      "set" : {
        "field": "inner_pipeline_set",
        "value": "inner"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Define another pipeline that uses the previously defined inner pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/pipelineB
{
  "description" : "outer pipeline",
  "processors" : [
    {
      "pipeline" : {
        "name": "pipelineA"
      }
    },
    {
      "set" : {
        "field": "outer_pipeline_set",
        "value": "outer"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now indexing a document while applying the outer pipeline will see the inner pipeline executed
from the outer pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index/_doc/1?pipeline=pipelineB
{
  "field": "value"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response from the index request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "_index": "my-index",
  "_type": "_doc",
  "_id": "1",
  "_version": 1,
  "result": "created",
  "_shards": {
    "total": 2,
    "successful": 1,
    "failed": 0
  },
  "_seq_no": 66,
  "_primary_term": 1,
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Indexed document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "field": "value",
  "inner_pipeline_set": "inner",
  "outer_pipeline_set": "outer"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="remove-processor">Remove processor</h3>
<titleabbrev>Remove</titleabbrev>
<div class="paragraph">
<p>Removes existing fields. If one field doesn&#8217;t exist, an exception will be thrown.</p>
</div>
<table id="remove-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Remove Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fields to be removed. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example to remove a single field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "remove": {
    "field": "user_agent"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To remove multiple fields, you can use the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "remove": {
    "field": ["user_agent", "url"]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rename-processor">Rename processor</h3>
<titleabbrev>Rename</titleabbrev>
<div class="paragraph">
<p>Renames an existing field. If the field doesn&#8217;t exist or the new name is already used, an exception will be thrown.</p>
</div>
<table id="rename-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Rename Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to be renamed. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The new name of the field. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "rename": {
    "field": "provider",
    "target_field": "cloud.provider"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="script-processor">Script processor</h3>
<titleabbrev>Script</titleabbrev>
<div class="paragraph">
<p>Allows inline and stored scripts to be executed within ingest pipelines.</p>
</div>
<div class="paragraph">
<p>See <a href="modules-scripting-using.html">How to use scripts</a> to learn more about writing scripts. The Script Processor
leverages caching of compiled scripts for improved performance. Since the
script specified within the processor is potentially re-compiled per document, it is important
to understand how script caching works. To learn more about
caching see <a href="modules-scripting-using.html#modules-scripting-using-caching">Script Caching</a>.</p>
</div>
<table id="script-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Script Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lang</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"painless"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The scripting language</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The stored script id to refer to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>source</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An inline script to be executed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Script Parameters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>One of <code>id</code> or <code>source</code> options must be provided in order to properly reference a script to execute.</p>
</div>
<div class="paragraph">
<p>You can access the current ingest document from within the script context by using the <code>ctx</code> variable.</p>
</div>
<div class="paragraph">
<p>The following example sets a new field called <code>field_a_plus_b_times_c</code> to be the sum of two existing
numeric fields <code>field_a</code> and <code>field_b</code> multiplied by the parameter param_c:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "script": {
    "lang": "painless",
    "source": "ctx.field_a_plus_b_times_c = (ctx.field_a + ctx.field_b) * params.param_c",
    "params": {
      "param_c": 10
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to use the Script Processor to manipulate document metadata like <code>_index</code> and <code>_type</code> during
ingestion. Here is an example of an Ingest Pipeline that renames the index and type to <code>my-index</code> no matter what
was provided in the original index request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/my-index
{
  "description": "use index:my-index",
  "processors": [
    {
      "script": {
        "source": """
          ctx._index = 'my-index';
          ctx._type = '_doc';
        """
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the above pipeline, we can attempt to index a document into the <code>any-index</code> index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT any-index/_doc/1?pipeline=my-index
{
  "message": "text"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response from the above index request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "_index": "my-index",
  "_type": "_doc",
  "_id": "1",
  "_version": 1,
  "result": "created",
  "_shards": {
    "total": 2,
    "successful": 1,
    "failed": 0
  },
  "_seq_no": 89,
  "_primary_term": 1,
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above response, you can see that our document was actually indexed into <code>my-index</code> instead of
<code>any-index</code>. This type of manipulation is often convenient in pipelines that have various branches of transformation,
and depending on the progress made, indexed into different indices.</p>
</div>
</div>
<div class="sect2">
<h3 id="set-processor">Set processor</h3>
<titleabbrev>Set</titleabbrev>
<div class="paragraph">
<p>Sets one field and associates it with the specified value. If the field already exists,
its value will be replaced with the provided one.</p>
</div>
<table id="set-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. Set Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to insert, upsert, or update. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The value to be set for the field. Supports <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippets</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>override</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If processor will update fields with pre-existing non-null-valued field. When set to <code>false</code>, such fields will not be touched.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_empty_value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>value</code> is a <a href="accessing-data-in-pipelines.html#accessing-template-fields">template snippet</a> that evaluates to <code>null</code> or the empty string, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "description" : "sets the value of count to 1"
  "set": {
    "field": "count",
    "value": 1
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This processor can also be used to copy data from one field to another. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/set_os
{
  "description": "sets the value of host.os.name from the field os",
  "processors": [
    {
      "set": {
        "field": "host.os.name",
        "value": "{{os}}"
      }
    }
  ]
}

POST _ingest/pipeline/set_os/_simulate
{
  "docs": [
    {
      "_source": {
        "os": "Ubuntu"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "docs" : [
    {
      "doc" : {
        "_index" : "_index",
        "_type" : "_doc",
        "_id" : "_id",
        "_source" : {
          "host" : {
            "os" : {
              "name" : "Ubuntu"
            }
          },
          "os" : "Ubuntu"
        },
        "_ingest" : {
          "timestamp" : "2019-03-11T21:54:37.909224Z"
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ingest-node-set-security-user-processor">Set security user processor</h3>
<titleabbrev>Set security user</titleabbrev>
<div class="paragraph">
<p>Sets user-related details (such as <code>username</code>,  <code>roles</code>, <code>email</code>, <code>full_name</code>,
<code>metadata</code>, <code>api_key</code>, <code>realm</code> and <code>authentication_type</code>) from the current
authenticated user to the current document by pre-processing the ingest.
The <code>api_key</code> property exists only if the user authenticates with an
API key. It is an object containing the <code>id</code> and <code>name</code> fields of the API key.
The <code>realm</code> property is also an object with two fields, <code>name</code> and <code>type</code>.
When using API key authentication, the <code>realm</code> property refers to the realm
from which the API key is created.
The <code>authentication_type</code> property is a string that can take value from
<code>REALM</code>, <code>API_KEY</code>, <code>TOKEN</code> and <code>ANONYMOUS</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Requires an authenticated user for the index request.
</td>
</tr>
</table>
</div>
<table id="set-security-user-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. Set Security User Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to store the user information into.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>username</code>, <code>roles</code>, <code>email</code>, <code>full_name</code>, <code>metadata</code>, <code>api_key</code>, <code>realm</code>, <code>authentication_type</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls what user related properties are added to the <code>field</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following example adds all user details for the current authenticated user
to the <code>user</code> field for all documents that are processed by this pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "processors" : [
    {
      "set_security_user": {
        "field": "user"
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sort-processor">Sort processor</h3>
<titleabbrev>Sort</titleabbrev>
<div class="paragraph">
<p>Sorts the elements of an array ascending or descending.  Homogeneous arrays of numbers will be sorted
numerically, while arrays of strings or heterogeneous arrays of strings + numbers will be sorted lexicographically.
Throws an error when the field is not an array.</p>
</div>
<table id="sort-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. Sort Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to be sorted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>"asc"</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort order to use. Accepts <code>"asc"</code> or <code>"desc"</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the sorted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "sort": {
    "field": "array_field_to_sort",
    "order": "desc"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="split-processor">Split processor</h3>
<titleabbrev>Split</titleabbrev>
<div class="paragraph">
<p>Splits a field into an array using a separator character. Only works on string fields.</p>
</div>
<table id="split-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 29. Split Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to split</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>separator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A regex which matches the separator, eg <code>,</code> or <code>\s+</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the split value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preserve_trailing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Preserves empty trailing fields, if any.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "split": {
    "field": "my_field",
    "separator": "\\s+" <b class="conum">(1)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Treat all consecutive whitespace characters as a single separator</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the <code>preserve_trailing</code> option is enabled, any trailing empty fields in the input will be preserved. For example,
in the configuration below, a value of <code>A,,B,,</code> in the <code>my_field</code> property will be split into an array of five elements
<code>["A", "", "B", "", ""]</code> with two empty trailing fields. If the <code>preserve_trailing</code> property were not enabled, the two
empty trailing fields would be discarded resulting in the three-element array <code>["A", "", "B"]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "split": {
    "field": "my_field",
    "separator": ",",
    "preserve_trailing": true
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trim-processor">Trim processor</h3>
<titleabbrev>Trim</titleabbrev>
<div class="paragraph">
<p>Trims whitespace from field. If the field is an array of strings, all members of the array will be trimmed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This only works on leading and trailing whitespace.
</td>
</tr>
</table>
</div>
<table id="trim-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 30. Trim Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string-valued field to trim whitespace from</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the trimmed value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "trim": {
    "field": "foo"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="uppercase-processor">Uppercase processor</h3>
<titleabbrev>Uppercase</titleabbrev>
<div class="paragraph">
<p>Converts a string to its uppercase equivalent. If the field is an array of strings, all members of the array will be converted.</p>
</div>
<table id="uppercase-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 31. Uppercase Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to make uppercase</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "uppercase": {
    "field": "foo"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="urldecode-processor">URL decode processor</h3>
<titleabbrev>URL decode</titleabbrev>
<div class="paragraph">
<p>URL-decodes a string. If the field is an array of strings, all members of the array will be decoded.</p>
</div>
<table id="urldecode-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 32. URL Decode Options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to decode</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field to assign the converted value to, by default <code>field</code> is updated in-place</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist or is <code>null</code>, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conditionally execute this processor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>on_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_failure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ignore failures for this processor. See <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An identifier for this processor. Useful for debugging and metrics.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-js" data-lang="js">{
  "urldecode": {
    "field": "my_url_to_decode"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-agent-processor">User agent processor</h3>
<titleabbrev>User agent</titleabbrev>
<div class="paragraph">
<p>The <code>user_agent</code> processor extracts details from the user agent string a browser sends with its web requests.
This processor adds this information by default under the <code>user_agent</code> field.</p>
</div>
<div class="paragraph">
<p>The ingest-user-agent module ships by default with the regexes.yaml made available by uap-java with an Apache 2.0 license. For more details see <a href="https://github.com/ua-parser/uap-core" class="bare">https://github.com/ua-parser/uap-core</a>.</p>
</div>
<div class="sect3">
<h4 id="using-ingest-user-agent">Using the user_agent Processor in a Pipeline</h4>
<table id="ingest-user-agent-options" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 33. User-agent options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field containing the user agent string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>target_field</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_agent</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field that will be filled with the user agent details.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>regex_file</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the file in the <code>config/ingest-user-agent</code> directory containing the regular expressions for parsing the user agent string. Both the directory and the file have to be created before starting OpenSearch. If not specified, ingest-user-agent will use the regexes.yaml from uap-core it ships with (see below).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">[<code>name</code>, <code>major</code>, <code>minor</code>, <code>patch</code>, <code>build</code>, <code>os</code>, <code>os_name</code>, <code>os_major</code>, <code>os_minor</code>, <code>device</code>]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controls what properties are added to <code>target_field</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ignore_missing</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code> and <code>field</code> does not exist, the processor quietly exits without modifying the document</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ecs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to return the output in Elastic Common Schema format. NOTE: This setting is deprecated and will be removed in a future version.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here is an example that adds the user agent details to the <code>user_agent</code> field based on the <code>agent</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _ingest/pipeline/user_agent
{
  "description" : "Add user agent information",
  "processors" : [
    {
      "user_agent" : {
        "field" : "agent"
      }
    }
  ]
}
PUT my-index-000001/_doc/my_id?pipeline=user_agent
{
  "agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36"
}
GET my-index-000001/_doc/my_id</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which returns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "found": true,
  "_index": "my-index-000001",
  "_type": "_doc",
  "_id": "my_id",
  "_version": 1,
  "_seq_no": 22,
  "_primary_term": 1,
  "_source": {
    "agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36",
    "user_agent": {
      "name": "Chrome",
      "original": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36",
      "version": "51.0.2704.103",
      "os": {
        "name": "Mac OS X",
        "version": "10.10.5",
        "full": "Mac OS X 10.10.5"
      },
      "device" : {
        "name" : "Mac"
      },
    }
  }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_using_a_custom_regex_file">Using a custom regex file</h5>
<div class="paragraph">
<p>To use a custom regex file for parsing the user agents, that file has to be put into the <code>config/ingest-user-agent</code> directory and
has to have a <code>.yml</code> filename extension. The file has to be present at node startup, any changes to it or any new files added
while the node is running will not have any effect.</p>
</div>
<div class="paragraph">
<p>In practice, it will make most sense for any custom regex file to be a variant of the default file, either a more recent version
or a customised version.</p>
</div>
<div class="paragraph">
<p>The default file included in <code>ingest-user-agent</code> is the <code>regexes.yaml</code> from uap-core: <a href="https://github.com/ua-parser/uap-core/blob/master/regexes.yaml" class="bare">https://github.com/ua-parser/uap-core/blob/master/regexes.yaml</a></p>
</div>
</div>
<div class="sect4">
<h5 id="ingest-user-agent-settings">Node Settings</h5>
<div class="paragraph">
<p>The <code>user_agent</code> processor supports the following setting:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ingest.user_agent.cache_size</code></dt>
<dd>
<p>The maximum number of results that should be cached. Defaults to <code>1000</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Note that these settings are node settings and apply to all <code>user_agent</code> processors, i.e. there is one cache for all defined <code>user_agent</code> processors.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>← Previous: <a href="handling-failure-in-pipelines.html">Handling Failures in Pipelines</a> | ↑ Up: <a href="ingest.html">Ingest node</a> | ⌂ Home: <a href="index.html">OpenSearch Reference</a> | Next: <a href="search-your-data.html">Search your data</a> →</p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-04-12 14:08:20 -0700
</div>
</div>
</body>
</html>