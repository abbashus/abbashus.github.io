<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.12">
<title>OpenSearch Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>.toc-current{font-weight: bold;} .toc-root{font-family: "Open Sans","DejaVu Sans",sans-serif;
                       font-size: 0.9em;} #content{display: flex; flex-direction: column; flex: 1 1 auto;}
             .nav-footer{text-align: center; margin-top: auto;}
             .nav-footer > p > a {white-space: nowrap;}</style>
</head>
<body id="indices" class="book toc2 toc-left">
<div id="header">
<h1>OpenSearch Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<p><span class="toc-root"><a href="index.html">OpenSearch Reference</a></span></p><ul class="sectlevel1">
<li><a href="opensearch-intro.html">What is OpenSearch?</a>
</li>
<li><a href="getting-started.html">Getting started with OpenSearch</a>
</li>
<li><a href="setup.html">Set up OpenSearch</a>
</li>
<li><a href="setup-upgrade.html">Upgrade OpenSearch</a>
</li>
<li><a href="index-modules.html">Index modules</a>
</li>
<li><a href="mapping.html">Mapping</a>
</li>
<li><a href="analysis.html">Text analysis</a>
</li>
<li><a href="index-templates.html">Index templates</a>
</li>
<li><a href="ingest.html">Ingest node</a>
</li>
<li><a href="search-your-data.html">Search your data</a>
</li>
<li><a href="query-dsl.html">Query DSL</a>
</li>
<li><a href="search-aggregations.html">Aggregations</a>
</li>
<li><a href="modules-scripting.html">Scripting</a>
</li>
<li><a href="high-availability.html">Set up a cluster for high availability</a>
</li>
<li><a href="snapshot-restore.html">Snapshot and restore</a>
</li>
<li><a href="commands.html">Command line tools</a>
</li>
<li><a href="how-to.html">How To</a>
</li>
<li><a href="glossary.html">Glossary of terms</a>
</li>
<li><a href="rest-apis.html">REST APIs</a>
<ul class="sectlevel1">
<li><a href="api-conventions.html">API conventions</a>
</li>
<li><a href="cat.html">Compact and aligned text (CAT) APIs</a>
</li>
<li><a href="cluster.html">Cluster APIs</a>
</li>
<li><a href="docs.html">Document APIs</a>
</li>
<li><a href="indices.html"><span class="toc-current">Index APIs</span></a>
<ul class="sectlevel2">
<li><a href="indices.html#indices-add-alias">Add index alias API</a>
</li>
<li><a href="indices.html#indices-analyze">Analyze API</a>
</li>
<li><a href="indices.html#indices-clearcache">Clear cache API</a>
</li>
<li><a href="indices.html#indices-clone-index">Clone index API</a>
</li>
<li><a href="indices.html#indices-close">Close index API</a>
</li>
<li><a href="indices.html#indices-create-index">Create index API</a>
</li>
<li><a href="indices.html#indices-delete-index">Delete index API</a>
</li>
<li><a href="indices.html#indices-delete-alias">Delete index alias API</a>
</li>
<li><a href="indices.html#indices-delete-component-template">Delete component template API</a>
</li>
<li><a href="indices.html#indices-delete-template">Delete index template API</a>
</li>
<li><a href="indices.html#indices-delete-template-v1">Delete index template API</a>
</li>
<li><a href="indices.html#indices-flush">Flush API</a>
</li>
<li><a href="indices.html#indices-forcemerge">Force merge API</a>
</li>
<li><a href="indices.html#getting-component-templates">Get component template API</a>
</li>
<li><a href="indices.html#indices-get-field-mapping">Get field mapping API</a>
</li>
<li><a href="indices.html#indices-get-index">Get index API</a>
</li>
<li><a href="indices.html#indices-get-alias">Get index alias API</a>
</li>
<li><a href="indices.html#indices-get-settings">Get index settings API</a>
</li>
<li><a href="indices.html#indices-get-template">Get index template API </a>
</li>
<li><a href="indices.html#indices-get-template-v1">Get index template API</a>
</li>
<li><a href="indices.html#indices-get-mapping">Get mapping API</a>
</li>
<li><a href="indices.html#indices-alias-exists">Index alias exists API</a>
</li>
<li><a href="indices.html#indices-exists">Index exists API</a>
</li>
<li><a href="indices.html#indices-recovery">Index recovery API</a>
</li>
<li><a href="indices.html#indices-segments">Index segments API</a>
</li>
<li><a href="indices.html#indices-shards-stores">Index shard stores API</a>
</li>
<li><a href="indices.html#indices-stats">Index stats API</a>
</li>
<li><a href="indices.html#indices-template-exists-v1">Index template exists API</a>
</li>
<li><a href="indices.html#indices-open-close">Open index API</a>
</li>
<li><a href="indices.html#indices-put-template">Put index template API</a>
</li>
<li><a href="indices.html#indices-templates-v1">Put index template API</a>
</li>
<li><a href="indices.html#indices-component-template">Put component template API</a>
</li>
<li><a href="indices.html#indices-put-mapping">Put mapping API</a>
</li>
<li><a href="indices.html#indices-refresh">Refresh API</a>
</li>
<li><a href="indices.html#indices-rollover-index">Rollover index API</a>
</li>
<li><a href="indices.html#indices-shrink-index">Shrink index API</a>
</li>
<li><a href="indices.html#indices-simulate-index">Simulate index API</a>
</li>
<li><a href="indices.html#indices-simulate-template">Simulate index template API</a>
</li>
<li><a href="indices.html#indices-split-index">Split index API</a>
</li>
<li><a href="indices.html#indices-types-exists">Type exists API</a>
</li>
<li><a href="indices.html#indices-aliases">Update index alias API</a>
</li>
<li><a href="indices.html#indices-update-settings">Update index settings API</a>
</li>
<li><a href="indices.html#indices-resolve-index-api">Resolve index API</a>
</li>
<li><a href="indices.html#dangling-indices-list">List dangling indices API</a>
</li>
<li><a href="indices.html#dangling-index-import">Import dangling index API</a>
</li>
<li><a href="indices.html#dangling-index-delete">Delete dangling index API</a>
</li>
</ul>
</li>
<li><a href="ingest-apis.html">Ingest APIs</a>
</li>
<li><a href="search.html">Search APIs</a>
</li>
</ul>
</li>
<li><a href="breaking-changes.html">Migration guide</a>
</li>
<li><a href="opensearch-release-notes.html">Release notes</a>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="indices">Index APIs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Index APIs are used to manage individual indices,
index settings, aliases, mappings, and index templates.</p>
</div>
<h3 id="index-management" class="discrete">Index management:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-create-index">Create index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-delete-index">Delete index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-index">Get index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-exists">Index exists API</a></p>
</li>
<li>
<p><a href="indices.html#indices-close">Close index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-open-close">Open index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-shrink-index">Shrink index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-split-index">Split index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-clone-index">Clone index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-rollover-index">Rollover index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-resolve-index-api">Resolve index API</a></p>
</li>
</ul>
</div>
<h3 id="mapping-management" class="discrete">Mapping management:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-put-mapping">Put mapping API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-mapping">Get mapping API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-field-mapping">Get field mapping API</a></p>
</li>
<li>
<p><a href="indices.html#indices-types-exists">Type exists API</a></p>
</li>
</ul>
</div>
<h3 id="alias-management" class="discrete">Alias management:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-add-alias">Add index alias API</a></p>
</li>
<li>
<p><a href="indices.html#indices-delete-alias">Delete index alias API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-alias">Get index alias API</a></p>
</li>
<li>
<p><a href="indices.html#indices-alias-exists">Index alias exists API</a></p>
</li>
<li>
<p><a href="indices.html#indices-aliases">Update index alias API</a></p>
</li>
</ul>
</div>
<h3 id="index-settings" class="discrete">Index settings:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-update-settings">Update index settings API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-settings">Get index settings API</a></p>
</li>
<li>
<p><a href="indices.html#indices-analyze">Analyze API</a></p>
</li>
</ul>
</div>
<h3 id="index-templates-apis" class="discrete">Index templates:</h3>
<div class="paragraph">
<p>Index templates automatically apply settings, mappings, and aliases to new indices.
They are most often used to configure rolling indices for time series data to
ensure that each new index has the same configuration as the previous one.
For more information, see <a href="index-templates.html">Index Templates</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-put-template">Put index template API</a></p>
</li>
<li>
<p><a href="indices.html#indices-get-template">Get index template API <a id="getting-templates"></a></a></p>
</li>
<li>
<p><a href="indices.html#indices-delete-template">Delete index template API</a></p>
</li>
<li>
<p><a href="indices.html#indices-component-template">Put component template API</a></p>
</li>
<li>
<p><a href="indices.html#getting-component-templates">Get component template API</a></p>
</li>
<li>
<p><a href="indices.html#indices-delete-component-template">Delete component template API</a></p>
</li>
<li>
<p><a href="indices.html#indices-simulate-index">Simulate index API</a></p>
</li>
<li>
<p><a href="indices.html#indices-simulate-template">Simulate index template API</a></p>
</li>
</ul>
</div>
<h3 id="monitoring" class="discrete">Monitoring:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-stats">Index stats API</a></p>
</li>
<li>
<p><a href="indices.html#indices-segments">Index segments API</a></p>
</li>
<li>
<p><a href="indices.html#indices-recovery">Index recovery API</a></p>
</li>
<li>
<p><a href="indices.html#indices-shards-stores">Index shard stores API</a></p>
</li>
</ul>
</div>
<h3 id="status-management" class="discrete">Status management:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#indices-clearcache">Clear cache API</a></p>
</li>
<li>
<p><a href="indices.html#indices-refresh">Refresh API</a></p>
</li>
<li>
<p><a href="indices.html#indices-flush">Flush API</a></p>
</li>
<li>
<p><a href="indices.html#indices-forcemerge">Force merge API</a></p>
</li>
</ul>
</div>
<h3 id="dangling-indices-api" class="discrete">Dangling indices:</h3>
<div class="ulist">
<ul>
<li>
<p><a href="indices.html#dangling-indices-list">List dangling indices API</a></p>
</li>
<li>
<p><a href="indices.html#dangling-index-import">Import dangling index API</a></p>
</li>
<li>
<p><a href="indices.html#dangling-index-delete">Delete dangling index API</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="indices-add-alias">Add index alias API</h3>
<titleabbrev>Add index alias</titleabbrev>
<div class="paragraph">
<p>Creates or updates an index alias.</p>
</div>
<div class="paragraph">
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
</div>
<div class="paragraph">
<p>Most OpenSearch APIs accept an index alias
in place of an index name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_alias/alias1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="add-alias-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="add-alias-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list or wildcard expression of index names
to add to the alias.</p>
<div class="paragraph">
<p>To add all indices in the cluster to the alias,
use a value of <code>_all</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;alias&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the index alias to create or update.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="add-alias-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="add-alias-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>filter</code></dt>
<dd>
<p>(Required, query object)
<a href="compound-queries.html#query-dsl-bool-query">Filter query</a>
used to limit the index alias.</p>
<div class="paragraph">
<p>If specified,
the index alias only applies to documents returned by the filter.
<a href="compound-queries.html#query-dsl-bool-query">Filter query</a>
used to limit the index alias.</p>
</div>
<div class="paragraph">
<p>If specified,
the index alias only applies to documents returned by the filter.</p>
</div>
</dd>
<dt class="hdlist1"><code>routing</code></dt>
<dd>
<p>(Optional, string)
Custom <a href="mapping-fields.html#mapping-routing-field">routing value</a>
used to route operations to a specific shard.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="add-alias-api-example">Examples</h4>
<div class="sect4">
<h5 id="alias-adding">Add a time-based alias</h5>
<div class="paragraph">
<p>The following request creates an alias, <code>2030</code>,
for the <code>logs_20302801</code> index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /logs_20302801/_alias/2030</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="add-alias-api-user-ex">Add a user-based alias</h5>
<div class="paragraph">
<p>First, create an index, <code>users</code>,
with a mapping for the <code>user_id</code> field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /users
{
  "mappings" : {
    "properties" : {
      "user_id" : {"type" : "integer"}
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then add the index alias for a specific user, <code>user_12</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /users/_alias/user_12
{
  "routing" : "12",
  "filter" : {
    "term" : {
      "user_id" : 12
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="alias-index-creation">Add an alias during index creation</h5>
<div class="paragraph">
<p>You can use the <a href="indices.html#create-index-aliases">create index API</a>
to add an index alias during index creation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /logs_20302801
{
  "mappings": {
    "properties": {
      "year": { "type": "integer" }
    }
  },
  "aliases": {
    "current_day": {},
    "2030": {
      "filter": {
        "term": { "year": 2030 }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-analyze">Analyze API</h3>
<titleabbrev>Analyze</titleabbrev>
<div class="paragraph">
<p>Performs <a href="analysis.html">analysis</a> on a text string
and returns the resulting tokens.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : "Quick Brown Foxes!"
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="analyze-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_analyze</code></p>
</div>
<div class="paragraph">
<p><code>POST /_analyze</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;index&gt;/_analyze</code></p>
</div>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_analyze</code></p>
</div>
</div>
<div class="sect3">
<h4 id="analyze-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Index used to derive the analyzer.</p>
</div>
<div class="paragraph">
<p>If specified,
the <code>analyzer</code> or <code>&lt;field&gt;</code> parameter overrides this value.</p>
</div>
<div class="paragraph">
<p>If no analyzer or field are specified,
the analyze API uses the default analyzer for the index.</p>
</div>
<div class="paragraph">
<p>If no index is specified
or the index does not have a default analyzer,
the analyze API uses the <a href="analysis-analyzers.html#analysis-standard-analyzer">standard analyzer</a>.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="analyze-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>analyzer</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
The name of the analyzer that should be applied to the provided <code>text</code>. This could be a
<a href="analysis-analyzers.html">built-in analyzer</a>, or an analyzer that&#8217;s been configured in the index.</p>
</div>
<div class="paragraph">
<p>If this parameter is not specified,
the analyze API uses the analyzer defined in the field&#8217;s mapping.</p>
</div>
<div class="paragraph">
<p>If no field is specified,
the analyze API uses the default analyzer for the index.</p>
</div>
<div class="paragraph">
<p>If no index is specified,
or the index does not have a default analyzer,
the analyze API uses the <a href="analysis-analyzers.html#analysis-standard-analyzer">standard analyzer</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>attributes</code></dt>
<dd>
<p>(Optional, array of strings)
Array of token attributes used to filter the output of the <code>explain</code> parameter.</p>
</dd>
<dt class="hdlist1"><code>char_filter</code></dt>
<dd>
<p>(Optional, array of strings)
Array of character filters used to preprocess characters before the tokenizer.
See <a href="analysis-charfilters.html">Character filters reference</a> for a list of character filters.</p>
</dd>
<dt class="hdlist1"><code>explain</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, the response includes token attributes and additional details.
Defaults to <code>false</code>.
experimental:[The format of the additional detail information is labelled as experimental in Lucene and it may change in the future.]</p>
</dd>
<dt class="hdlist1"><code>field</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Field used to derive the analyzer.
To use this parameter,
you must specify an index.</p>
</div>
<div class="paragraph">
<p>If specified,
the <code>analyzer</code> parameter overrides this value.</p>
</div>
<div class="paragraph">
<p>If no field is specified,
the analyze API uses the default analyzer for the index.</p>
</div>
<div class="paragraph">
<p>If no index is specified
or the index does not have a default analyzer,
the analyze API uses the <a href="analysis-analyzers.html#analysis-standard-analyzer">standard analyzer</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>filter</code></dt>
<dd>
<p>(Optional, Array of strings)
Array of token filters used to apply after the tokenizer.
See <a href="analysis-tokenfilters.html">Token filter reference</a> for a list of token filters.</p>
</dd>
<dt class="hdlist1"><code>normalizer</code></dt>
<dd>
<p>(Optional, string)
Normalizer to use to convert text into a single token.
See <a href="analysis-normalizers.html">Normalizers</a> for a list of normalizers.</p>
</dd>
<dt class="hdlist1"><code>text</code></dt>
<dd>
<p>(Required, string or array of strings)
Text to analyze.
If an array of strings is provided, it is analyzed as a multi-value field.</p>
</dd>
<dt class="hdlist1"><code>tokenizer</code></dt>
<dd>
<p>(Optional, string)
Tokenizer to use to convert text into tokens.
See <a href="analysis-tokenizers.html">Tokenizer reference</a> for a list of tokenizers.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="analyze-api-example">Examples</h4>
<div class="sect4">
<h5 id="analyze-api-no-index-ex">No index specified</h5>
<div class="paragraph">
<p>You can apply any of the built-in analyzers to the text string without
specifying an index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : "this is a test"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="analyze-api-text-array-ex">Array of text strings</h5>
<div class="paragraph">
<p>If the <code>text</code> parameter is provided as array of strings, it is analyzed as a multi-value field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "analyzer" : "standard",
  "text" : ["this is a test", "the second text"]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="analyze-api-custom-analyzer-ex">Custom analyzer</h5>
<div class="paragraph">
<p>You can use the analyze API to test a custom transient analyzer built from
tokenizers, token filters, and char filters. Token filters use the <code>filter</code>
parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "text" : "this is a test"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "tokenizer" : "keyword",
  "filter" : ["lowercase"],
  "char_filter" : ["html_strip"],
  "text" : "this is a &lt;b&gt;test&lt;/b&gt;"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Custom tokenizers, token filters, and character filters can be specified in the request body as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "tokenizer" : "whitespace",
  "filter" : ["lowercase", {"type": "stop", "stopwords": ["a", "is", "this"]}],
  "text" : "this is a test"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="analyze-api-specific-index-ex">Specific index</h5>
<div class="paragraph">
<p>You can also run the analyze API against a specific index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /analyze_sample/_analyze
{
  "text" : "this is a test"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above will run an analysis on the "this is a test" text, using the
default index analyzer associated with the <code>analyze_sample</code> index. An <code>analyzer</code>
can also be provided to use a different analyzer:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /analyze_sample/_analyze
{
  "analyzer" : "whitespace",
  "text" : "this is a test"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="analyze-api-field-ex">Derive analyzer from a field mapping</h5>
<div class="paragraph">
<p>The analyzer can be derived based on a field mapping, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /analyze_sample/_analyze
{
  "field" : "obj1.field1",
  "text" : "this is a test"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Will cause the analysis to happen based on the analyzer configured in the
mapping for <code>obj1.field1</code> (and if not, the default index analyzer).</p>
</div>
</div>
<div class="sect4">
<h5 id="analyze-api-normalizer-ex">Normalizer</h5>
<div class="paragraph">
<p>A <code>normalizer</code> can be provided for keyword field with normalizer associated with the <code>analyze_sample</code> index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /analyze_sample/_analyze
{
  "normalizer" : "my_normalizer",
  "text" : "BaR"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or by building a custom transient normalizer out of token filters and char filters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "filter" : ["lowercase"],
  "text" : "BaR"
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="explain-analyze-api">Explain analyze</h5>
<div class="paragraph">
<p>If you want to get more advanced details, set <code>explain</code> to <code>true</code> (defaults to <code>false</code>). It will output all token attributes for each token.
You can filter token attributes you want to output by setting <code>attributes</code> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The format of the additional detail information is labelled as experimental in Lucene and it may change in the future.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_analyze
{
  "tokenizer" : "standard",
  "filter" : ["snowball"],
  "text" : "detailed output",
  "explain" : true,
  "attributes" : ["keyword"] <b class="conum">(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set "keyword" to output "keyword" attribute only</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The request returns the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "detail" : {
    "custom_analyzer" : true,
    "charfilters" : [ ],
    "tokenizer" : {
      "name" : "standard",
      "tokens" : [ {
        "token" : "detailed",
        "start_offset" : 0,
        "end_offset" : 8,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 0
      }, {
        "token" : "output",
        "start_offset" : 9,
        "end_offset" : 15,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 1
      } ]
    },
    "tokenfilters" : [ {
      "name" : "snowball",
      "tokens" : [ {
        "token" : "detail",
        "start_offset" : 0,
        "end_offset" : 8,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 0,
        "keyword" : false <b class="conum">(1)</b>
      }, {
        "token" : "output",
        "start_offset" : 9,
        "end_offset" : 15,
        "type" : "&lt;ALPHANUM&gt;",
        "position" : 1,
        "keyword" : false <b class="conum">(1)</b>
      } ]
    } ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Output only "keyword" attribute, since specify "attributes" in the request.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="tokens-limit-settings">Setting a token limit</h5>
<div class="paragraph">
<p>Generating excessive amount of tokens may cause a node to run out of memory.
The following setting allows to limit the number of tokens that can be produced:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>index.analyze.max_token_count</code></dt>
<dd>
<p>The maximum number of tokens that can be produced using <code>_analyze</code> API.
The default value is <code>10000</code>. If more than this limit of tokens gets
generated, an error will be thrown. The <code>_analyze</code> endpoint without a specified
index will always use <code>10000</code> value as a limit. This setting allows you to control
the limit for a specific index:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /analyze_sample
{
  "settings" : {
    "index.analyze.max_token_count" : 20000
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /analyze_sample/_analyze
{
  "text" : "this is a test"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-clearcache">Clear cache API</h3>
<titleabbrev>Clear cache</titleabbrev>
<div class="paragraph">
<p>Clears the caches of one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_cache/clear</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="clear-cache-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;target&gt;/_cache/clear</code></p>
</div>
<div class="paragraph">
<p><code>POST /_cache/clear</code></p>
</div>
</div>
<div class="sect3">
<h4 id="clear-cache-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="clear-cache-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>fielddata</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, Boolean)
If <code>true</code>,
clears the fields cache.</p>
</div>
<div class="paragraph">
<p>Use the <code>fields</code> parameter
to clear the cache of specific fields only.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>fields</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Comma-separated list of field names
used to limit the <code>fielddata</code> parameter.</p>
</div>
<div class="paragraph">
<p>Defaults to all fields.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This parameter does <strong>not</strong> support objects
or field aliases.
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>index</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of index names
used to limit the request.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>query</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
clears the query cache.</p>
</dd>
<dt class="hdlist1"><code>request</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
clears the request cache.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="clear-cache-api-example">Examples</h4>
<div class="sect4">
<h5 id="clear-cache-api-specific-ex">Clear a specific cache</h5>
<div class="paragraph">
<p>By default,
the clear cache API clears all caches.
You can clear only specific caches
by setting the following query parameters to <code>true</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fielddata</code></p>
</li>
<li>
<p><code>query</code></p>
</li>
<li>
<p><code>request</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_cache/clear?fielddata=true  <b class="conum">(1)</b>
POST /my-index-000001/_cache/clear?query=true      <b class="conum">(2)</b>
POST /my-index-000001/_cache/clear?request=true    <b class="conum">(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Clears only the fields cache</p>
</li>
<li>
<p>Clears only the query cache</p>
</li>
<li>
<p>Clears only the request cache</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="clear-cache-api-specific-fields-ex">Clear the cache of specific fields</h5>
<div class="paragraph">
<p>To only clear the cache of specific fields,
use the <code>fields</code> query parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_cache/clear?fields=foo,bar   <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Clear the cache for the <code>foo</code> and <code>bar</code> field</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="clear-cache-api-multi-ex">Clear caches for several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001,my-index-000002/_cache/clear</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="clear-cache-api-all-ex">Clear caches for all indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_cache/clear</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-clone-index">Clone index API</h3>
<titleabbrev>Clone index</titleabbrev>
<div class="paragraph">
<p>Clones an existing index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_clone/cloned-my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_clone/&lt;target-index&gt;</code></p>
</div>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;/_clone/&lt;target-index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-prereqs">Prerequisites</h4>
<div class="paragraph">
<p>To clone an index,
the index must be marked as read-only
and have a <a href="cluster.html#cluster-health">cluster health</a> status of <code>green</code>.</p>
</div>
<div class="paragraph">
<p>For example,
the following request prevents write operations on <code>my_source_index</code>
so it can be cloned.
Metadata changes like deleting the index are still allowed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-desc">Description</h4>
<div class="paragraph">
<p>Use the clone index API
to clone an existing index into a new index,
where each original primary shard is cloned
into a new primary shard in the new index.</p>
</div>
<div class="sect4">
<h5 id="cloning-works">How cloning works</h5>
<div class="paragraph">
<p>Cloning works as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First, it creates a new target index with the same definition as the source
index.</p>
</li>
<li>
<p>Then it hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process.)</p>
</li>
<li>
<p>Finally, it recovers the target index as though it were a closed index which
had just been re-opened.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="clone-index">Clone an index</h5>
<div class="paragraph">
<p>To clone <code>my_source_index</code> into a new index called <code>my_target_index</code>, issue
the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_clone/my_target_index</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the clone operation to start.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Indices can only be cloned if they meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The target index must not exist.</p>
</li>
<li>
<p>The source index must have the same number of primary shards as the target index.</p>
</li>
<li>
<p>The node handling the clone process must have sufficient free disk space to
accommodate a second copy of the existing index.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>_clone</code> API is similar to the <a href="indices.html#indices-create-index"><code>create index</code> API</a>
and accepts <code>settings</code> and <code>aliases</code> parameters for the target index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_clone/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 <b class="conum">(1)</b>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The number of shards in the target index. This must be equal to the
number of shards in the source index.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Mappings may not be specified in the <code>_clone</code> request. The mappings of
the source index will be used for the target index.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="monitor-cloning">Monitor the cloning process</h5>
<div class="paragraph">
<p>The cloning process can be monitored with the <a href="cat.html#cat-recovery"><code>_cat recovery</code>
API</a>, or the <a href="cluster.html#cluster-health"><code>cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code>wait_for_status</code>
parameter to <code>yellow</code>.</p>
</div>
<div class="paragraph">
<p>The <code>_clone</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code>unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated, its primary shard will remain <code>unassigned</code> until it
can be allocated on that node.</p>
</div>
<div class="paragraph">
<p>Once the primary shard is allocated, it moves to state <code>initializing</code>, and the
clone process begins. When the clone operation completes, the shard will
become <code>active</code>. At that  point, OpenSearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>
</div>
<div class="sect4">
<h5 id="clone-wait-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>Because the clone operation creates a new index to clone the shards to,
the <a href="indices.html#create-index-wait-for-active-shards">wait for active shards</a> setting
on index creation applies to the clone index action as well.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the source index to clone.</p>
</dd>
<dt class="hdlist1"><code>&lt;target-index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, string)
Name of the target index to create.</p>
</div>
<div class="paragraph">
<p>Index names must meet the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase only</p>
</li>
<li>
<p>Cannot include <code>\</code>, <code>/</code>, <code>*</code>, <code>?</code>, <code>"</code>, <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, ` ` (space character), <code>,</code>, <code>#</code></p>
</li>
<li>
<p>Indices prior to 7.0 could contain a colon (<code>:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+</p>
</li>
<li>
<p>Cannot start with <code>-</code>, <code>_</code>, <code>+</code></p>
</li>
<li>
<p>Cannot be <code>.</code> or <code>..</code></p>
</li>
<li>
<p>Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)</p>
</li>
<li>
<p>Names starting with <code>.</code> are deprecated, except for <a href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="clone-index-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>)
Index aliases which include the target index.
See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>)
Configuration options for the target index.
See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-close">Close index API</h3>
<titleabbrev>Close index</titleabbrev>
<div class="paragraph">
<p>Closes an index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_close</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="close-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_close</code></p>
</div>
</div>
<div class="sect3">
<h4 id="close-index-api-desc">Description</h4>
<div class="paragraph">
<p>You use the close index API to close open indices.</p>
</div>
<div class="paragraph">
<p>A closed index is blocked for read/write operations and does not allow
all operations that opened indices allow. It is not possible to index
documents or to search for documents in a closed index. This allows
closed indices to not have to maintain internal data structures for
indexing or searching documents, resulting in a smaller overhead on
the cluster.</p>
</div>
<div class="paragraph">
<p>When opening or closing an index, the master is responsible for
restarting the index shards to reflect the new state of the index.
The shards will then go through the normal recovery process. The
data of opened/closed indices is automatically replicated by the
cluster to ensure that enough shard copies are safely kept around
at all times.</p>
</div>
<div class="paragraph">
<p>You can open and close multiple indices. An error is thrown
if the request explicitly refers to a missing index. This behaviour can be
disabled using the <code>ignore_unavailable=true</code> parameter.</p>
</div>
<div class="paragraph">
<p>All indices can be opened or closed at once using <code>_all</code> as the index name
or specifying patterns that identify them all (e.g. <code>*</code>).</p>
</div>
<div class="paragraph">
<p>Identifying indices via wildcards or <code>_all</code> can be disabled by setting the
<code>action.destructive_requires_name</code> flag in the config file to <code>true</code>.
This setting can also be changed via the cluster update settings api.</p>
</div>
<div class="paragraph">
<p>Closed indices consume a significant amount of disk-space which can cause
problems in managed environments. Closing indices can be disabled via the cluster settings
API by setting <code>cluster.indices.close.enable</code> to <code>false</code>. The default is <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="close-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
<div class="paragraph">
<p>To close all indices, use <code>_all</code> or <code>*</code>.
To disallow the closing of indices with <code>_all</code> or wildcard expressions,
change the <code>action.destructive_requires_name</code> cluster setting to <code>true</code>.
You can update this setting in the <code>opensearch.yml</code> file
or using the <a href="cluster.html#cluster-update-settings">cluster update settings</a> API.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="close-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="close-index-api-example">Examples</h4>
<div class="paragraph">
<p>The following example shows how to close an index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_close</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "indices": {
    "my-index-000001": {
      "closed": true
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-create-index">Create index API</h3>
<titleabbrev>Create index</titleabbrev>
<div class="paragraph">
<p>Creates a new index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-desc">Description</h4>
<div class="paragraph">
<p>You can use the create index API to add a new index to an OpenSearch cluster. When
creating an index, you can specify the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Settings for the index</p>
</li>
<li>
<p>Mappings for fields in the index</p>
</li>
<li>
<p>Index aliases</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, string) Name of the index you wish to create.</p>
</div>
<div class="paragraph">
<p>Index names must meet the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase only</p>
</li>
<li>
<p>Cannot include <code>\</code>, <code>/</code>, <code>*</code>, <code>?</code>, <code>"</code>, <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, ` ` (space character), <code>,</code>, <code>#</code></p>
</li>
<li>
<p>Indices prior to 7.0 could contain a colon (<code>:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+</p>
</li>
<li>
<p>Cannot start with <code>-</code>, <code>_</code>, <code>+</code></p>
</li>
<li>
<p>Cannot be <code>.</code> or <code>..</code></p>
</li>
<li>
<p>Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)</p>
</li>
<li>
<p>Names starting with <code>.</code> are deprecated, except for <a href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-create-api-example">Examples</h4>
<div class="sect4">
<h5 id="create-index-settings">Index settings</h5>
<div class="paragraph">
<p>Each index created can have specific settings
associated with it, defined in the body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "settings": {
    "index": {
      "number_of_shards": 3,  <b class="conum">(1)</b>
      "number_of_replicas": 2 <b class="conum">(2)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Default for <code>number_of_shards</code> is 1</p>
</li>
<li>
<p>Default for <code>number_of_replicas</code> is 1 (ie one replica for each primary shard)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>or more simplified</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas": 2
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You do not have to explicitly specify <code>index</code> section inside the
<code>settings</code> section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For more information regarding all the different index level settings
that can be set when creating an index, please check the
<a href="index-modules.html">index modules</a> section.</p>
</div>
</div>
<div class="sect4">
<h5 id="mappings">Mappings</h5>
<div class="paragraph">
<p>The create index API allows for providing a mapping definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /test
{
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "properties": {
      "field1": { "type": "text" }
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Before 7.0.0, the 'mappings' definition used to include a type name. Although specifying
types in requests is now deprecated, a type can still be provided if the request parameter
include_type_name is set.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="create-index-aliases">Aliases</h5>
<div class="paragraph">
<p>The create index API allows also to provide a set of <a href="indices.html#indices-aliases">aliases</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /test
{
  "aliases": {
    "alias_1": {},
    "alias_2": {
      "filter": {
        "term": { "user.id": "bilbo" }
      },
      "routing": "shard-1"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="create-index-wait-for-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>By default, index creation will only return a response to the client when the primary copies of
each shard have been started, or the request times out. The index creation response will indicate
what happened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "index": "test"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>acknowledged</code> indicates whether the index was successfully created in the cluster, while
<code>shards_acknowledged</code> indicates whether the requisite number of shard copies were started for
each shard in the index before timing out. Note that it is still possible for either
<code>acknowledged</code> or <code>shards_acknowledged</code> to be <code>false</code>, but the index creation was successful.
These values simply indicate whether the operation completed before the timeout. If
<code>acknowledged</code> is <code>false</code>, then we timed out before the cluster state was updated with the
newly created index, but it probably will be created sometime soon. If <code>shards_acknowledged</code>
is <code>false</code>, then we timed out before the requisite number of shards were started (by default
just the primaries), even if the cluster state was successfully updated to reflect the newly
created index (i.e. <code>acknowledged=true</code>).</p>
</div>
<div class="paragraph">
<p>We can change the default of only waiting for the primary shards to start through the index
setting <code>index.write.wait_for_active_shards</code> (note that changing this setting will also affect
the <code>wait_for_active_shards</code> value on all subsequent write operations):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /test
{
  "settings": {
    "index.write.wait_for_active_shards": "2"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or through the request parameter <code>wait_for_active_shards</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /test?wait_for_active_shards=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>A detailed explanation of <code>wait_for_active_shards</code> and its possible values can be found
<a href="docs.html#index-wait-for-active-shards">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-delete-index">Delete index API</h3>
<titleabbrev>Delete index</titleabbrev>
<div class="paragraph">
<p>Deletes an existing index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE /my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="delete-index-api-request">Request</h4>
<div class="paragraph">
<p><code>DELETE /&lt;index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="delete-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Request, string) Comma-separated list or wildcard expression of indices to
delete.</p>
</div>
<div class="paragraph">
<p>In this parameter, wildcard expressions match only open, concrete indices. You
cannot delete an index using an <a href="indices.html#indices-aliases">alias</a>.</p>
</div>
<div class="paragraph">
<p>To delete all indices, use <code>_all</code> or <code>*</code> . To disallow the deletion of indices
with <code>_all</code> or wildcard expressions, change the
<code>action.destructive_requires_name</code> cluster setting to <code>true</code>. You can update
this setting in the <code>opensearch.yml</code> file or using the
<a href="cluster.html#cluster-update-settings">cluster update settings</a> API.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="delete-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-delete-alias">Delete index alias API</h3>
<titleabbrev>Delete index alias</titleabbrev>
<div class="paragraph">
<p>Deletes an existing index alias.</p>
</div>
<div class="paragraph">
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
</div>
<div class="paragraph">
<p>Most OpenSearch APIs accept an index alias
in place of an index name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE /my-index-000001/_alias/alias1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="delete-alias-api-request">Request</h4>
<div class="paragraph">
<p><code>DELETE /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>DELETE /&lt;index&gt;/_aliases/&lt;alias&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="delete-alias-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list or wildcard expression of index names
used to limit the request.</p>
<div class="paragraph">
<p>To include all indices in the cluster,
use a value of <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;alias&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.</p>
<div class="paragraph">
<p>To delete all aliases,
use a value of <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="delete-alias-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-delete-component-template">Delete component template API</h3>
<titleabbrev>Delete component template</titleabbrev>
<div class="paragraph">
<p>Deletes an existing component template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE _component_template/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="delete-component-template-api-request">Request</h4>
<div class="paragraph">
<p><code>DELETE /_component_template/&lt;component-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="delete-component-template-api-desc">Description</h4>
<div class="paragraph">
<p>Use the delete component template API to delete one or more component templates
Component templates are building blocks for constructing <a href="index-templates.html">index templates</a>
that specify index mappings, settings, and aliases.</p>
</div>
</div>
<div class="sect3">
<h4 id="delete-component-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;component-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list or wildcard expression of component template names
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="delete-component-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-delete-template">Delete index template API</h3>
<titleabbrev>Delete index template</titleabbrev>
<div class="paragraph">
<p>Deletes an <a href="index-templates.html">index template</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE /_index_template/my-index-template</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-request">Request</h4>
<div class="paragraph">
<p><code>DELETE /_index_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-desc">Description</h4>
<div class="paragraph">
<p>Use the delete index template API to delete one or more index templates.
Index templates define <a href="index-modules.html#index-modules-settings">settings</a>, <a href="mapping.html">mappings</a>,
and <a href="indices.html#indices-aliases">aliases</a> that can be applied automatically to new indices.</p>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code>*</code>) expressions are supported.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-delete-template-v1">Delete index template API</h3>
<titleabbrev>Delete index template (legacy)</titleabbrev>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This documentation is about <a href="indices.html#indices-templates-v1">legacy index
templates</a>, which are deprecated and will be replaced by the composable
templates introduced in OpenSearch 7.8. For information about composable templates,
see <a href="index-templates.html">Index templates</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Deletes a legacy index template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE /_template/my-legacy-index-template</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-v1-request">Request</h4>
<div class="paragraph">
<p><code>DELETE /_template/&lt;legacy-index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-v1-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;legacy-index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of legacy index templates to delete. Wildcard (<code>*</code>)
expressions are supported.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="delete-template-api-v1-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-flush">Flush API</h3>
<titleabbrev>Flush</titleabbrev>
<div class="paragraph">
<p>Flushes one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_flush</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="flush-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;target&gt;/_flush</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_flush</code></p>
</div>
<div class="paragraph">
<p><code>POST /_flush</code></p>
</div>
<div class="paragraph">
<p><code>GET /_flush</code></p>
</div>
</div>
<div class="sect3">
<h4 id="flush-api-desc">Description</h4>
<div class="paragraph">
<p>Flushing an index is the process of making sure that any data that is currently
only stored in the <a href="index-modules-translog.html">transaction log</a> is also
permanently stored in the Lucene index. When restarting, OpenSearch replays any
unflushed operations from the transaction log into the Lucene index to bring it
back into the state that it was in before the restart. OpenSearch automatically
triggers flushes as needed, using heuristics that trade off the size of the
unflushed transaction log against the cost of performing each flush.</p>
</div>
<div class="paragraph">
<p>Once each operation has been flushed it is permanently stored in the Lucene
index. This may mean that there is no need to maintain an additional copy of it
in the transaction log, unless <a href="#index-modules-translog-retention">it is retained
for some other reason</a>. The transaction log is made up of multiple files,
called <em>generations</em>, and OpenSearch will delete any generation files once they are no
longer needed, freeing up disk space.</p>
</div>
<div class="paragraph">
<p>It is also possible to trigger a flush on one or more indices using the flush
API, although it is rare for users to need to call this API directly. If you
call the flush API after indexing some documents then a successful response
indicates that OpenSearch has flushed all the documents that were indexed before the
flush API was called.</p>
</div>
</div>
<div class="sect3">
<h4 id="flush-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases to flush.
Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To flush all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="flush-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>force</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, Boolean)
If <code>true</code>,
the request forces a flush
even if there are no changes to commit to the index.
Defaults to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>You can use this parameter
to increment the generation number of the transaction log.</p>
</div>
<div class="paragraph">
<p>This parameter is considered internal.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>wait_if_ongoing</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, Boolean)
If <code>true</code>,
the flush operation blocks until execution
when another flush operation is running.</p>
</div>
<div class="paragraph">
<p>If <code>false</code>,
OpenSearch returns an error
if you request a flush
when another flush operation is running.</p>
</div>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="flush-api-example">Examples</h4>
<div class="sect4">
<h5 id="flush-api-specific-ex">Flush a specific index</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_flush</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="flush-multi-index">Flush several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001,my-index-000002/_flush</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="flush-api-all-ex">Flush all indices in a cluster</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_flush</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-forcemerge">Force merge API</h3>
<titleabbrev>Force merge</titleabbrev>
<div class="paragraph">
<p>Forces a <a href="index-modules-merge.html">merge</a> on the shards of one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_forcemerge</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="forcemerge-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;target&gt;/_forcemerge</code></p>
</div>
<div class="paragraph">
<p><code>POST /_forcemerge</code></p>
</div>
</div>
<div class="sect3">
<h4 id="forcemerge-api-desc">Description</h4>
<div class="paragraph">
<p>Use the force merge API to force a <a href="index-modules-merge.html">merge</a> on the
shards of one or more indices. Merging reduces the number of segments in each
shard by merging some of them together, and also frees up the space used by
deleted documents. Merging normally happens automatically, but sometimes it is
useful to trigger a merge manually.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<strong>Force merge should only be called against an index after you have
finished writing to it.</strong> Force merge can cause very large (&gt;5GB) segments to
be produced, and if you continue to write to such an index then the automatic
merge policy will never consider these segments for future merges until they
mostly consist of deleted documents. This can cause very large segments to
remain in the index which can result in increased disk usage and worse search
performance.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="forcemerge-blocks">Blocks during a force merge</h5>
<div class="paragraph">
<p>Calls to this API block until the merge is complete. If the client connection
is lost before completion then the force merge process will continue in the
background. Any new requests to force merge the same indices will also block
until the ongoing force merge is complete.</p>
</div>
</div>
<div class="sect4">
<h5 id="forcemerge-multi-index">Force merging multiple indices</h5>
<div class="paragraph">
<p>You can force merge multiple indices with a single request by targeting:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Multiple indices</p>
</li>
<li>
<p>One or more index aliases that point to multiple indices</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Multi-index operations are executed one shard at a
time per node. Force merge makes the storage for the shard being merged
temporarily increase, up to double its size in case <code>max_num_segments</code> parameter
is set to <code>1</code>, as all segments need to be rewritten into a new one.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="forcemerge-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="forcemerge-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>flush</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
OpenSearch performs a <a href="indices.html#indices-flush">flush</a> on the indices
after the force merge.
Defaults to <code>true</code>.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>max_num_segments</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, integer)
The number of segments to merge to.
To fully merge indices,
set it to <code>1</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to checking if a merge needs to execute.
If so, executes it.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>only_expunge_deletes</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, Boolean)
If <code>true</code>,
only expunge segments containing document deletions.
Defaults to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>In Lucene,
a document is not deleted from a segment;
just marked as deleted.
During a merge,
a new segment is created
that does not contain those document deletions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This parameter does <strong>not</strong> override the
<code>index.merge.policy.expunge_deletes_allowed</code> setting.
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="forcemerge-api-example">Examples</h4>
<div class="sect4">
<h5 id="forcemerge-api-specific-ex">Force merge a specific index</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_forcemerge</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="forcemerge-api-multiple-ex">Force merge several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001,my-index-000002/_forcemerge</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="forcemerge-api-all-ex">Force merge all indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_forcemerge</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="forcemerge-api-time-based-index-ex">Time-based indices</h5>
<div class="paragraph">
<p>Force-merging is useful for managing
time-based indices, particularly after a
<a href="indices.html#indices-rollover-index">rollover</a>.
In these cases,
each index only receives indexing traffic for a certain period of time.
Once an index receive no more writes,
its shards can be force-merged to a single segment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /.ds-logs-000001/_forcemerge?max_num_segments=1</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be a good idea because single-segment shards can sometimes use simpler
and more efficient data structures to perform searches.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getting-component-templates">Get component template API</h3>
<titleabbrev>Get component template</titleabbrev>
<div class="paragraph">
<p>Retrieves information about one or more component templates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_component_template/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-component-template-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_component-template/&lt;component-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-component-template-api-path-params">Path parameters</h4>
<div class="paragraph">
<p><code>&lt;component-template&gt;</code>
(Optional, string)
Comma-separated list of component template names used to limit the request.
Wildcard (<code>*</code>) expressions are supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="get-component-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-component-template-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-component-template-api-wildcard-ex">Get component templates using a wildcard expression</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_component_template/temp*</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-component-template-api-all-ex">Get all component templates</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_component_template</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-field-mapping">Get field mapping API</h3>
<titleabbrev>Get field mapping</titleabbrev>
<div class="paragraph">
<p>Retrieves <a href="mapping.html">mapping definitions</a> for one or more fields. For data
streams, the API retrieves field mappings for the stream&#8217;s backing indices.</p>
</div>
<div class="paragraph">
<p>This API is useful if you don&#8217;t need a <a href="indices.html#indices-get-mapping">complete mapping</a>
or if an index mapping contains a large number of fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_mapping/field/user</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-field-mapping-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_mapping/field/&lt;field&gt;</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_mapping/field/&lt;field&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-field-mapping-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard (<code>*</code>) expressions are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;field&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of fields used to
limit returned information.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-field-mapping-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_defaults</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the response includes default mapping values.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, boolean) Deprecated. If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-field-mapping-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-field-mapping-api-basic-ex">Example with index setup</h5>
<div class="paragraph">
<p>You can provide field mappings when creating a new index. The following
<a href="indices.html#indices-create-index">create index</a> API request creates the <code>publications</code>
index with several field mappings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /publications
{
  "mappings": {
    "properties": {
      "id": { "type": "text" },
      "title": { "type": "text" },
      "abstract": { "type": "text" },
      "author": {
        "properties": {
          "id": { "type": "text" },
          "name": { "type": "text" }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following returns the mapping of the field <code>title</code> only:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET publications/_mapping/field/title</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
   "publications": {
      "mappings": {
          "title": {
             "full_name": "title",
             "mapping": {
                "title": {
                   "type": "text"
                }
             }
          }
       }
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-field-mapping-api-specific-fields-ex">Specifying fields</h5>
<div class="paragraph">
<p>The get mapping API allows you to specify a comma-separated list of fields.</p>
</div>
<div class="paragraph">
<p>For instance to select the <code>id</code> of the <code>author</code> field, you must use its full name <code>author.id</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET publications/_mapping/field/author.id,abstract,name</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
   "publications": {
      "mappings": {
        "author.id": {
           "full_name": "author.id",
           "mapping": {
              "id": {
                 "type": "text"
              }
           }
        },
        "abstract": {
           "full_name": "abstract",
           "mapping": {
              "abstract": {
                 "type": "text"
              }
           }
        }
     }
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The get field mapping API also supports wildcard notation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET publications/_mapping/field/a*</code></pre>
</div>
</div>
<div class="paragraph">
<p>returns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
   "publications": {
      "mappings": {
         "author.name": {
            "full_name": "author.name",
            "mapping": {
               "name": {
                 "type": "text"
               }
            }
         },
         "abstract": {
            "full_name": "abstract",
            "mapping": {
               "abstract": {
                  "type": "text"
               }
            }
         },
         "author.id": {
            "full_name": "author.id",
            "mapping": {
               "id": {
                  "type": "text"
               }
            }
         }
      }
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-field-mapping-api-multi-index-ex">Multiple targets and fields</h5>
<div class="paragraph">
<p>The get field mapping API can be used to get mappings for multiple fields from
multiple indices with a single request.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;target&gt;</code> and <code>&lt;field&gt;</code> request path parameters both support
comma-separated lists and wildcard expressions.</p>
</div>
<div class="paragraph">
<p>You can omit the <code>&lt;target&gt;</code> parameter or use a value of <code>*</code> or <code>_all</code> to target
all indices in a cluster.</p>
</div>
<div class="paragraph">
<p>Similarly, you can omit the <code>&lt;field&gt;</code> parameter or use a value of <code>*</code> to
retrieve mappings for all fields in the targeted indices.
However, the <code>&lt;field&gt;</code> parameter does not support the <code>_all</code> value.</p>
</div>
<div class="paragraph">
<p>For example, the following request retrieves mappings for the <code>message</code> field in
any index named <code>my-index-000001</code> or <code>my-index-000002</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001,my-index-000002/_mapping/field/message</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following request retrieves mappings for the <code>message</code> and <code>user.id</code> fields
in any index in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_all/_mapping/field/message</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following request retrieves mappings for fields with an <code>id</code> property in any
index in the cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_all/_mapping/field/*.id</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-index">Get index API</h3>
<titleabbrev>Get index</titleabbrev>
<div class="paragraph">
<p>Returns information about one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-index-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_defaults</code></dt>
<dd>
<p>(Optional, string) If <code>true</code>, return all default settings in the response.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, requests that target a missing index return an error. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-alias">Get index alias API</h3>
<titleabbrev>Get index alias</titleabbrev>
<div class="paragraph">
<p>Returns information about one or more index aliases.</p>
</div>
<div class="paragraph">
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
</div>
<div class="paragraph">
<p>Most OpenSearch APIs accept an index alias
in place of an index name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_alias/alias1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-alias-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_alias</code></p>
</div>
<div class="paragraph">
<p><code>GET /_alias/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-alias-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;alias&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.</p>
<div class="paragraph">
<p>To retrieve information for all index aliases,
use a value of <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-alias-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>all</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, requests that include a missing index in the <code>&lt;index&gt;</code> argument
return an error. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-alias-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-alias-api-all-ex">Get all aliases for an index</h5>
<div class="paragraph">
<p>You can add index aliases during index creation
using a <a href="indices.html#indices-create-index">create index API</a> request.</p>
</div>
<div class="paragraph">
<p>The following create index API request creates the <code>logs_20302801</code> index
with two aliases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>current_day</code></p>
</li>
<li>
<p><code>2030</code>, which only returns documents
in the <code>logs_20302801</code> index
with a <code>year</code> field value of <code>2030</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /logs_20302801
{
  "aliases" : {
    "current_day" : {},
    "2030" : {
      "filter" : {
          "term" : {"year" : 2030 }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following get index alias API request returns all aliases
for the index <code>logs_20302801</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /logs_20302801/_alias/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
 "logs_20302801" : {
   "aliases" : {
    "current_day" : {
    },
     "2030" : {
       "filter" : {
         "term" : {
           "year" : 2030
         }
       }
     }
   }
 }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-alias-api-named-ex">Get a specific alias</h5>
<div class="paragraph">
<p>The following index alias API request returns the <code>2030</code> alias:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_alias/2030</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "logs_20302801" : {
    "aliases" : {
      "2030" : {
        "filter" : {
          "term" : {
            "year" : 2030
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-alias-api-wildcard-ex">Get aliases based on a wildcard</h5>
<div class="paragraph">
<p>The following index alias API request returns any alias that begin with <code>20</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_alias/20*</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "logs_20302801" : {
    "aliases" : {
      "2030" : {
        "filter" : {
          "term" : {
            "year" : 2030
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-settings">Get index settings API</h3>
<titleabbrev>Get index settings</titleabbrev>
<div class="paragraph">
<p>Returns setting information for one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_settings</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-index-settings-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_settings</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_settings/&lt;setting&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-index-settings-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;setting&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of setting names
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-index-settings-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>all</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_defaults</code></dt>
<dd>
<p>(Optional, string) If <code>true</code>, return all default settings in the response.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-index-settings-api-example">Examples</h4>
<div class="sect4">
<h5 id="_multiple_indices">Multiple indices</h5>
<div class="paragraph">
<p>The get settings API can be used to get settings for more than one index with a
single call. To get settings for all indices in a cluster, you can use <code>_all</code> or <code>*</code> for <code>&lt;target&gt;</code>.
Wildcard expressions are also supported. The following are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001,my-index-000002/_settings

GET /_all/_settings

GET /log_2099_*/_settings</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_filtering_settings_by_name">Filtering settings by name</h5>
<div class="paragraph">
<p>The settings that are returned can be filtered with wildcard matching
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /log_2099_-*/_settings/index.number_*</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-template">Get index template API <a id="getting-templates"></a></h3>
<titleabbrev>Get index template</titleabbrev>
<div class="paragraph">
<p>Returns information about one or more index templates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_index_template/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-template-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_index_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code>*</code>) expressions are supported.</p>
<div class="paragraph">
<p>To retrieve all index templates, omit this parameter or use a value of <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-template-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-template-api-wildcard-ex">Get index templates using a wildcard expression</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_index_template/temp*</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-template-api-all-ex">Get all index templates</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_index_template</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-template-v1">Get index template API</h3>
<titleabbrev>Get index template (legacy)</titleabbrev>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This documentation is about legacy index templates,
which are deprecated and will be replaced by the composable templates introduced in OpenSearch 7.8.
For information about composable templates, see <a href="index-templates.html">Index templates</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Retrieves information about one or more index templates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_template/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-template-v1-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-template-v1-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code>*</code>) expressions are supported.</p>
<div class="paragraph">
<p>To return all index templates, omit this parameter
or use a value of <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-template-v1-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-template-v1-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-template-v1-api-multiple-ex">Get multiple index templates</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_template/template_1,template_2</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-template-v1-api-wildcard-ex">Get index templates using a wildcard expression</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_template/temp*</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="get-template-v1-api-all-ex">Get all index templates</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_template</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-get-mapping">Get mapping API</h3>
<titleabbrev>Get mapping</titleabbrev>
<div class="paragraph">
<p>Retrieves <a href="mapping.html">mapping definitions</a> for one or more indices. For data
streams, the API retrieves mappings for the stream&#8217;s backing indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_mapping</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="get-mapping-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_mapping</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_mapping</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-mapping-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-mapping-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="get-mapping-api-example">Examples</h4>
<div class="sect4">
<h5 id="get-mapping-api-multi-ex">Multiple indices</h5>
<div class="paragraph">
<p>The get mapping API can be used to get more than one index with a
single call. General usage of the API follows the following syntax:
<code>host:port/&lt;target&gt;/_mapping</code> where <code>&lt;target&gt;</code> can accept a comma-separated
list of names. To get mappings for all indices in a cluster, use <code>_all</code> or <code>*</code> for <code>&lt;target&gt;</code>
or omit the <code>&lt;target&gt;</code> parameter.
The following are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001,my-index-000002/_mapping</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to get mappings of all indices in a cluster, the following
examples are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /*/_mapping

GET /_all/_mapping

GET /_mapping</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-alias-exists">Index alias exists API</h3>
<titleabbrev>Index alias exists</titleabbrev>
<div class="paragraph">
<p>Checks if an index alias exists.</p>
</div>
<div class="paragraph">
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
</div>
<div class="paragraph">
<p>Most OpenSearch APIs accept an index alias
in place of an index name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">HEAD /_alias/alias1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="alias-exists-api-request">Request</h4>
<div class="paragraph">
<p><code>HEAD /_alias/&lt;alias&gt;</code></p>
</div>
<div class="paragraph">
<p><code>HEAD /&lt;index&gt;/_alias/&lt;alias&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="alias-exists-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;alias&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list or wildcard expression of index alias names
used to limit the request.</p>
</dd>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="alias-exists-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>all</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="alias-exists-api-response-codes">Response codes</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>200</code></dt>
<dd>
<p>Indicates all specified index aliases exist.</p>
</dd>
<dt class="hdlist1"><code>404</code></dt>
<dd>
<p>Indicates one or more specified index aliases <strong>do not</strong> exist.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="alias-exists-api-example">Examples</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">HEAD /_alias/2030
HEAD /_alias/20*
HEAD /logs_20302801/_alias/*</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-exists">Index exists API</h3>
<titleabbrev>Index exists</titleabbrev>
<div class="paragraph">
<p>Checks if an index exists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">HEAD /my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="indices-exists-api-request">Request</h4>
<div class="paragraph">
<p><code>HEAD /&lt;index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="indices-exists-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This parameter does not distinguish between an index name and <a href="indices.html#indices-aliases">alias</a>,
i.e. status code <code>200</code> is also returned if an alias exists with that name.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-exists-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_defaults</code></dt>
<dd>
<p>(Optional, string) If <code>true</code>, return all default settings in the response.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-exists-api-response-codes">Response codes</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>200</code></dt>
<dd>
<p>Indicates all specified indices or index aliases exist.</p>
</dd>
<dt class="hdlist1"><code>404</code></dt>
<dd>
<p>Indicates one or more specified indices or index aliases <strong>do not</strong> exist.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-recovery">Index recovery API</h3>
<titleabbrev>Index recovery</titleabbrev>
<div class="paragraph">
<p>Returns information about ongoing and completed shard recoveries for one or more
indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_recovery</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_recovery</code></p>
</div>
<div class="paragraph">
<p><code>GET /_recovery</code></p>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-desc">Description</h4>
<div class="paragraph">
<p>Use the index recovery API
to get information about ongoing and completed shard recoveries.</p>
</div>
<div class="paragraph">
<p>Shard recovery is the process
of syncing a replica shard from a primary shard.
Upon completion,
the replica shard is available for search.</p>
</div>
<div class="paragraph">
<p>Recovery automatically occurs
during the following processes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Node startup or failure.
This type of recovery is called a <strong>local store recovery</strong>.</p>
</li>
<li>
<p><a href="glossary.html#glossary-replica-shard">Primary shard replication</a>.</p>
</li>
<li>
<p>Relocation of a shard to a different node in the same cluster.</p>
</li>
<li>
<p><a href="https://www.opensearch.org/guide/en/opensearch/reference/{branch}/snapshots-restore-snapshot.html">Snapshot restoration</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>active_only</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
the response only includes ongoing shard recoveries.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>detailed</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
the response includes detailed information about shard recoveries.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>index</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expression of index names
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-response-body">Response body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>id</code></dt>
<dd>
<p>(Integer)
ID of the shard.</p>
</dd>
<dt class="hdlist1"><code>type</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(String)
Recovery type.
Returned values include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>STORE</code></dt>
<dd>
<p>The recovery is related to
a node startup or failure.
This type of recovery is called a local store recovery.</p>
</dd>
<dt class="hdlist1"><code>SNAPSHOT</code></dt>
<dd>
<p>The recovery is related to
a <a href="snapshots-restore-snapshot.html">snapshot restoration</a>.</p>
</dd>
<dt class="hdlist1"><code>REPLICA</code></dt>
<dd>
<p>The recovery is related to
a <a href="glossary.html#glossary-replica-shard">primary shard replication</a>.</p>
</dd>
<dt class="hdlist1"><code>RELOCATING</code></dt>
<dd>
<p>The recovery is related to
the relocation of a shard
to a different node in the same cluster.</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>STAGE</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(String)
Recovery stage.
Returned values include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>DONE</code></dt>
<dd>
<p>Complete.</p>
</dd>
<dt class="hdlist1"><code>FINALIZE</code></dt>
<dd>
<p>Cleanup.</p>
</dd>
<dt class="hdlist1"><code>INDEX</code></dt>
<dd>
<p>Reading index metadata and copying bytes from source to destination.</p>
</dd>
<dt class="hdlist1"><code>INIT</code></dt>
<dd>
<p>Recovery has not started.</p>
</dd>
<dt class="hdlist1"><code>START</code></dt>
<dd>
<p>Starting the recovery process; opening the index for use.</p>
</dd>
<dt class="hdlist1"><code>TRANSLOG</code></dt>
<dd>
<p>Replaying transaction log .</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>primary</code></dt>
<dd>
<p>(Boolean)
If <code>true</code>,
the shard is a primary shard.</p>
</dd>
<dt class="hdlist1"><code>start_time</code></dt>
<dd>
<p>(String)
Timestamp of recovery start.</p>
</dd>
<dt class="hdlist1"><code>stop_time</code></dt>
<dd>
<p>(String)
Timestamp of recovery finish.</p>
</dd>
<dt class="hdlist1"><code>total_time_in_millis</code></dt>
<dd>
<p>(String)
Total time to recover shard in milliseconds.</p>
</dd>
<dt class="hdlist1"><code>source</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Object)
Recovery source.
This can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A repository description if recovery is from a snapshot</p>
</li>
<li>
<p>A description of source node</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>target</code></dt>
<dd>
<p>(Object)
Destination node.</p>
</dd>
<dt class="hdlist1"><code>index</code></dt>
<dd>
<p>(Object)
Statistics about physical index recovery.</p>
</dd>
<dt class="hdlist1"><code>translog</code></dt>
<dd>
<p>(Object)
Statistics about translog recovery.</p>
</dd>
<dt class="hdlist1"><code>start</code></dt>
<dd>
<p>(Object)
Statistics about time to open and start the index.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-recovery-api-example">Examples</h4>
<div class="sect4">
<h5 id="index-recovery-api-multi-ex">Get recovery information for several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET index1,index2/_recovery?human</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-recovery-api-all-ex">Get segment information for all indices in a cluster</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_recovery?human</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "SNAPSHOT",
      "stage" : "INDEX",
      "primary" : true,
      "start_time" : "2014-02-24T12:15:59.716",
      "start_time_in_millis": 1393244159716,
      "stop_time" : "0s",
      "stop_time_in_millis" : 0,
      "total_time" : "2.9m",
      "total_time_in_millis" : 175576,
      "source" : {
        "repository" : "my_repository",
        "snapshot" : "my_snapshot",
        "index" : "index1",
        "version" : "{version}",
        "restoreUUID": "PDh1ZAOaRbiGIVtCvZOMww"
      },
      "target" : {
        "id" : "ryqJ5lO5S4-lSFbGntkEkg",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_opensearch_node"
      },
      "index" : {
        "size" : {
          "total" : "75.4mb",
          "total_in_bytes" : 79063092,
          "reused" : "0b",
          "reused_in_bytes" : 0,
          "recovered" : "65.7mb",
          "recovered_in_bytes" : 68891939,
          "percent" : "87.1%"
        },
        "files" : {
          "total" : 73,
          "reused" : 0,
          "recovered" : 69,
          "percent" : "94.5%"
        },
        "total_time" : "0s",
        "total_time_in_millis" : 0,
        "source_throttle_time" : "0s",
        "source_throttle_time_in_millis" : 0,
        "target_throttle_time" : "0s",
        "target_throttle_time_in_millis" : 0
      },
      "translog" : {
        "recovered" : 0,
        "total" : 0,
        "percent" : "100.0%",
        "total_on_start" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0,
      },
      "verify_index" : {
        "check_index_time" : "0s",
        "check_index_time_in_millis" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0
      }
    } ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This response includes information
about a single index recovering a single shard.
The source of the recovery is a snapshot repository
and the target of the recovery is the <code>my_opensearch_node</code> node.</p>
</div>
<div class="paragraph">
<p>The response also includes the number
and percentage of files and bytes recovered.</p>
</div>
</div>
<div class="sect4">
<h5 id="index-recovery-api-detailed-ex">Get detailed recovery information</h5>
<div class="paragraph">
<p>To get a list of physical files in recovery,
set the <code>detailed</code> query parameter to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET _recovery?human&amp;detailed=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "STORE",
      "stage" : "DONE",
      "primary" : true,
      "start_time" : "2014-02-24T12:38:06.349",
      "start_time_in_millis" : "1393245486349",
      "stop_time" : "2014-02-24T12:38:08.464",
      "stop_time_in_millis" : "1393245488464",
      "total_time" : "2.1s",
      "total_time_in_millis" : 2115,
      "source" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_opensearch_node"
      },
      "target" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "host" : "my.fqdn",
        "transport_address" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_opensearch_node"
      },
      "index" : {
        "size" : {
          "total" : "24.7mb",
          "total_in_bytes" : 26001617,
          "reused" : "24.7mb",
          "reused_in_bytes" : 26001617,
          "recovered" : "0b",
          "recovered_in_bytes" : 0,
          "percent" : "100.0%"
        },
        "files" : {
          "total" : 26,
          "reused" : 26,
          "recovered" : 0,
          "percent" : "100.0%",
          "details" : [ {
            "name" : "segments.gen",
            "length" : 20,
            "recovered" : 20
          }, {
            "name" : "_0.cfs",
            "length" : 135306,
            "recovered" : 135306
          }, {
            "name" : "segments_2",
            "length" : 251,
            "recovered" : 251
          }
          ]
        },
        "total_time" : "2ms",
        "total_time_in_millis" : 2,
        "source_throttle_time" : "0s",
        "source_throttle_time_in_millis" : 0,
        "target_throttle_time" : "0s",
        "target_throttle_time_in_millis" : 0
      },
      "translog" : {
        "recovered" : 71,
        "total" : 0,
        "percent" : "100.0%",
        "total_on_start" : 0,
        "total_time" : "2.0s",
        "total_time_in_millis" : 2025
      },
      "verify_index" : {
        "check_index_time" : 0,
        "check_index_time_in_millis" : 0,
        "total_time" : "88ms",
        "total_time_in_millis" : 88
      }
    } ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response includes a listing
of any physical files recovered
and their sizes.</p>
</div>
<div class="paragraph">
<p>The response also includes timings in milliseconds
of the various stages of recovery:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Index retrieval</p>
</li>
<li>
<p>Translog replay</p>
</li>
<li>
<p>Index start time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This response indicates the recovery is <code>done</code>.
All recoveries,
whether ongoing or complete,
are kept in the cluster state
and may be reported on at any time.</p>
</div>
<div class="paragraph">
<p>To only return information about ongoing recoveries,
set the <code>active_only</code> query parameter to <code>true</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-segments">Index segments API</h3>
<titleabbrev>Index segments</titleabbrev>
<div class="paragraph">
<p>Returns low-level information about the <a href="https://lucene.apache.org/core/">Lucene</a>
segments in index shards.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_segments</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="index-segments-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_segments</code></p>
</div>
<div class="paragraph">
<p><code>GET /_segments</code></p>
</div>
</div>
<div class="sect3">
<h4 id="index-segments-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-segments-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>verbose</code></dt>
<dd>
<p>experimental:[]
(Optional, Boolean)
If <code>true</code>, the response includes detailed information
about Lucene&#8217;s memory usage.
Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-segments-api-response-body">Response body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;segment&gt;</code></dt>
<dd>
<p>(String)
Name of the segment, such as <code>_0</code>. The segment name is derived from
the segment generation and used internally to create file names in the directory
of the shard.</p>
</dd>
<dt class="hdlist1"><code>generation</code></dt>
<dd>
<p>(Integer)
Generation number, such as <code>0</code>. OpenSearch increments this generation number
for each segment written. OpenSearch then uses this number to derive the segment name.
Generation number, such as <code>0</code>. OpenSearch increments this generation number
for each segment written. OpenSearch then uses this number to derive the segment name.</p>
</dd>
<dt class="hdlist1"><code>num_docs</code></dt>
<dd>
<p>(Integer)
The number of documents as reported by Lucene. This excludes deleted documents
and counts any <a href="mapping-types.html#nested">nested documents</a> separately from their parents. It
also excludes documents which were indexed recently and do not yet belong to a
segment.</p>
</dd>
<dt class="hdlist1"><code>deleted_docs</code></dt>
<dd>
<p>(Integer)
The number of deleted documents as reported by Lucene, which may be higher or
lower than the number of delete operations you have performed. This number
excludes deletes that were performed recently and do not yet belong to a
segment. Deleted documents are cleaned up by the
<a href="index-modules-merge.html">automatic merge process</a> if it makes sense to do so.
Also, OpenSearch creates extra deleted documents to internally track the recent
history of operations on a shard.</p>
</dd>
<dt class="hdlist1"><code>size_in_bytes</code></dt>
<dd>
<p>(Integer)
Disk space used by the segment, such as <code>50kb</code>.</p>
</dd>
<dt class="hdlist1"><code>memory_in_bytes</code></dt>
<dd>
<p>(Integer)
Bytes of segment data stored in memory for efficient search,
such as <code>1264</code>.</p>
<div class="paragraph">
<p>A value of <code>-1</code> indicates OpenSearch was unable to compute this number.</p>
</div>
</dd>
<dt class="hdlist1"><code>committed</code></dt>
<dd>
<p>(Boolean)
If <code>true</code>,
the segments is synced to disk. Segments that are synced can survive a hard reboot.</p>
<div class="paragraph">
<p>If <code>false</code>,
the data from uncommitted segments is also stored in
the transaction log so that OpenSearch is able to replay
changes on the next start.</p>
</div>
</dd>
<dt class="hdlist1"><code>search</code></dt>
<dd>
<p>(Boolean)
If <code>true</code>,
the segment is searchable.</p>
<div class="paragraph">
<p>If <code>false</code>,
the segment has most likely been written to disk
but needs a <a href="indices.html#indices-refresh">refresh</a> to be searchable.</p>
</div>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>(String)
Version of Lucene used to write the segment.</p>
</dd>
<dt class="hdlist1"><code>compound</code></dt>
<dd>
<p>(Boolean)
If <code>true</code>, Lucene merged all files from the segment
into a single file to save file descriptors.</p>
</dd>
<dt class="hdlist1"><code>attributes</code></dt>
<dd>
<p>(Object)
Contains information about whether high compression was enabled.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-segments-api-example">Examples</h4>
<div class="sect4">
<h5 id="_get_segment_information_for_a_specific_index">Get segment information for a specific index</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test/_segments</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_get_segment_information_for_several_indices">Get segment information for several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test1,test2/_segments</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_get_segment_information_for_all_indices_in_a_cluster">Get segment information for all indices in a cluster</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_segments</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-response" data-lang="console-response">{
  "_shards": ...
  "indices": {
    "test": {
      "shards": {
        "0": [
          {
            "routing": {
              "state": "STARTED",
              "primary": true,
              "node": "zDC_RorJQCao9xf9pg3Fvw"
            },
            "num_committed_segments": 0,
            "num_search_segments": 1,
            "segments": {
              "_0": {
                "generation": 0,
                "num_docs": 1,
                "deleted_docs": 0,
                "size_in_bytes": 3800,
                "memory_in_bytes": 1410,
                "committed": false,
                "search": true,
                "version": "7.0.0",
                "compound": true,
                "attributes": {
                }
              }
            }
          }
        ]
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_verbose_mode">Verbose mode</h5>
<div class="paragraph">
<p>To add additional information that can be used for debugging,
use the <code>verbose</code> flag.</p>
</div>
<div class="paragraph">
<p>experimental::[]</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test/_segments?verbose=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-response" data-lang="console-response">{
  ...
    "_0": {
      ...
      "ram_tree": [
        {
          "description": "postings [PerFieldPostings(format=1)]",
          "size_in_bytes": 2696,
          "children": [
            {
              "description": "format 'Lucene50_0' ...",
              "size_in_bytes": 2608,
              "children" :[ ... ]
            },
            ...
          ]
        },
        ...
      ]

    }
  ...
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-shards-stores">Index shard stores API</h3>
<titleabbrev>Index shard stores</titleabbrev>
<div class="paragraph">
<p>Retrieves store information
about replica shards in one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_shard_stores</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="index-shard-stores-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_shard_stores</code></p>
</div>
<div class="paragraph">
<p><code>GET /_shard_stores</code></p>
</div>
</div>
<div class="sect3">
<h4 id="index-shard-stores-api-desc">Description</h4>
<div class="paragraph">
<p>The index shard stores API returns the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The node on which each replica shard exists</p>
</li>
<li>
<p>Allocation ID for each replica shard</p>
</li>
<li>
<p>Unique ID for each replica shard</p>
</li>
<li>
<p>Any errors encountered
while opening the shard index
or from an earlier failure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the API only returns store information
for primary shards that are unassigned
or have one or more unassigned replica shards.</p>
</div>
</div>
<div class="sect3">
<h4 id="index-shard-stores-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-shard-stores-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>status</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Comma-separated list of shard health statuses
used to limit the request.</p>
</div>
<div class="paragraph">
<p>Valid values include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>green</code></dt>
<dd>
<p>The primary shard and all replica shards are assigned.</p>
</dd>
<dt class="hdlist1"><code>yellow</code></dt>
<dd>
<p>One or more replica shards are unassigned.</p>
</dd>
<dt class="hdlist1"><code>red</code></dt>
<dd>
<p>The primary shard is unassigned.</p>
</dd>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Return all shards,
regardless of health status.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Defaults to <code>yellow,red</code>.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-shard-stores-api-example">Examples</h4>
<div class="sect4">
<h5 id="index-shard-stores-api-single-ex">Get shard store information for a specific index</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test/_shard_stores</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-shard-stores-api-multi-ex">Get shard store information for several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test1,test2/_shard_stores</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-shard-stores-api-all-ex">Get shard store information for all indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_shard_stores</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-shard-stores-api-health-ex">Get shard store information based on cluster health</h5>
<div class="paragraph">
<p>You can use the <code>status</code> query parameter
to limit returned information based on shard health.</p>
</div>
<div class="paragraph">
<p>The following request only returns information
for assigned primary and replica shards.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_shard_stores?status=green</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "indices": {
    "my-index-00001": {
      "shards": {
        "0": {                                          <b class="conum">(1)</b>
          "stores": [                                   <b class="conum">(2)</b>
            {
            "sPa3OgxLSYGvQ4oPs-Tajw": {                 <b class="conum">(3)</b>
              "name": "node_t0",
              "ephemeral_id": "9NlXRFGCT1m8tkvYCMK-8A",
              "transport_address": "local[1]",
              "attributes": {}
            },
            "allocation_id": "2iNySv_OQVePRX-yaRH_lQ",  <b class="conum">(4)</b>
            "allocation": "primary|replica|unused"      <b class="conum">(5)</b>
            "store_exception": ...                      <b class="conum">(6)</b>
            }
          ]
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The key is the corresponding shard id for the store information</p>
</li>
<li>
<p>A list of store information for all copies of the shard</p>
</li>
<li>
<p>The node information that hosts a copy of the store, the key
is the unique node id.</p>
</li>
<li>
<p>The allocation id of the store copy</p>
</li>
<li>
<p>The status of the store copy, whether it is used as a
primary, replica or not used at all</p>
</li>
<li>
<p>Any exception encountered while opening the shard index or
from earlier engine failure</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-stats">Index stats API</h3>
<titleabbrev>Index stats</titleabbrev>
<div class="paragraph">
<p>Returns statistics for one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /my-index-000001/_stats</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="index-stats-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_stats/&lt;index-metric&gt;</code></p>
</div>
<div class="paragraph">
<p><code>GET /&lt;target&gt;/_stats</code></p>
</div>
<div class="paragraph">
<p><code>GET /_stats</code></p>
</div>
</div>
<div class="sect3">
<h4 id="index-stats-api-desc">Description</h4>
<div class="paragraph">
<p>Use the index stats API to get high-level aggregation and statistics for one or
more indices.</p>
</div>
<div class="paragraph">
<p>By default,
the returned statistics are index-level
with <code>primaries</code> and <code>total</code> aggregations.
<code>primaries</code> are the values for only the primary shards.
<code>total</code> are the accumulated values for both primary and replica shards.</p>
</div>
<div class="paragraph">
<p>To get shard-level statistics,
set the <code>level</code> parameter to <code>shards</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>When moving to another node,
the shard-level statistics for a shard are cleared.
Although the shard
is no longer part of the node,
that node retains any node-level statistics
to which the shard contributed.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="index-stats-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>&lt;index-metric&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Comma-separated list of metrics used to limit the request.
Supported metrics are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>_all</code></dt>
<dd>
<p>Return all statistics.</p>
</dd>
<dt class="hdlist1"><code>completion</code></dt>
<dd>
<p><a href="search.html#completion-suggester">Completion suggester</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>docs</code></dt>
<dd>
<p>Number of documents and deleted docs, which have not yet merged out.
<a href="indices.html#indices-refresh">Index refreshes</a> can affect this statistic.</p>
</dd>
<dt class="hdlist1"><code>fielddata</code></dt>
<dd>
<p><a href="getting-started-modify-data.html#fielddata">Fielddata</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>flush</code></dt>
<dd>
<p><a href="indices.html#indices-flush">Flush</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>get</code></dt>
<dd>
<p>Get statistics,
including missing stats.</p>
</dd>
<dt class="hdlist1"><code>indexing</code></dt>
<dd>
<p><a href="docs.html#docs-index_">Indexing</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>merge</code></dt>
<dd>
<p><a href="index-modules-merge.html">Merge</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>query_cache</code></dt>
<dd>
<p><a href="settings.html#query-cache">Query cache</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>refresh</code></dt>
<dd>
<p><a href="indices.html#indices-refresh">Refresh</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>request_cache</code></dt>
<dd>
<p><a href="settings.html#shard-request-cache">Shard request cache</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>search</code></dt>
<dd>
<p>Search statistics including suggest statistics.
You can include statistics for custom groups
by adding an extra <code>groups</code> parameter
(search operations can be associated with one or more groups).
The <code>groups</code> parameter accepts a comma separated list of group names.
Use <code>_all</code> to return statistics for all groups.</p>
</dd>
<dt class="hdlist1"><code>segments</code></dt>
<dd>
<p>Memory use of all open segments.</p>
<div class="paragraph">
<p>If the <code>include_segment_file_sizes</code> parameter is <code>true</code>,
this metric includes the aggregated disk usage
of each Lucene index file.</p>
</div>
</dd>
<dt class="hdlist1"><code>store</code></dt>
<dd>
<p>Size of the index in <a href="api-conventions.html#byte-units">byte units</a>.</p>
</dd>
<dt class="hdlist1"><code>suggest</code></dt>
<dd>
<p><a href="search.html#search-suggesters">Suggester</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>translog</code></dt>
<dd>
<p><a href="index-modules-translog.html">Translog</a> statistics.</p>
</dd>
<dt class="hdlist1"><code>warmer</code></dt>
<dd>
<p><a href="redirects.html#indices-warmers">Warmer</a> statistics.</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-stats-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>fields</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in the statistics.</p>
</div>
<div class="paragraph">
<p>Used as the default list
unless a specific field list is provided
in the <code>completion_fields</code> or <code>fielddata_fields</code> parameters.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>completion_fields</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in <code>fielddata</code> and <code>suggest</code> statistics.</p>
</dd>
<dt class="hdlist1"><code>fielddata_fields</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expressions of fields
to include in <code>fielddata</code> statistics.</p>
</dd>
<dt class="hdlist1"><code>forbid_closed_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, statistics are <strong>not</strong> collected from closed indices.
Defaults to <code>true</code>.</p>
</dd>
<dt class="hdlist1"><code>groups</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of search groups
to include in the <code>search</code> statistics.</p>
</dd>
<dt class="hdlist1"><code>level</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string)
Indicates whether statistics are aggregated
at the cluster, index, or shard level.</p>
</div>
<div class="paragraph">
<p>Valid values are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cluster</code></p>
</li>
<li>
<p><code>indices</code></p>
</li>
<li>
<p><code>shards</code></p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>include_segment_file_sizes</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, the call reports the aggregated disk usage of
each one  of the Lucene index files (only applies if segment stats are
requested). Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_unloaded_segments</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the response includes information from segments
that are <strong>not</strong> loaded into memory. Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="index-stats-api-example">Examples</h4>
<div class="sect4">
<h5 id="index-stats-api-multiple-ex">Get statistics for multiple indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /index1,index2/_stats</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-stats-api-all-ex">Get statistics for all indices in a cluster</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_stats</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-stats-api-specific-stats-ex">Get specific statistics</h5>
<div class="paragraph">
<p>The following request returns
only the <code>merge</code> and <code>refresh</code> statistics
for all indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_stats/merge,refresh</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="index-stats-api-specific-groups-ex">Get statistics for specific search groups</h5>
<div class="paragraph">
<p>The following request returns
only search statistics
for the <code>group1</code> and <code>group2</code> search groups.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_stats/search?groups=group1,group2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-template-exists-v1">Index template exists API</h3>
<titleabbrev>Index template exists (legacy)</titleabbrev>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This documentation is about <a href="indices.html#indices-templates-v1">legacy index
templates</a>, which are deprecated and will be replaced by the composable
templates introduced in OpenSearch 7.8. For information about composable templates,
see <a href="index-templates.html">Index templates</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Checks if an <a href="indices.html#indices-templates-v1">legacy index template</a> exists.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">HEAD /_template/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="template-exists-api-request">Request</h4>
<div class="paragraph">
<p><code>HEAD /_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="template-exists-api-desc">Description</h4>
<div class="paragraph">
<p>Use the index template exists API
to determine whether one or more index templates exist.</p>
</div>
<div class="paragraph">
<p>Index templates define <a href="index-modules.html#index-modules-settings">settings</a>, <a href="mapping.html">mappings</a>,
and <a href="indices.html#indices-aliases">aliases</a> that can be applied automatically to new indices.</p>
</div>
</div>
<div class="sect3">
<h4 id="template-exists-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Comma-separated list of index template names used to limit the request. Wildcard
(<code>*</code>) expressions are supported.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="template-exists-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>local</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the request retrieves information from the local
node only. Defaults to <code>false</code>, which means information is retrieved from
the master node.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="template-exists-api-response-codes">Response codes</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>200</code></dt>
<dd>
<p>Indicates all specified index templates exist.</p>
</dd>
<dt class="hdlist1"><code>404</code></dt>
<dd>
<p>Indicates one or more specified index templates <strong>do not</strong> exist.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-open-close">Open index API</h3>
<titleabbrev>Open index</titleabbrev>
<div class="paragraph">
<p>Opens a closed index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_open</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="open-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;target&gt;/_open</code></p>
</div>
</div>
<div class="sect3">
<h4 id="open-index-api-desc">Description</h4>
<div class="paragraph">
<p>You can use the open index API to re-open closed indices.</p>
</div>
<div class="paragraph">
<p>A closed index is blocked for read/write operations and does not allow
all operations that opened indices allow. It is not possible to index
documents or to search for documents in a closed index. This allows
closed indices to not have to maintain internal data structures for
indexing or searching documents, resulting in a smaller overhead on
the cluster.</p>
</div>
<div class="paragraph">
<p>When opening or closing an index, the master is responsible for
restarting the index shards to reflect the new state of the index.
The shards will then go through the normal recovery process. The
data of opened/closed indices is automatically replicated by the
cluster to ensure that enough shard copies are safely kept around
at all times.</p>
</div>
<div class="paragraph">
<p>You can open and close multiple indices. An error is thrown
if the request explicitly refers to a missing index. This behaviour can be
disabled using the <code>ignore_unavailable=true</code> parameter.</p>
</div>
<div class="paragraph">
<p>All indices can be opened or closed at once using <code>_all</code> as the index name
or specifying patterns that identify them all (e.g. <code>*</code>).</p>
</div>
<div class="paragraph">
<p>Identifying indices via wildcards or <code>_all</code> can be disabled by setting the
<code>action.destructive_requires_name</code> flag in the config file to <code>true</code>.
This setting can also be changed via the cluster update settings api.</p>
</div>
<div class="paragraph">
<p>Closed indices consume a significant amount of disk-space which can cause
problems in managed environments. Closing indices can be disabled via the cluster settings
API by setting <code>cluster.indices.close.enable</code> to <code>false</code>. The default is <code>true</code>.</p>
</div>
<div class="sect4">
<h5 id="open-index-api-wait-for-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>Because opening or closing an index allocates its shards, the
<a href="indices.html#create-index-wait-for-active-shards"><code>wait_for_active_shards</code></a> setting on
index creation applies to the <code>_open</code> and <code>_close</code> index actions as well.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="open-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard (<code>*</code>) expression of indices and
index aliases used to limit the request.</p>
<div class="paragraph">
<p>To target all indices, use <code>_all</code> or <code>*</code>.</p>
</div>
<div class="paragraph">
<p>To disallow use of <code>_all</code> or wildcard expressions,
change the <code>action.destructive_requires_name</code> cluster setting to <code>true</code>.
You can update this setting in the <code>opensearch.yml</code> file
or using the <a href="cluster.html#cluster-update-settings">cluster update settings</a> API.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="open-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>closed</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="open-index-api-example">Examples</h4>
<div class="paragraph">
<p>The following request re-opens a closed index named <code>my-index-000001</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_open</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "acknowledged" : true,
  "shards_acknowledged" : true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-put-template">Put index template API</h3>
<titleabbrev>Put index template</titleabbrev>
<div class="paragraph">
<p>Creates or updates an index template.
Index templates define <a href="index-modules.html#index-modules-settings">settings</a>, <a href="mapping.html">mappings</a>,
and <a href="indices.html#indices-aliases">aliases</a> that can be applied automatically to new indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_index_template/template_1
{
  "index_patterns" : ["te*"],
  "priority" : 1,
  "template": {
    "settings" : {
      "number_of_shards" : 2
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /_index_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-api-desc">Description</h4>
<div class="paragraph">
<p>OpenSearch applies templates to new indices based on an
wildcard pattern that matches the index name.</p>
</div>
<div class="paragraph">
<p>Index templates are applied during index creation.</p>
</div>
<div class="paragraph">
<p>Settings and mappings specified in a <a href="indices.html#indices-create-index">create index</a>
request override any settings or mappings specified in an index template.</p>
</div>
<div class="paragraph">
<p>Changes to index templates do not affect
existing indices.</p>
</div>
<div class="sect4">
<h5 id="_comments_in_index_templates">Comments in index templates</h5>
<div class="paragraph">
<p>You can use C-style /* */ block comments in index templates. You can include comments anywhere in
the request body, except before the opening curly bracket.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the index template to create.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>create</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, this request cannot replace or update existing index templates. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 child_attributes">
<h4 id="put-index-template-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>index_patterns</code></dt>
<dd>
<p>(Required, array of strings)
Array of wildcard (<code>*</code>) expressions
used to match the names of indices during creation.</p>
</dd>
<dt class="hdlist1"><code>template</code></dt>
<dd>
<p>(Optional, object)
Template to be applied. It may optionally include an <code>aliases</code>, <code>mappings</code>, or
<code>settings</code> configuration.</p>
<details open>
<summary class="title">Properties of <code>template</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt class="hdlist1"><code>composed_of</code></dt>
<dd>
<p>(Optional, array of strings)
An ordered list of component template names. Component templates are merged in the order
specified, meaning that the last component template specified has the highest precedence. See
<a href="indices.html#multiple-component-templates">Composing multiple component templates</a> for an example.</p>
</dd>
<dt class="hdlist1"><code>priority</code></dt>
<dd>
<p>(Optional, integer)
Priority to determine index template precedence when a new index is created. The index template with
the highest priority is chosen. If no priority is specified the template is treated as though it is
of priority 0 (lowest priority).
This number is not automatically generated by OpenSearch.</p>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by OpenSearch.</p>
</dd>
<dt class="hdlist1"><code>_meta</code></dt>
<dd>
<p>(Optional, object)
Optional user metadata about the index template. May have any contents.
This map is not automatically generated by OpenSearch.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-api-example">Examples</h4>
<div class="sect4">
<h5 id="_index_template_with_index_aliases">Index template with index aliases</h5>
<div class="paragraph">
<p>You can include <a href="indices.html#indices-aliases">index aliases</a> in an index template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _index_template/template_1
{
  "index_patterns" : ["te*"],
  "template": {
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user.id" : "bilbo" }
            },
            "routing" : "shard-1"
        },
        "{index}-alias" : {} <b class="conum">(1)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the <code>{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="multiple-templates">Multiple matching templates</h5>
<div class="paragraph">
<p>If multiple index templates match the name of a new index,
the template with the highest priority is used. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_index_template/template_1
{
  "index_patterns" : ["t*"],
  "priority" : 0,
  "template": {
    "settings" : {
      "number_of_shards" : 1,
      "number_of_replicas": 0
    },
    "mappings" : {
      "_source" : { "enabled" : false }
    }
  }
}

PUT /_index_template/template_2
{
  "index_patterns" : ["te*"],
  "priority" : 1,
  "template": {
    "settings" : {
      "number_of_shards" : 2
    },
    "mappings" : {
      "_source" : { "enabled" : true }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For indices that start with <code>te*</code>, <code>_source</code> will enabled, and the index will have two primary
shards and one replica, because only <code>template_2</code> will be applied.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Multiple templates with overlapping index patterns at the same priority are not allowed, and
an error will be thrown when attempting to create a template matching an existing index template at
identical priorities.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="versioning-templates">Template versioning</h5>
<div class="paragraph">
<p>You can use the <code>version</code> parameter to add a version number to an index template.
External systems can use these version numbers to simplify template management.</p>
</div>
<div class="paragraph">
<p>The <code>version</code> parameter is optional and not automatically generated or used by OpenSearch.</p>
</div>
<div class="paragraph">
<p>To unset a <code>version</code>, replace the template without specifying one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_index_template/template_1
{
  "index_patterns" : ["foo", "bar"],
  "priority" : 0,
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "version": 123
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>version</code>, you can use the <a href="indices.html#indices-get-template">get index template</a> API.</p>
</div>
</div>
<div class="sect4">
<h5 id="template-metadata">Template metadata</h5>
<div class="paragraph">
<p>You can use the <code>_meta</code> parameter to add arbitrary metadata to an index template.
This user-defined object is stored in the cluster state,
so keeping it short is preferrable.</p>
</div>
<div class="paragraph">
<p>The <code>_meta</code> parameter is optional and not automatically generated or used by OpenSearch.</p>
</div>
<div class="paragraph">
<p>To unset <code>_meta</code>, replace the template without specifying one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_index_template/template_1
{
  "index_patterns": ["foo", "bar"],
  "template": {
    "settings" : {
        "number_of_shards" : 3
    }
  },
  "_meta": {
    "description": "set number of shards to three",
    "serialization": {
      "class": "MyIndexTemplate",
      "id": 17
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>_meta</code>, you can use the <a href="indices.html#indices-get-template">get index template</a> API.</p>
</div>
</div>
<div class="sect4">
<h5 id="multiple-component-templates">Composing aliases, mappings, and settings</h5>
<div class="paragraph">
<p>When multiple component templates are specified in the <code>composed_of</code> field for an index template,
they are merged in the order specified, meaning that later component templates override earlier
component templates. Any mappings, settings, or aliases from the parent index template are merged
in next. Finally, any configuration on the index request itself is merged.</p>
</div>
<div class="paragraph">
<p>In this example, the order of the two component templates changes the number of shards for an
index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_component_template/template_with_2_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/template_with_3_shards
{
  "template": {
    "settings": {
      "index.number_of_shards": 3
    }
  }
}

PUT /_index_template/template_1
{
  "index_patterns": ["t*"],
  "composed_of": ["template_with_2_shards", "template_with_3_shards"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, an index matching <code>t*</code> will have three primary shards. If the order of composed
templates were reversed, the index would have two primary shards.</p>
</div>
<div class="paragraph">
<p>Mapping definitions are merged recursively, which means that later mapping components can
introduce new field mappings and update the mapping configuration. If a field mapping is
already contained in an earlier component, its definition will be completely overwritten
by the later one.</p>
</div>
<div class="paragraph">
<p>This recursive merging strategy applies not only to field mappings, but also root options like
<code>dynamic_templates</code> and <code>meta</code>. If an earlier component contains a <code>dynamic_templates</code> block,
then by default new <code>dynamic_templates</code> entries are appended onto the end. If an entry already
exists with the same key, then it is overwritten by the new definition.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-templates-v1">Put index template API</h3>
<titleabbrev>Put index template (legacy)</titleabbrev>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
This documentation is about legacy index templates,
which are deprecated and will be replaced by the composable templates introduced in OpenSearch 7.8.
For information about composable templates, see <a href="index-templates.html">Index templates</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Creates or updates an index template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _template/template_1
{
  "index_patterns": ["te*", "bar*"],
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "_source": {
      "enabled": false
    },
    "properties": {
      "host_name": {
        "type": "keyword"
      },
      "created_at": {
        "type": "date",
        "format": "EEE MMM dd HH:mm:ss Z yyyy"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /_template/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-desc">Description</h4>
<div class="paragraph">
<p>Use the PUT index template API
to create or update an index template.</p>
</div>
<div class="paragraph">
<p>Index templates define <a href="index-modules.html#index-modules-settings">settings</a> and <a href="mapping.html">mappings</a>
that you can automatically apply when creating new indices.
OpenSearch applies templates to new indices
based on an index pattern that matches the index name.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Composable templates always take precedence over legacy templates.
If no composable template matches a new index,
matching legacy templates are applied according to their order.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Index templates are only applied during index creation.
Changes to index templates do not affect existing indices.
Settings and mappings specified in <a href="indices.html#indices-create-index">create index</a> API requests
override any settings or mappings specified in an index template.</p>
</div>
<div class="sect4">
<h5 id="_comments_in_index_templates_2">Comments in index templates</h5>
<div class="paragraph">
<p>You can use C-style /* */ block comments in index templates.
You can include comments anywhere in the request body,
except before the opening curly bracket.</p>
</div>
</div>
<div class="sect4">
<h5 id="getting-v1">Getting templates</h5>
<div class="paragraph">
<p>See <a href="indices.html#indices-get-template-v1">Get index template API</a>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the index template to create.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>create</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, this request cannot replace or update existing index templates.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>order</code></dt>
<dd>
<p>(Optional,integer)
Order in which OpenSearch applies this template
if index matches multiple templates.</p>
<div class="paragraph">
<p>Templates with lower <code>order</code> values are merged first.
Templates with higher <code>order</code> values are merged later,
overriding templates with lower values.</p>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>index_patterns</code></dt>
<dd>
<p>(Required, array of strings)
Array of wildcard expressions
used to match the names of indices during creation.</p>
</dd>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>(Optional, integer)
Version number used to manage index templates externally.
This number is not automatically generated by OpenSearch.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-index-template-v1-api-example">Examples</h4>
<div class="sect4">
<h5 id="_index_template_with_index_aliases_2">Index template with index aliases</h5>
<div class="paragraph">
<p>You can include <a href="indices.html#indices-aliases">index aliases</a> in an index template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _template/template_1
{
  "index_patterns" : ["te*"],
  "settings" : {
    "number_of_shards" : 1
  },
  "aliases" : {
    "alias1" : {},
    "alias2" : {
      "filter" : {
        "term" : {"user.id" : "bilbo" }
      },
      "routing" : "shard-1"
    },
    "{index}-alias" : {} <b class="conum">(1)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the <code>{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="multiple-templates-v1">Indices matching multiple templates</h5>
<div class="paragraph">
<p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code>order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_template/template_1
{
  "index_patterns" : ["te*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : false }
  }
}

PUT /_template/template_2
{
  "index_patterns" : ["tes*"],
  "order" : 1,
  "settings" : {
    "number_of_shards" : 1
  },
  "mappings" : {
    "_source" : { "enabled" : true }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above will disable storing the <code>_source</code>, but
for indices that start with <code>tes*</code>, <code>_source</code> will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Multiple matching templates with the same order value will
result in a non-deterministic merging order.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="versioning-templates-v1">Template versioning</h5>
<div class="paragraph">
<p>You can use the <code>version</code> parameter
to add an optional version number to an index template.
External systems can use these version numbers
to simplify template management.</p>
</div>
<div class="paragraph">
<p>The <code>version</code>	parameter is completely optional
and not automatically generated by OpenSearch.</p>
</div>
<div class="paragraph">
<p>To unset a <code>version</code>,
replace the template without specifying	one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_template/template_1
{
  "index_patterns" : ["my-index-*"],
  "order" : 0,
  "settings" : {
    "number_of_shards" : 1
  },
  "version": 123
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>version</code>,
you can	use the <a href="indices.html#indices-get-template">get index template</a> API
with the <a href="api-conventions.html#common-options-response-filtering"><code>filter_path</code></a> query parameter
to return only the version number:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_template/template_1?filter_path=*.version</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "template_1" : {
    "version" : 123
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-component-template">Put component template API</h3>
<titleabbrev>Put component template</titleabbrev>
<div class="paragraph">
<p>Creates or updates a component template.
Component templates are building blocks for constructing <a href="index-templates.html">index templates</a>
that specify index <a href="mapping.html">mappings</a>, <a href="index-modules.html#index-modules-settings">settings</a>,
and <a href="indices.html#indices-aliases">aliases</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _component_template/template_1
{
  "template": {
    "settings": {
      "number_of_shards": 1
    },
    "mappings": {
      "_source": {
        "enabled": false
      },
      "properties": {
        "host_name": {
          "type": "keyword"
        },
        "created_at": {
          "type": "date",
          "format": "EEE MMM dd HH:mm:ss Z yyyy"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /_component_template/&lt;component-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-desc">Description</h4>
<div class="paragraph">
<p>An index template can be composed of multiple component templates.
To use a component template, specify it in an index template&#8217;s <code>composed_of</code> list.
Component templates are only applied to new indices
as part of a matching index template.</p>
</div>
<div class="paragraph">
<p>Settings and mappings specified directly in the index template or the <a href="indices.html#indices-create-index">create index</a>
request override any settings or mappings specified in a component template.</p>
</div>
<div class="paragraph">
<p>Component templates are only used during index creation.
Changes to component templates do not
affect existing indices, including a stream&#8217;s backing indices.</p>
</div>
<div class="sect4">
<h5 id="_comments_in_component_templates">Comments in component templates</h5>
<div class="paragraph">
<p>You can use C-style /* */ block comments in component templates.
You can include comments anywhere in the request body,
except before the opening curly bracket.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;component-template&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the component template to create.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>create</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, this request cannot replace or update existing component templates.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>template</code></dt>
<dd>
<p>(Required, object)
This is the template to be applied, may optionally include a <code>mappings</code>,
<code>settings</code>, or <code>aliases</code> configuration.</p>
</dd>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>(Optional, integer)
Version number used to manage component templates externally.
This number is not automatically generated or incremented by OpenSearch.</p>
</dd>
<dt class="hdlist1"><code>_meta</code></dt>
<dd>
<p>(Optional, object)
Optional user metadata about the component template. May have any contents.
This map is not automatically generated by OpenSearch.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-component-template-api-example">Examples</h4>
<div class="sect4">
<h5 id="_component_template_with_index_aliases">Component template with index aliases</h5>
<div class="paragraph">
<p>You can include <a href="indices.html#indices-aliases">index aliases</a> in a component template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT _component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user.id" : "bilbo" }
            },
            "routing" : "shard-1"
        },
        "{index}-alias" : {} <b class="conum">(1)</b>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the <code>{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="applying-component-templates">Applying component templates</h5>
<div class="paragraph">
<p>You cannot directly apply a component template to an index.
To be applied, a component template must be included in an index template&#8217;s <code>composed_of</code> list. See <a href="index-templates.html">Index templates</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="component-templates-version">Component template versioning</h5>
<div class="paragraph">
<p>You can use the <code>version</code> parameter to add a version number to a component template.
External systems can use these version numbers to simplify template management.</p>
</div>
<div class="paragraph">
<p>The <code>version</code> parameter is optional and not automatically generated or used by OpenSearch.</p>
</div>
<div class="paragraph">
<p>To unset a <code>version</code>, replace the template without specifying one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "version": 123
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>version</code>, you can use the <a href="indices.html#getting-component-templates">get component template API</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="component-templates-metadata">Component template metadata</h5>
<div class="paragraph">
<p>You can use the <code>_meta</code> parameter to add arbitrary metadata to a component template.
This user-defined object is stored in the cluster state,
so keeping it short is preferrable.</p>
</div>
<div class="paragraph">
<p>The <code>_meta</code> parameter is optional and not automatically generated or used by OpenSearch.</p>
</div>
<div class="paragraph">
<p>To unset <code>_meta</code>, replace the template without specifying one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_component_template/template_1
{
  "template": {
    "settings" : {
        "number_of_shards" : 1
    }
  },
  "_meta": {
    "description": "set number of shards to one",
    "serialization": {
      "class": "MyComponentTemplate",
      "id": 10
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>_meta</code>, you can use the <a href="indices.html#getting-component-templates">get component template</a> API.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-put-mapping">Put mapping API</h3>
<titleabbrev>Put mapping</titleabbrev>
<div class="paragraph">
<p>Adds new fields to an existing index. You can also use the
put mapping API to change the search settings of existing fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_mapping
{
  "properties": {
    "email": {
      "type": "keyword"
    }
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="put-mapping-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /&lt;target&gt;/_mapping</code></p>
</div>
<div class="paragraph">
<p><code>PUT /_mapping</code></p>
</div>
</div>
<div class="sect3">
<h4 id="put-mapping-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-mapping-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>write_index_only</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
the mappings are applied only to the current write index for the target.
Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-mapping-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>properties</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, <a href="mapping.html">mapping object</a>) Mapping for a field. For new
fields, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field name</p>
</li>
<li>
<p><a href="mapping-types.html">Field data type</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For existing fields, see <a href="indices.html#updating-field-mappings">Change the mapping of an existing field</a>.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="put-mapping-api-example">Examples</h4>
<div class="sect4">
<h5 id="put-field-mapping-api-basic-ex">Example with single target</h5>
<div class="paragraph">
<p>The put mapping API requires an existing index. The following
<a href="indices.html#indices-create-index">create index</a> API request creates the <code>publications</code>
index with no mapping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /publications</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following put mapping API request adds <code>title</code>, a new <a href="mapping-types.html#text"><code>text</code></a> field,
to the <code>publications</code> index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /publications/_mapping
{
  "properties": {
    "title":  { "type": "text"}
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="put-mapping-api-multi-ex">Multiple targets</h5>
<div class="paragraph">
<p>The PUT mapping API can be applied to multiple indices with a single request.
For example, you can update mappings for the <code>my-index-000001</code> and <code>my-index-000002</code> indices at the same time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Create the two indices
PUT /my-index-000001
PUT /my-index-000002

# Update both mappings
PUT /my-index-000001,my-index-000002/_mapping
{
  "properties": {
    "user": {
      "properties": {
        "name": {
          "type": "keyword"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="add-new-field-to-object">Add new properties to an existing object field</h5>
<div class="paragraph">
<p>You can use the put mapping API to add new properties to an existing
<a href="mapping-types.html#object"><code>object</code></a> field. To see how this works, try the following example.</p>
</div>
<div class="paragraph">
<p>Use the <a href="indices.html#indices-create-index">create index</a> API to create an index with the
<code>name</code> object field and an inner <code>first</code> text field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "name": {
        "properties": {
          "first": {
            "type": "text"
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the put mapping API to add a new inner <code>last</code> text field to the <code>name</code>
field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_mapping
{
  "properties": {
    "name": {
      "properties": {
        "last": {
          "type": "text"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="add-multi-fields-existing-field-ex">Add multi-fields to an existing field</h5>
<div class="paragraph">
<p><a href="mapping-params.html#multi-fields">Multi-fields</a> let you index the same field in different ways.
You can use the put mapping API to update the <code>fields</code> mapping parameter and
enable multi-fields for an existing field.</p>
</div>
<div class="paragraph">
<p>To see how this works, try the following example.</p>
</div>
<div class="paragraph">
<p>Use the <a href="indices.html#indices-create-index">create index</a> API to create an index with the
<code>city</code> <a href="mapping-types.html#text">text</a> field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "city": {
        "type": "text"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>While text fields work well for full-text search, <a href="mapping-types.html#keyword">keyword</a> fields are
not analyzed and may work better for sorting or aggregations.</p>
</div>
<div class="paragraph">
<p>Use the put mapping API to enable a multi-field for the <code>city</code> field. This
request adds the <code>city.raw</code> keyword multi-field, which can be used for sorting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_mapping
{
  "properties": {
    "city": {
      "type": "text",
      "fields": {
        "raw": {
          "type": "keyword"
        }
      }
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="change-existing-mapping-parms">Change supported mapping parameters for an existing field</h5>
<div class="paragraph">
<p>The documentation for each <a href="mapping-params.html">mapping parameter</a> indicates
whether you can update it for an existing field using the put mapping API. For
example, you can use the put mapping API to update the
<a href="mapping-params.html#ignore-above"><code>ignore_above</code></a> parameter.</p>
</div>
<div class="paragraph">
<p>To see how this works, try the following example.</p>
</div>
<div class="paragraph">
<p>Use the <a href="indices.html#indices-create-index">create index</a> API to create an index containing
a <code>user_id</code> keyword field. The <code>user_id</code> field has an <code>ignore_above</code> parameter
value of <code>20</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user_id": {
        "type": "keyword",
        "ignore_above": 20
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the put mapping API to change the <code>ignore_above</code> parameter value to <code>100</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_mapping
{
  "properties": {
    "user_id": {
      "type": "keyword",
      "ignore_above": 100
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="updating-field-mappings">Change the mapping of an existing field</h5>
<div class="paragraph">
<p>Except for supported <a href="mapping-params.html">mapping parameters</a>,
you can&#8217;t change the mapping or field type of an existing field.
Changing an existing field could invalidate data that&#8217;s already indexed.</p>
</div>
<div class="paragraph">
<p>If you need to change the mapping of a field in other indices,
create a new index with the correct mapping
and <a href="docs.html#docs-reindex">reindex</a> your data into that index.</p>
</div>
<div class="paragraph">
<p>To see how you can change the mapping of an existing field in an index,
try the following example.</p>
</div>
<div class="paragraph">
<p>Use the <a href="indices.html#indices-create-index">create index</a> API
to create an index
with the <code>user_id</code> field
with the <a href="mapping-types.html#number"><code>long</code></a> field type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings" : {
    "properties": {
      "user_id": {
        "type": "long"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <a href="docs.html#docs-index_">index</a> API
to index several documents
with <code>user_id</code> field values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_doc?refresh=wait_for
{
  "user_id" : 12345
}

POST /my-index-000001/_doc?refresh=wait_for
{
  "user_id" : 12346
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To change the <code>user_id</code> field
to the <a href="mapping-types.html#keyword"><code>keyword</code></a> field type,
use the create index API
to create a new index with the correct mapping.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-new-index-000001
{
  "mappings" : {
    "properties": {
      "user_id": {
        "type": "keyword"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the <a href="docs.html#docs-reindex">reindex</a> API
to copy documents from the old index
to the new one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_reindex
{
  "source": {
    "index": "my-index-000001"
  },
  "dest": {
    "index": "my-new-index-000001"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="rename-existing-field">Rename a field</h5>
<div class="paragraph">
<p>Renaming a field would invalidate data already indexed under the old field name.
Instead, add an <a href="mapping-types.html#alias"><code>alias</code></a> field to create an alternate field name.</p>
</div>
<div class="paragraph">
<p>For example,
use the <a href="indices.html#indices-create-index">create index</a> API
to create an index
with the <code>user_identifier</code> field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user_identifier": {
        "type": "keyword"
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the put mapping API to add the <code>user_id</code> field alias
for the existing <code>user_identifier</code> field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_mapping
{
  "properties": {
    "user_id": {
      "type": "alias",
      "path": "user_identifier"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-refresh">Refresh API</h3>
<titleabbrev>Refresh</titleabbrev>
<div class="paragraph">
<p>Refreshes one or more indices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_refresh</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="refresh-api-request">Request</h4>
<div class="paragraph">
<p><code>POST &lt;target&gt;/_refresh</code></p>
</div>
<div class="paragraph">
<p><code>GET &lt;target&gt;/_refresh</code></p>
</div>
<div class="paragraph">
<p><code>POST /_refresh</code></p>
</div>
<div class="paragraph">
<p><code>GET /_refresh</code></p>
</div>
</div>
<div class="sect3">
<h4 id="refresh-api-desc">Description</h4>
<div class="paragraph">
<p>Use the refresh API to explicitly refresh one or more indices.
A <em>refresh</em> makes all operations performed on an index
since the last refresh
available for search.</p>
</div>
<div class="paragraph">
<p>By default, OpenSearch periodically refreshes indices every second, but only on
indices that have received one search request or more in the last 30 seconds.
You can change this default interval
using the <a href="index-modules.html#index-refresh-interval-setting"><code>index.refresh_interval</code></a> setting.</p>
</div>
<div class="paragraph">
<p>Refresh requests are synchronous and do not return a response until the
refresh operation completes.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Refreshes are resource-intensive.
To ensure good cluster performance,
we recommend waiting for OpenSearch&#8217;s periodic refresh
rather than performing an explicit refresh
when possible.</p>
</div>
<div class="paragraph">
<p>If your application workflow
indexes documents and then runs a search
to retrieve the indexed document,
we recommend using the <a href="docs.html#docs-index_">index API</a>'s
<code>refresh=wait_for</code> query parameter option.
This option ensures the indexing operation waits
for a periodic refresh
before running the search.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="refresh-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
<div class="paragraph">
<p>To refresh all indices in the cluster,
omit this parameter
or use a value of <code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="refresh-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>true</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="refresh-api-example">Examples</h4>
<div class="sect4">
<h5 id="refresh-api-multiple-ex">Refresh several indices</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001,my-index-000002/_refresh</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="refresh-api-all-ex">Refresh all indices in a cluster</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_refresh</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-rollover-index">Rollover index API</h3>
<titleabbrev>Rollover index</titleabbrev>
<div class="paragraph">
<p>Creates a new index for a rollover target when the target&#8217;s existing index meets
a condition you provide. A rollover target can be an
<a href="indices.html#indices-aliases">index alias</a>. When targeting an alias, the alias
is updated to point to the new index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /alias1/_rollover/my-index-000002
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size": "5gb"
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;rollover-target&gt;/_rollover/&lt;target-index&gt;</code></p>
</div>
<div class="paragraph">
<p><code>POST /&lt;rollover-target&gt;/_rollover/</code></p>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-desc">Description</h4>
<div class="paragraph">
<p>The rollover index API rolls a rollover target to a new index when
the existing index meets a condition you provide. You can use this API to retire
an index that becomes too large or too old.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To roll over an index, a condition must be met <strong>when you call the API</strong>.
OpenSearch does not monitor the index after you receive an API response.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The rollover index API accepts a rollover target name
and a list of <code>conditions</code>.</p>
</div>
<div class="paragraph">
<p>If the specified rollover target is an alias pointing to a single index,
the rollover request:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creates a new index</p>
</li>
<li>
<p>Adds the alias to the new index</p>
</li>
<li>
<p>Removes the alias from the original index</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the specified rollover target is an alias pointing to multiple indices,
one of these indices must have <code>is_write_index</code> set to <code>true</code>.
In this case, the rollover request:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creates a new index</p>
</li>
<li>
<p>Sets <code>is_write_index</code> to <code>true</code> for the new index</p>
</li>
<li>
<p>Sets <code>is_write_index</code> to <code>false</code> for the original index</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="rollover-wait-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>Because the rollover operation creates a new index to rollover to, the
<a href="indices.html#create-index-wait-for-active-shards"><code>wait_for_active_shards</code></a> setting on
index creation applies to the rollover action.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;rollover-target&gt;</code></dt>
<dd>
<p>(Required*, string)
Name of the existing index alias on which to
to assign to the target index.	perform the rollover.</p>
</dd>
<dt class="hdlist1"><code>&lt;target-index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional*, string)
Name of the target index to create and assign the index alias.</p>
</div>
<div class="paragraph">
<p>Index names must meet the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase only</p>
</li>
<li>
<p>Cannot include <code>\</code>, <code>/</code>, <code>*</code>, <code>?</code>, <code>"</code>, <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, ` ` (space character), <code>,</code>, <code>#</code></p>
</li>
<li>
<p>Indices prior to 7.0 could contain a colon (<code>:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+</p>
</li>
<li>
<p>Cannot start with <code>-</code>, <code>_</code>, <code>+</code></p>
</li>
<li>
<p>Cannot be <code>.</code> or <code>..</code></p>
</li>
<li>
<p>Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)</p>
</li>
<li>
<p>Names starting with <code>.</code> are deprecated, except for <a href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>rollover-target</code> is an alias that is assigned to an index name that ends
with <code>-</code> and a number such as <code>logs-000001</code>. In this case, the name of the new
index follows the same pattern and increments the number. For example,
<code>logs-000001</code> increments to <code>logs-000002</code>. This number is zero-padded with a
length of 6, regardless of the prior index name.</p>
</div>
<div class="paragraph">
<p>If the existing index for the alias does not match this pattern, this parameter
is required.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dry_run</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>,
the request checks whether the index matches provided conditions
but does not perform a rollover.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>include_type_name</code></dt>
<dd>
<p>(Optional, boolean) If <code>true</code>, a mapping type is expected in the body of
mappings. Defaults to <code>false</code>. Types are deprecated.</p>
</dd>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>conditions</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, object)
If supplied, the set of conditions the rollover target&#8217;s existing index must
meet to roll over. If omitted, the rollover will be performed unconditionally.</p>
</div>
<div class="paragraph">
<p>Parameters include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>max_age</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Maximum age of the index.</p>
</dd>
<dt class="hdlist1"><code>max_docs</code></dt>
<dd>
<p>(Optional, integer)
Maximum number of documents in the index.
Documents added since the last refresh are not included in the document count.
The document count does <strong>not</strong> include documents in replica shards.</p>
</dd>
<dt class="hdlist1"><code>max_size</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#byte-units">byte units</a>)
Maximum index size.
This is the total size of all primary shards in the index.
Replicas are not counted toward the maximum index size.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
To see the current index size, use the <a href="cat.html#cat-indices">_cat indices</a> API.
The <code>pri.store.size</code> value shows the combined size of all primary shards.
</td>
</tr>
</table>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="rollover-index-api-example">Examples</h4>
<div class="sect4">
<h5 id="rollover-index-basic-ex">Basic example</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /logs-000001 <b class="conum">(1)</b>
{
  "aliases": {
    "logs_write": {}
  }
}

# Add &gt; 1000 documents to logs-000001

POST /logs_write/_rollover <b class="conum">(2)</b>
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size":  "5gb"
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Creates an index called <code>logs-0000001</code> with the alias <code>logs_write</code>.</p>
</li>
<li>
<p>If the index pointed to by <code>logs_write</code> was created 7 or more days ago, or
contains 1,000 or more documents, or has an index size at least around 5GB, then the <code>logs-000002</code> index is created
and the <code>logs_write</code> alias is updated to point to <code>logs-000002</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "acknowledged": true,
  "shards_acknowledged": true,
  "old_index": "logs-000001",
  "new_index": "logs-000002",
  "rolled_over": true, <b class="conum">(1)</b>
  "dry_run": false, <b class="conum">(2)</b>
  "conditions": { <b class="conum">(3)</b>
    "[max_age: 7d]": false,
    "[max_docs: 1000]": true,
    "[max_size: 5gb]": false,
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Whether the index was rolled over.</p>
</li>
<li>
<p>Whether the rollover was dry run.</p>
</li>
<li>
<p>The result of each condition.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="rollover-index-settings-ex">Specify settings for the target index</h5>
<div class="paragraph">
<p>The settings, mappings, and aliases for the new index are taken from any
matching <a href="index-templates.html">index templates</a>. If the rollover target is an
index alias, you can specify <code>settings</code>, <code>mappings</code>, and <code>aliases</code> in the body
of the request just like the <a href="indices.html#indices-create-index">create index</a> API. Values
specified in the request override any values set in matching index templates.
For example, the following <code>rollover</code> request overrides the
<code>index.number_of_shards</code> setting:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /logs-000001
{
  "aliases": {
    "logs_write": {}
  }
}

POST /logs_write/_rollover
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  },
  "settings": {
    "index.number_of_shards": 2
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="rollover-index-specify-index-ex">Specify a target index name</h5>
<div class="paragraph">
<p>If the rollover target is an index alias and the name of the existing index ends
with <code>-</code> and a number&#8201;&#8212;&#8201;e.g. <code>logs-000001</code>&#8201;&#8212;&#8201;then the name of the new index
will follow the same pattern, incrementing the number (<code>logs-000002</code>). The
number is zero-padded with a length of 6, regardless of the old index name.</p>
</div>
<div class="paragraph">
<p>If the old name doesn&#8217;t match this pattern then you must specify the name for
the new index as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_alias/_rollover/my_new_index_name
{
  "conditions": {
    "max_age":   "7d",
    "max_docs":  1000,
    "max_size": "5gb"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_using_date_math_with_the_rollover_api">Use date math with a rollover</h5>
<div class="paragraph">
<p>If the rollover target is an index alias, it can be useful to use
<a href="api-conventions.html#date-math-index-names">date math</a> to name the rollover index according to the
date that the index rolled over, e.g. <code>logstash-2016.02.03</code>.  The rollover API
supports date math, but requires the index name to end with a dash followed by
a number, e.g. <code>logstash-2016.02.03-1</code> which is incremented every time the
index is rolled over. For instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># PUT /&lt;logs-{now/d}-1&gt; with URI encoding:
PUT /%3Clogs_%7Bnow%2Fd%7D-1%3E <b class="conum">(1)</b>
{
  "aliases": {
    "logs_write": {}
  }
}

PUT logs_write/_doc/1
{
  "message": "a dummy log"
}

POST logs_write/_refresh

# Wait for a day to pass

POST /logs_write/_rollover <b class="conum">(2)</b>
{
  "conditions": {
    "max_docs":   "1"
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Creates an index named with today&#8217;s date (e.g.) <code>logs_2016.10.31-1</code></p>
</li>
<li>
<p>Rolls over to a new index with today&#8217;s date, e.g. <code>logs_2016.10.31-000002</code> if run immediately, or <code>logs-2016.11.01-000002</code> if run after 24 hours</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>These indices can then be referenced as described in the
<a href="api-conventions.html#date-math-index-names">date math documentation</a>.  For example, to search
over indices created in the last three days, you could do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># GET /&lt;logs-{now/d}-*&gt;,&lt;logs-{now/d-1d}-*&gt;,&lt;logs-{now/d-2d}-*&gt;/_search
GET /%3Clogs-%7Bnow%2Fd%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-1d%7D-*%3E%2C%3Clogs-%7Bnow%2Fd-2d%7D-*%3E/_search</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="rollover-index-api-dry-run-ex">Dry run</h5>
<div class="paragraph">
<p>The rollover API supports <code>dry_run</code> mode, where request conditions can be
checked without performing the actual rollover.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /logs_write/_rollover?dry_run
{
  "conditions" : {
    "max_age": "7d",
    "max_docs": 1000,
    "max_size": "5gb"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="indices-rollover-is-write-index">Roll over a write index</h5>
<div class="paragraph">
<p>If the rollover target is an index alias for  a write index that has <code>is_write_index</code> explicitly set to <code>true</code>, it is not
swapped during rollover actions. Since having an alias point to multiple indices is ambiguous in distinguishing
which is the correct write index to roll over, it is not valid to rollover an alias that points to multiple indices.
For this reason, the default behavior is to swap which index is being pointed to by the write-oriented alias. This
was <code>logs_write</code> in some of the above examples. Since setting <code>is_write_index</code> enables an alias to point to multiple indices
while also being explicit as to which is the write index that rollover should target, removing the alias from the rolled over
index is not necessary. This simplifies things by allowing for one alias to behave both as the write and read aliases for
indices that are being managed with Rollover.</p>
</div>
<div class="paragraph">
<p>Look at the behavior of the aliases in the following example where <code>is_write_index</code> is set on the rolled over index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT my_logs_index-000001
{
  "aliases": {
    "logs": { "is_write_index": true } <b class="conum">(1)</b>
  }
}

PUT logs/_doc/1
{
  "message": "a dummy log"
}

POST logs/_refresh

POST /logs/_rollover
{
  "conditions": {
    "max_docs":   "1"
  }
}

PUT logs/_doc/2 <b class="conum">(2)</b>
{
  "message": "a newer log"
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>configures <code>my_logs_index</code> as the write index for the <code>logs</code> alias</p>
</li>
<li>
<p>newly indexed documents against the <code>logs</code> alias will write to the new index</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "_index" : "my_logs_index-000002",
  "_type" : "_doc",
  "_id" : "2",
  "_version" : 1,
  "result" : "created",
  "_shards" : {
    "total" : 2,
    "successful" : 1,
    "failed" : 0
  },
  "_seq_no" : 0,
  "_primary_term" : 1
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the rollover, the alias metadata for the two indices will have the <code>is_write_index</code> setting
reflect each index&#8217;s role, with the newly created index as the write index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "my_logs_index-000002": {
    "aliases": {
      "logs": { "is_write_index": true }
    }
  },
  "my_logs_index-000001": {
    "aliases": {
      "logs": { "is_write_index" : false }
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-shrink-index">Shrink index API</h3>
<titleabbrev>Shrink index</titleabbrev>
<div class="paragraph">
<p>Shrinks an existing index into a new index with fewer primary shards.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_shrink/shrunk-my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_shrink/&lt;target-index&gt;</code></p>
</div>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;/_shrink/&lt;target-index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-prereqs">Prerequisites</h4>
<div class="paragraph">
<p>Before you can shrink an index:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The index must be read-only.</p>
</li>
<li>
<p>All primary shards for the index must reside on the same node.</p>
</li>
<li>
<p>The index must have a <code>green</code> <a href="cluster.html#cluster-health">health status</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make shard allocation easier, we recommend you also remove the index&#8217;s
replica shards. You can later re-add replica shards as part of the shrink
operation.</p>
</div>
<div class="paragraph">
<p>You can use the following <a href="indices.html#indices-update-settings">update index settings API</a>
request to remove an index&#8217;s replica shards, relocates the index&#8217;s remaining
shards to the same node, and make the index read-only.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my_source_index/_settings
{
  "settings": {
    "index.number_of_replicas": 0,                                <b class="conum">(1)</b>
    "index.routing.allocation.require._name": "shrink_node_name", <b class="conum">(2)</b>
    "index.blocks.write": true                                    <b class="conum">(3)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Removes replica shards for the index.</p>
</li>
<li>
<p>Relocates the index&#8217;s shards to the <code>shrink_node_name</code> node.
See <a href="index-modules-allocation.html#shard-allocation-filtering">Index-level shard allocation filtering</a>.</p>
</li>
<li>
<p>Prevents write operations to this index. Metadata changes, such as deleting
the index, are still allowed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>It can take a while to relocate the source index.  Progress can be tracked
with the <a href="cat.html#cat-recovery"><code>_cat recovery</code> API</a>, or the <a href="cluster.html#cluster-health"><code>cluster health</code> API</a> can be used to wait until all shards have relocated
with the <code>wait_for_no_relocating_shards</code> parameter.</p>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-desc">Description</h4>
<div class="paragraph">
<p>The shrink index API allows you to shrink an existing index into a new index
with fewer primary shards. The requested number of primary shards in the target index
must be a factor of the number of shards in the source index. For example an index with
<code>8</code> primary shards can be shrunk into <code>4</code>, <code>2</code> or <code>1</code> primary shards or an index
with <code>15</code> primary shards can be shrunk into <code>5</code>, <code>3</code> or <code>1</code>. If the number
of shards in the index is a prime number it can only be shrunk into a single
primary shard. Before shrinking, a (primary or replica) copy of every shard
in the index must be present on the same node.</p>
</div>
<div class="sect4">
<h5 id="how-shrink-works">How shrinking works</h5>
<div class="paragraph">
<p>A shrink operation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creates a new target index with the same definition as the source
index, but with a smaller number of primary shards.</p>
</li>
<li>
<p>Hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process. Also if using
multiple data paths, shards on different data paths require a full copy of
segment files if they are not on the same disk since hardlinks dont work across
disks)</p>
</li>
<li>
<p>Recovers the target index as though it were a closed index which
had just been re-opened.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_shrinking_an_index">Shrink an index</h5>
<div class="paragraph">
<p>To shrink <code>my_source_index</code> into a new index called <code>my_target_index</code>, issue
the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.routing.allocation.require._name": null, <b class="conum">(1)</b>
    "index.blocks.write": null <b class="conum">(2)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Clear the allocation requirement copied from the source index.</p>
</li>
<li>
<p>Clear the index write block copied from the source index.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the shrink operation to start.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Indices can only be shrunk if they satisfy the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The target index must not exist.</p>
</li>
<li>
<p>The source index must have more primary shards than the target index.</p>
</li>
<li>
<p>The number of primary shards in the target index must be a factor of the
number of primary shards in the source index. The source index must have
more primary shards than the target index.</p>
</li>
<li>
<p>The index must not contain more than <code>2,147,483,519</code> documents in total
across all shards that will be shrunk into a single shard on the target index
as this is the maximum number of docs that can fit into a single shard.</p>
</li>
<li>
<p>The node handling the shrink process must have sufficient free disk space to
accommodate a second copy of the existing index.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>_shrink</code> API is similar to the <a href="indices.html#indices-create-index"><code>create index</code> API</a>
and accepts <code>settings</code> and <code>aliases</code> parameters for the target index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_shrink/my_target_index
{
  "settings": {
    "index.number_of_replicas": 1,
    "index.number_of_shards": 1, <b class="conum">(1)</b>
    "index.codec": "best_compression" <b class="conum">(2)</b>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The number of shards in the target index. This must be a factor of the
number of shards in the source index.</p>
</li>
<li>
<p>Best compression will only take affect when new writes are made to the
index, such as when <a href="indices.html#indices-forcemerge">force-merging</a> the shard to a single
segment.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Mappings may not be specified in the <code>_shrink</code> request.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="monitor-shrink">Monitor the shrink process</h5>
<div class="paragraph">
<p>The shrink process can be monitored with the <a href="cat.html#cat-recovery"><code>_cat recovery</code>
API</a>, or the <a href="cluster.html#cluster-health"><code>cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code>wait_for_status</code>
parameter to <code>yellow</code>.</p>
</div>
<div class="paragraph">
<p>The <code>_shrink</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code>unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated on the shrink node, its primary shard will remain
<code>unassigned</code> until it can be allocated on that node.</p>
</div>
<div class="paragraph">
<p>Once the primary shard is allocated, it moves to state <code>initializing</code>, and the
shrink process begins. When the shrink operation completes, the shard will
become <code>active</code>. At that  point, OpenSearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>
</div>
<div class="sect4">
<h5 id="shrink-wait-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>Because the shrink operation creates a new index to shrink the shards to,
the <a href="indices.html#create-index-wait-for-active-shards">wait for active shards</a> setting
on index creation applies to the shrink index action as well.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the source index to shrink.</p>
</dd>
<dt class="hdlist1"><code>&lt;target-index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, string)
Name of the target index to create.</p>
</div>
<div class="paragraph">
<p>Index names must meet the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase only</p>
</li>
<li>
<p>Cannot include <code>\</code>, <code>/</code>, <code>*</code>, <code>?</code>, <code>"</code>, <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, ` ` (space character), <code>,</code>, <code>#</code></p>
</li>
<li>
<p>Indices prior to 7.0 could contain a colon (<code>:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+</p>
</li>
<li>
<p>Cannot start with <code>-</code>, <code>_</code>, <code>+</code></p>
</li>
<li>
<p>Cannot be <code>.</code> or <code>..</code></p>
</li>
<li>
<p>Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)</p>
</li>
<li>
<p>Names starting with <code>.</code> are deprecated, except for <a href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="shrink-index-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>)
Index aliases which include the target index.
See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>)
Configuration options for the target index.
See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-simulate-index">Simulate index API</h3>
<titleabbrev>Simulate index</titleabbrev>
<div class="paragraph">
<p>experimental[]</p>
</div>
<div class="paragraph">
<p>Returns the index configuration that would be applied to the specified index from an
existing <a href="index-templates.html">index template</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_index_template/_simulate_index/my-index-000001</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="simulate-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /_index_template/_simulate_index/&lt;index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="simulate-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the index to simulate.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="simulate-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 child_attributes">
<h4 id="simulate-index-api-response-body">Response body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>overlapping</code></dt>
<dd>
<p>(array) Any templates that also matched the index but were superseded by a higher-priority template.
Response includes an empty array if there are no overlapping templates.</p>
<details open>
<summary class="title">Properties of <code>overlapping</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>name</code></dt>
<dd>
<p>(string) Name of the superseded template.</p>
</dd>
<dt class="hdlist1"><code>index_patterns</code></dt>
<dd>
<p>(array) Index patterns that the superseded template applies to.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt class="hdlist1"><code>template</code></dt>
<dd>
<p>(object)
The settings, mappings, and aliases that would be applied to the index.</p>
<details open>
<summary class="title">Properties of <code>template</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
<div class="paragraph">
<p>Response includes an empty object if no aliases would be applied.</p>
</div>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Omitted from the response if no mappings would be applied.</p>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
<div class="paragraph">
<p>Response includes an empty object if no settings would be applied.</p>
</div>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="simulate-index-api-example">Examples</h4>
<div class="paragraph">
<p>The following example shows the configuration that would be applied to <code>my-index-000001</code> by
an existing template.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_component_template/ct1                    <b class="conum">(1)</b>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <b class="conum">(2)</b>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template             <b class="conum">(3)</b>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate_index/my-index-000001 <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Create a component template (<code>ct1</code>) that sets the number of shards to 2</p>
</li>
<li>
<p>Create a second component template (<code>ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</li>
<li>
<p>Create an index template (<code>final-template</code>) that uses the component templates</p>
</li>
<li>
<p>Show the configuration that would be applied to <code>my-index-000001</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The response shows the index settings, mappings, and aliases applied by the <code>final-template</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",
        "number_of_replicas" : "0"
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "template_1",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-simulate-template">Simulate index template API</h3>
<titleabbrev>Simulate template</titleabbrev>
<div class="paragraph">
<p>experimental[]</p>
</div>
<div class="paragraph">
<p>Returns the index configuration that would be applied by a particular
<a href="index-templates.html">index template</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_index_template/_simulate/template_1</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="simulate-template-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /_index_template/_simulate/&lt;index-template&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="simulate-template-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-template&gt;</code></dt>
<dd>
<p>(Optional, string)
Name of the index template to simulate.
To test a template configuration before you add it to the cluster,
omit this parameter and specify the template configuration in the request body.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="simulate-template-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>create</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, the template passed in the body is
only used if no existing templates match the same index patterns.
If <code>false</code>, the simulation uses the template with the highest priority.
Note that the template is not permanently added or updated in either case;
it is only used for the simulation.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="simulate-template-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>composed_of</code></dt>
<dd>
<p>(Optional, array of strings)
Ordered list of component template names. Component templates are merged in the order
specified, meaning that the last component template specified has the highest precedence.
For an example, see
<a href="indices.html#multiple-component-templates">Composing multiple component templates</a>.</p>
</dd>
<dt class="hdlist1"><code>index_patterns</code></dt>
<dd>
<p>(Required, array of strings)
Array of wildcard (<code>*</code>) expressions
used to match the names of indices during creation.</p>
</dd>
<dt class="hdlist1"><code>priority</code></dt>
<dd>
<p>(Optional, integer)
Priority that determines what template is applied if there are multiple templates
that match the name of a new index.
The highest priority template takes precedence. Defaults to <code>0</code> (lowest priority).</p>
</dd>
<dt class="hdlist1"><code>template</code></dt>
<dd>
<p>(Optional, object)
Template to apply.</p>
<details open>
<summary class="title">Properties of <code>template</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>(Optional, integer)
Version number used to manage index templates externally.
This version is not automatically generated by OpenSearch.</p>
</dd>
<dt class="hdlist1"><code>_meta</code></dt>
<dd>
<p>(Optional, object)
User-specified metadata for the index template.
This information is not generated or used by OpenSearch.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3 child_attributes">
<h4 id="simulate-template-api-response-body">Response body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>overlapping</code></dt>
<dd>
<p>(array) Any templates that were superseded by the specified template.</p>
<details open>
<summary class="title">Properties of <code>overlapping</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>index_patterns</code></dt>
<dd>
<p>(array) Index patterns that the superseded template applies to.</p>
</dd>
<dt class="hdlist1"><code>name</code></dt>
<dd>
<p>(string) Name of the superseded template.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
<dt class="hdlist1"><code>template</code></dt>
<dd>
<p>(object)
The settings, mappings, and aliases that would be applied to matching indices.</p>
<details open>
<summary class="title">Properties of <code>template</code></summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>) Index aliases which include the
index. See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>mappings</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, <a href="mapping.html">mapping object</a>) Mapping for fields in the index. If
specified, this mapping can include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Field names</p>
</li>
<li>
<p><a href="mapping-types.html">Field data types</a></p>
</li>
<li>
<p><a href="mapping-params.html">Mapping parameters</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="mapping.html">Mapping</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</details>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="simulate-template-api-example">Examples</h4>
<div class="sect4">
<h5 id="simulate-existing-template-ex">Simulating an existing template</h5>
<div class="paragraph">
<p>The following example creates and simulates a composed template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /_component_template/ct1                   <b class="conum">(1)</b>
{
  "template": {
    "settings": {
      "index.number_of_shards": 2
    }
  }
}

PUT /_component_template/ct2                    <b class="conum">(2)</b>
{
  "template": {
    "settings": {
      "index.number_of_replicas": 0
    },
    "mappings": {
      "properties": {
        "@timestamp": {
          "type": "date"
        }
      }
    }
  }
}

PUT /_index_template/final-template            <b class="conum">(3)</b>
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct1", "ct2"],
  "priority": 5
}

POST /_index_template/_simulate/final-template <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Create a component template (<code>ct1</code>) that sets the number of shards to 2</p>
</li>
<li>
<p>Create a component template (<code>ct2</code>) that sets the number of replicas to 0 and defines a mapping</p>
</li>
<li>
<p>Create an index template (<code>final-template</code>) that uses the component templates</p>
</li>
<li>
<p>Show the configuration applied by the <code>final-template</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The response shows the index settings, mappings, and aliases applied by the <code>final-template</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_shards" : "2",  <b class="conum">(1)</b>
        "number_of_replicas" : "0" <b class="conum">(2)</b>
      }
    },
    "mappings" : {                 <b class="conum">(3)</b>
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [ ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Number of shards from <code>ct1</code></p>
</li>
<li>
<p>Number of replicas from <code>ct2</code></p>
</li>
<li>
<p>Mappings from <code>ct1</code></p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="simulate-template-config-ex">Simulating an arbitrary template configuration</h5>
<div class="paragraph">
<p>To see what settings will be applied by a template before you add it to the cluster,
you can pass a template configuration in the request body.
The specified template is used for the simulation if it has a higher priority than existing templates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_index_template/_simulate
{
  "index_patterns": ["my-index-*"],
  "composed_of": ["ct2"],
  "priority": 10,
  "template": {
    "settings": {
      "index.number_of_replicas": 1
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The response shows any overlapping templates with a lower priority.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "template" : {
    "settings" : {
      "index" : {
        "number_of_replicas" : "1"
      }
    },
    "mappings" : {
      "properties" : {
        "@timestamp" : {
          "type" : "date"
        }
      }
    },
    "aliases" : { }
  },
  "overlapping" : [
    {
      "name" : "final-template",
      "index_patterns" : [
        "my-index-*"
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-split-index">Split index API</h3>
<titleabbrev>Split index</titleabbrev>
<div class="paragraph">
<p>Splits an existing index into a new index with more primary shards.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_split/split-my-index-000001
{
  "settings": {
    "index.number_of_shards": 2
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /&lt;index&gt;/_split/&lt;target-index&gt;</code></p>
</div>
<div class="paragraph">
<p><code>PUT /&lt;index&gt;/_split/&lt;target-index&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-prereqs">Prerequisites</h4>
<div class="paragraph">
<p>Before you can split an index:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The index must be read-only.</p>
</li>
<li>
<p>The <a href="cluster.html#cluster-health">cluster health</a> status must be green.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can do make an index read-only
with the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my_source_index/_settings
{
  "settings": {
    "index.blocks.write": true <b class="conum">(1)</b>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Prevents write operations to this index while still allowing metadata
changes like deleting the index.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-desc">Description</h4>
<div class="paragraph">
<p>The split index API allows you to split an existing index into a new index,
where each original primary shard is split into two or more primary shards in
the new index.</p>
</div>
<div class="paragraph">
<p>The number of times the index can be split (and the number of shards that each
original shard can be split into) is determined by the
<code>index.number_of_routing_shards</code> setting. The number of routing shards
specifies the hashing space that is used internally to distribute documents
across shards with consistent hashing. For instance, a 5 shard index with
<code>number_of_routing_shards</code> set to <code>30</code> (<code>5 x 2 x 3</code>) could be split by a
factor of <code>2</code> or <code>3</code>.  In other words, it could be split as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>5</code> &#8594; <code>10</code> &#8594; <code>30</code>  (split by 2, then by 3)</p>
</li>
<li>
<p><code>5</code> &#8594; <code>15</code> &#8594; <code>30</code> (split by 3, then by 2)</p>
</li>
<li>
<p><code>5</code> &#8594; <code>30</code> (split by 6)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>index.number_of_routing_shards</code> is a <a href="index-modules.html#index-modules-settings">static index
setting</a>. You can only set <code>index.number_of_routing_shards</code> at index creation
time or on a <a href="indices.html#indices-open-close">closed index</a>.</p>
</div>
<details>
<summary class="title"><strong>Index creation example</strong></summary>
<div class="content">
<div class="paragraph">
<p>The following <a href="indices.html#indices-create-index">create index API</a> creates the
<code>my-index-000001</code> index with an <code>index.number_of_routing_shards</code> setting of <code>30</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "settings": {
    "index": {
      "number_of_routing_shards": 30
    }
  }
}</code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>The <code>index.number_of_routing_shards</code> setting&#8217;s default value depends
on the number of primary shards in the original index.
The default is designed to allow you to split
by factors of 2 up to a maximum of 1024 shards. However, the original number
of primary shards must taken into account. For instance, an index created
with 5 primary shards could be split into 10, 20, 40, 80, 160, 320, or a
maximum of 640 shards (with a single split action or multiple split actions).</p>
</div>
<div class="paragraph">
<p>If the original index contains one primary shard (or a multi-shard index has
been <a href="indices.html#indices-shrink-index">shrunk</a> down to a single primary shard), then the
index may by split into an arbitrary number of shards greater than 1.  The
properties of the default number of routing shards will then apply to the
newly split index.</p>
</div>
<div class="sect4">
<h5 id="how-split-works">How splitting works</h5>
<div class="paragraph">
<p>A split operation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creates a new target index with the same definition as the source
index, but with a larger number of primary shards.</p>
</li>
<li>
<p>Hard-links segments from the source index into the target index. (If
the file system doesn&#8217;t support hard-linking, then all segments are copied
into the new index, which is a much more time consuming process.)</p>
</li>
<li>
<p>Hashes all documents again, after low level files are created, to delete
documents that belong to a different shard.</p>
</li>
<li>
<p>Recovers the target index as though it were a closed index which
had just been re-opened.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="incremental-resharding">Why doesn&#8217;t OpenSearch support incremental resharding?</h5>
<div class="paragraph">
<p>Going from <code>N</code> shards to <code>N+1</code> shards, aka. incremental resharding, is indeed a
feature that is supported by many key-value stores. Adding a new shard and
pushing new data to this new shard only is not an option: this would likely be
an indexing bottleneck, and figuring out which shard a document belongs to
given its <code>_id</code>, which is necessary for get, delete and update requests, would
become quite complex. This means that we need to rebalance existing data using
a different hashing scheme.</p>
</div>
<div class="paragraph">
<p>The most common way that key-value stores do this efficiently is by using
consistent hashing. Consistent hashing only requires <code>1/N</code>-th of the keys to
be relocated when growing the number of shards from <code>N</code> to <code>N+1</code>. However
OpenSearch&#8217;s unit of storage, shards, are Lucene indices. Because of their
search-oriented data structure, taking a significant portion of a Lucene index,
be it only 5% of documents, deleting them and indexing them on another shard
typically comes with a much higher cost than with a key-value store. This cost
is kept reasonable when growing the number of shards by a multiplicative factor
as described in the above section: this allows OpenSearch to perform the
split locally, which in-turn allows to perform the split at the index level
rather than reindexing documents that need to move, as well as using hard links
for efficient file copying.</p>
</div>
<div class="paragraph">
<p>In the case of append-only data, it is possible to get more flexibility by
creating a new index and pushing new data to it, while adding an alias that
covers both the old and the new index for read operations. Assuming that the
old and new indices have respectively M and N shards, this has no overhead
compared to searching an index that would have M+N shards.</p>
</div>
</div>
<div class="sect4">
<h5 id="split-index">Split an index</h5>
<div class="paragraph">
<p>To split <code>my_source_index</code> into a new index called <code>my_target_index</code>, issue
the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 2
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above request returns immediately once the target index has been added to
the cluster state&#8201;&#8212;&#8201;it doesn&#8217;t wait for the split operation to start.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Indices can only be split if they satisfy the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the target index must not exist</p>
</li>
<li>
<p>The source index must have fewer primary shards than the target index.</p>
</li>
<li>
<p>The number of primary shards in the target index must be a multiple of the
number of primary shards in the source index.</p>
</li>
<li>
<p>The node handling the split process must have sufficient free disk space to
accommodate a second copy of the existing index.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>_split</code> API is similar to the <a href="indices.html#indices-create-index"><code>create index</code> API</a>
and accepts <code>settings</code> and <code>aliases</code> parameters for the target index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my_source_index/_split/my_target_index
{
  "settings": {
    "index.number_of_shards": 5 <b class="conum">(1)</b>
  },
  "aliases": {
    "my_search_indices": {}
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The number of shards in the target index. This must be a multiple of the
number of shards in the source index.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Mappings may not be specified in the <code>_split</code> request.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="monitor-split">Monitor the split process</h5>
<div class="paragraph">
<p>The split process can be monitored with the <a href="cat.html#cat-recovery"><code>_cat recovery</code>
API</a>, or the <a href="cluster.html#cluster-health"><code>cluster health</code> API</a> can be used to wait
until all primary shards have been allocated by setting the  <code>wait_for_status</code>
parameter to <code>yellow</code>.</p>
</div>
<div class="paragraph">
<p>The <code>_split</code> API returns as soon as the target index has been added to the
cluster state, before any shards have been allocated. At this point, all
shards are in the state <code>unassigned</code>. If, for any reason, the target index
can&#8217;t be allocated, its primary shard will remain <code>unassigned</code> until it
can be allocated on that node.</p>
</div>
<div class="paragraph">
<p>Once the primary shard is allocated, it moves to state <code>initializing</code>, and the
split process begins. When the split operation completes, the shard will
become <code>active</code>. At that  point, OpenSearch will try to allocate any
replicas and may decide to relocate the primary shard to another node.</p>
</div>
</div>
<div class="sect4">
<h5 id="split-wait-active-shards">Wait for active shards</h5>
<div class="paragraph">
<p>Because the split operation creates a new index to split the shards to,
the <a href="indices.html#create-index-wait-for-active-shards">wait for active shards</a> setting
on index creation applies to the split index action as well.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Required, string)
Name of the source index to split.</p>
</dd>
<dt class="hdlist1"><code>&lt;target-index&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, string)
Name of the target index to create.</p>
</div>
<div class="paragraph">
<p>Index names must meet the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase only</p>
</li>
<li>
<p>Cannot include <code>\</code>, <code>/</code>, <code>*</code>, <code>?</code>, <code>"</code>, <code>&lt;</code>, <code>&gt;</code>, <code>|</code>, ` ` (space character), <code>,</code>, <code>#</code></p>
</li>
<li>
<p>Indices prior to 7.0 could contain a colon (<code>:</code>), but that&#8217;s been deprecated and won&#8217;t be supported in 7.0+</p>
</li>
<li>
<p>Cannot start with <code>-</code>, <code>_</code>, <code>+</code></p>
</li>
<li>
<p>Cannot be <code>.</code> or <code>..</code></p>
</li>
<li>
<p>Cannot be longer than 255 bytes (note it is bytes, so multi-byte characters will count towards the 255 limit faster)</p>
</li>
<li>
<p>Names starting with <code>.</code> are deprecated, except for <a href="index-modules.html#index-hidden">hidden indices</a> and internal indices managed by plugins</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>wait_for_active_shards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) The number of shard copies that must be active before
proceeding with the operation. Set to <code>all</code> or any positive integer up
to the total number of shards in the index (<code>number_of_replicas+1</code>).
Default: 1, the primary shard.</p>
</div>
<div class="paragraph">
<p>See <a href="docs.html#index-wait-for-active-shards">Active shards</a>.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="split-index-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Optional, <a href="indices.html#indices-aliases">alias object</a>)
Index aliases which include the target index.
See <a href="indices.html#indices-aliases">Update index alias API</a>.</p>
</dd>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>)
Configuration options for the target index.
See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-types-exists">Type exists API</h3>
<titleabbrev>Type exists</titleabbrev>
<div class="paragraph">
<p>Checks if a <a href="mapping-fields.html#mapping-type-field">mapping type</a> exists. Types are deprecated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">HEAD my-index-000001/_mapping/message</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="indices-types-exists-api-request">Request</h4>
<div class="paragraph">
<p><code>HEAD /&lt;index&gt;/_mapping/&lt;type&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="indices-types-exists-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index&gt;</code></dt>
<dd>
<p>(Optional, string) Comma-separated list or wildcard expression of index names
used to limit the request.</p>
</dd>
<dt class="hdlist1"><code>&lt;type&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list or wildcard expression of types
used to limit the request.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-types-exists-api-response-codes">Response codes</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>200</code></dt>
<dd>
<p>Indicates all specified mapping types exist.</p>
</dd>
<dt class="hdlist1"><code>404</code></dt>
<dd>
<p>Indicates one or more specified mapping types <strong>do not</strong> exist.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-aliases">Update index alias API</h3>
<titleabbrev>Update index alias</titleabbrev>
<div class="paragraph">
<p>Adds or removes index aliases.</p>
</div>
<div class="paragraph">
<p>An index alias is a secondary name
used to refer to one or more existing indices.</p>
</div>
<div class="paragraph">
<p>Most OpenSearch APIs accept an index alias
in place of an index name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "my-index-000001", "alias" : "alias1" } }
  ]
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="indices-aliases-api-request">Request</h4>
<div class="paragraph">
<p><code>POST /_aliases</code></p>
</div>
</div>
<div class="sect3">
<h4 id="indices-aliases-api-desc">Description</h4>
<div class="paragraph">
<p>APIs in OpenSearch accept an index name when working against a
specific index, and several indices when applicable. The index aliases
API allows aliasing an index with a name, with all APIs automatically
converting the alias name to the actual index name. An alias can also be
mapped to more than one index, and when specifying it, the alias will
automatically expand to the aliased indices. An alias can also be
associated with a filter that will automatically be applied when
searching, and routing values. An alias cannot have the same name as an index.</p>
</div>
</div>
<div class="sect3">
<h4 id="indices-aliases-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-aliases-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>actions</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, array of actions)
Set of actions to perform.
Valid actions include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>add</code></dt>
<dd>
<p>Adds an alias to an index.</p>
</dd>
<dt class="hdlist1"><code>remove</code></dt>
<dd>
<p>Removes an alias from an index.</p>
</dd>
<dt class="hdlist1"><code>remove_index</code></dt>
<dd>
<p>Deletes a concrete index, similar to the <a href="indices.html#indices-delete-index">delete index
API</a>. Attempts to remove an index alias will fail.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can perform these actions on alias objects.
Valid parameters for alias objects include:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>index</code></dt>
<dd>
<p>(String)
Wildcard expression of index names
used to perform the action.</p>
<div class="paragraph">
<p>If the <code>indices</code> parameter is not specified,
this parameter is required.</p>
</div>
</dd>
<dt class="hdlist1"><code>indices</code></dt>
<dd>
<p>(Array)
Array of index names
used to perform the action.</p>
<div class="paragraph">
<p>If the <code>index</code> parameter is not specified,
this parameter is required.</p>
</div>
</dd>
<dt class="hdlist1"><code>alias</code></dt>
<dd>
<p>(String)
Comma-separated list or wildcard expression of index alias names to
add, remove, or delete.</p>
<div class="paragraph">
<p>If the <code>aliases</code> parameter is not specified,
this parameter is required for the <code>add</code> or <code>remove</code> action.</p>
</div>
</dd>
<dt class="hdlist1"><code>aliases</code></dt>
<dd>
<p>(Array of strings)
Array of index alias names to
add, remove, or delete.</p>
<div class="paragraph">
<p>If the <code>alias</code> parameter is not specified,
this parameter is required for the <code>add</code> or <code>remove</code> action.</p>
</div>
</dd>
<dt class="hdlist1"><code>filter</code></dt>
<dd>
<p>(Optional, query object)
<a href="compound-queries.html#query-dsl-bool-query">Filter query</a>
used to limit the index alias.</p>
<div class="paragraph">
<p>If specified,
the index alias only applies to documents returned by the filter.
<a href="compound-queries.html#query-dsl-bool-query">Filter query</a>
used to limit the index alias.</p>
</div>
<div class="paragraph">
<p>If specified,
the index alias only applies to documents returned by the filter.</p>
</div>
<div class="paragraph">
<p>See <a href="indices.html#filtered">Filtered aliases</a> for an example.</p>
</div>
</dd>
<dt class="hdlist1"><code>is_hidden</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, the alias will be excluded from wildcard expressions by default,
unless overriden in the request using the <code>expand_wildcards</code> parameter,
similar to <a href="index-modules.html#index-hidden">hidden indices</a>. This property must be set to the
same value on all indices that share an alias. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>must_exist</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, the alias to remove must exist. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>is_write_index</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>true</code>, assigns the index as an alias&#8217;s write index.
Defaults to <code>false</code>.</p>
<div class="paragraph">
<p>An alias can have one write index at a time.</p>
</div>
<div class="paragraph">
<p>See <a href="indices.html#aliases-write-index">Write index</a> for an example.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Aliases that do not explicitly set <code>is_write_index: true</code> for an index, and
only reference one index, will have that referenced index behave as if it is the write index
until an additional index is referenced. At that point, there will be no write index and
writes will be rejected.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1"><code>routing</code></dt>
<dd>
<p>(Optional, string)
Custom <a href="mapping-fields.html#mapping-routing-field">routing value</a>
used to route operations to a specific shard.</p>
<div class="paragraph">
<p>See <a href="indices.html#aliases-routing">Routing</a> for an example.</p>
</div>
</dd>
<dt class="hdlist1"><code>index_routing</code></dt>
<dd>
<p>(Optional, string)
Custom <a href="mapping-fields.html#mapping-routing-field">routing value</a> used
for the alias&#8217;s indexing operations.</p>
<div class="paragraph">
<p>See <a href="indices.html#aliases-routing">Routing</a> for an example.</p>
</div>
</dd>
<dt class="hdlist1"><code>search_routing</code></dt>
<dd>
<p>(Optional, string)
Custom <a href="mapping-fields.html#mapping-routing-field">routing value</a> used
for the alias&#8217;s search operations.</p>
<div class="paragraph">
<p>See <a href="indices.html#aliases-routing">Routing</a> for an example.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="indices-aliases-api-example">Examples</h4>
<div class="sect4">
<h5 id="indices-aliases-api-add-alias-ex">Add an alias</h5>
<div class="paragraph">
<p>The following request adds the <code>alias1</code> alias to the <code>test1</code> index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test1", "alias" : "alias1" } }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="indices-aliases-api-remove-alias-ex">Remove an alias</h5>
<div class="paragraph">
<p>The following request removes the <code>alias1</code> alias.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "remove" : { "index" : "test1", "alias" : "alias1" } }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="indices-aliases-api-rename-alias-ex">Rename an alias</h5>
<div class="paragraph">
<p>Renaming an alias is a simple <code>remove</code> then <code>add</code> operation within the
same API. This operation is atomic, no need to worry about a short
period of time where the alias does not point to an index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "remove" : { "index" : "test1", "alias" : "alias1" } },
    { "add" : { "index" : "test1", "alias" : "alias2" } }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="indices-aliases-api-add-multi-alias-ex">Add an alias to multiple indices</h5>
<div class="paragraph">
<p>Associating an alias with more than one index is simply several <code>add</code>
actions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test1", "alias" : "alias1" } },
    { "add" : { "index" : "test2", "alias" : "alias1" } }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Multiple indices can be specified for an action with the <code>indices</code> array syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "add" : { "indices" : ["test1", "test2"], "alias" : "alias1" } }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify multiple aliases in one action, the corresponding <code>aliases</code> array
syntax exists as well.</p>
</div>
<div class="paragraph">
<p>For the example above, a glob pattern can also be used to associate an alias to
more than one index that share a common name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions" : [
    { "add" : { "index" : "test*", "alias" : "all_test_indices" } }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the alias is a point-in-time alias that will group all
current indices that match, it will not automatically update as new
indices that match this pattern are added/removed.</p>
</div>
<div class="paragraph">
<p>It is an error to index to an alias which points to more than one index.</p>
</div>
<div class="paragraph">
<p>It is also possible to swap an index with an alias in one, atomic operation.
This means there will be no point in time where the alias points to no
index in the cluster state. However, as indexing and searches involve multiple
steps, it is possible for the in-flight or queued requests to fail
due to a temporarily non-existent index.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT test     <b class="conum">(1)</b>
PUT test_2   <b class="conum">(2)</b>
POST /_aliases
{
  "actions" : [
    { "add":  { "index": "test_2", "alias": "test" } },
    { "remove_index": { "index": "test" } }  <b class="conum">(3)</b>
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>An index we&#8217;ve added by mistake</p>
</li>
<li>
<p>The index we should have added</p>
</li>
<li>
<p><code>remove_index</code> is just like <a href="indices.html#indices-delete-index">Delete index API</a> and will only remove a concrete index.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="filtered">Filtered aliases</h5>
<div class="paragraph">
<p>Aliases with filters provide an easy way to create different "views" of
the same index. The filter can be defined using Query DSL and is applied
to all Search, Count, Delete By Query and More Like This operations with
this alias.</p>
</div>
<div class="paragraph">
<p>To create a filtered alias, first we need to ensure that the fields already
exist in the mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001
{
  "mappings": {
    "properties": {
      "user": {
        "properties": {
          "id": {
            "type": "keyword"
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can create an alias that uses a filter on field <code>user.id</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "my-index-000001",
        "alias": "alias2",
        "filter": { "term": { "user.id": "bilbo" } }
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="aliases-routing">Routing</h5>
<div class="paragraph">
<p>It is possible to associate routing values with aliases. This feature
can be used together with filtering aliases in order to avoid
unnecessary shard operations.</p>
</div>
<div class="paragraph">
<p>The following command creates a new alias <code>alias1</code> that points to index
<code>test</code>. After <code>alias1</code> is created, all operations with this alias are
automatically modified to use value <code>1</code> for routing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "routing": "1"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to specify different routing values for searching
and indexing operations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias2",
        "search_routing": "1,2",
        "index_routing": "2"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As shown in the example above, search routing may contain several values
separated by comma. Index routing can contain only a single value.</p>
</div>
<div class="paragraph">
<p>If a search operation that uses routing alias also has a routing parameter, an
intersection of both search alias routing and routing specified in the
parameter is used. For example the following command will use "2" as a
routing value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /alias2/_search?q=user.id:bilbo&amp;routing=2,3</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="aliases-write-index">Write index</h5>
<div class="paragraph">
<p>It is possible to associate the index pointed to by an alias as the write index.
When specified, all index and update requests against an alias that point to multiple
indices will attempt to resolve to the one index that is the write index.
Only one index per alias can be assigned to be the write index at a time. If no write index is specified
and there are multiple indices referenced by an alias, then writes will not be allowed.</p>
</div>
<div class="paragraph">
<p>It is possible to specify an index associated with an alias as a write index using both the aliases API
and index creation API.</p>
</div>
<div class="paragraph">
<p>Setting an index to be the write index with an alias also affects how the alias is manipulated during
Rollover (see <a href="indices.html#indices-rollover-index">Rollover With Write Index</a>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "is_write_index": true
      }
    },
    {
      "add": {
        "index": "test2",
        "alias": "alias1"
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we associate the alias <code>alias1</code> to both <code>test</code> and <code>test2</code>, where
<code>test</code> will be the index chosen for writing to.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /alias1/_doc/1
{
  "foo": "bar"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The new document that was indexed to <code>/alias1/_doc/1</code> will be indexed as if it were
<code>/test/_doc/1</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /test/_doc/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>To swap which index is the write index for an alias, the Aliases API can be leveraged to
do an atomic swap. The swap is not dependent on the ordering of the actions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_aliases
{
  "actions": [
    {
      "add": {
        "index": "test",
        "alias": "alias1",
        "is_write_index": false
      }
    }, {
      "add": {
        "index": "test2",
        "alias": "alias1",
        "is_write_index": true
      }
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-update-settings">Update index settings API</h3>
<titleabbrev>Update index settings</titleabbrev>
<div class="paragraph">
<p>Changes a <a href="index-modules.html#index-modules-settings">dynamic index setting</a> in real time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_settings
{
  "index" : {
    "number_of_replicas" : 2
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="update-index-settings-api-request">Request</h4>
<div class="paragraph">
<p><code>PUT /&lt;target&gt;/_settings</code></p>
</div>
</div>
<div class="sect3">
<h4 id="update-index-settings-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;target&gt;</code></dt>
<dd>
<p>(Optional, string)
Comma-separated list of indices and index aliases used to limit
the request. Wildcard expressions (<code>*</code>) are supported.</p>
<div class="paragraph">
<p>To target all indices in a cluster, omit this parameter or use
<code>_all</code> or <code>*</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="update-index-settings-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>allow_no_indices</code></dt>
<dd>
<p>(Optional, Boolean)
If <code>false</code>, the request returns an error if any wildcard expression,
<a href="indices.html#indices-aliases">index alias</a>, or <code>_all</code> value targets only missing or closed
indices. This behavior applies even if the request targets other open indices.
For example, a request targeting <code>foo*,bar*</code> returns an error if an index
starts with <code>foo</code> but no index starts with <code>bar</code>.</p>
<div class="paragraph">
<p>Defaults to <code>false</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
<dt class="hdlist1"><code>flat_settings</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, returns settings in flat format. Defaults to
<code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>ignore_unavailable</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, missing or closed indices are not included in the
response. Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>preserve_existing</code></dt>
<dd>
<p>(Optional, Boolean) If <code>true</code>, existing index settings remain unchanged.
Defaults to <code>false</code>.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="update-index-settings-api-request-body">Request body</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>settings</code></dt>
<dd>
<p>(Optional, <a href="index-modules.html#index-modules-settings">index setting object</a>) Configuration
options for the index. See <a href="index-modules.html#index-modules-settings">Index Settings</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="update-index-settings-api-example">Examples</h4>
<div class="sect4">
<h5 id="reset-index-setting">Reset an index setting</h5>
<div class="paragraph">
<p>To revert a setting to the default value, use <code>null</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : null
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The list of per-index settings which can be updated dynamically on live
indices can be found in <a href="index-modules.html">Index modules</a>.
To preserve existing settings from being updated, the <code>preserve_existing</code>
request parameter can be set to <code>true</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="bulk">Bulk indexing usage</h5>
<div class="paragraph">
<p>For example, the update settings API can be used to dynamically change
the index from being more performant for bulk indexing, and then move it
to more real time indexing state. Before the bulk indexing is started,
use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : "-1"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Another optimization option is to start the index without any replicas,
and only later adding them, but that really depends on the use case).</p>
</div>
<div class="paragraph">
<p>Then, once bulk indexing is done, the settings can be updated (back to
the defaults for example):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">PUT /my-index-000001/_settings
{
  "index" : {
    "refresh_interval" : "1s"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, a force merge should be called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_forcemerge?max_num_segments=5</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="update-settings-analysis">Update index analysis</h5>
<div class="paragraph">
<p>You can only define new analyzers on closed indices.</p>
</div>
<div class="paragraph">
<p>To add an analyzer,
you must close the index,
define the analyzer,
and reopen the index.</p>
</div>
<div class="paragraph">
<p>For example,
the following commands add the <code>content</code> analyzer to the <code>my-index-000001</code> index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /my-index-000001/_close

PUT /my-index-000001/_settings
{
  "analysis" : {
    "analyzer":{
      "content":{
        "type":"custom",
        "tokenizer":"whitespace"
      }
    }
  }
}

POST /my-index-000001/_open</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="indices-resolve-index-api">Resolve index API</h3>
<titleabbrev>Resolve index</titleabbrev>
<div class="paragraph">
<p>Resolves the specified name(s) and/or index patterns for indices and index
aliases. Multiple patterns and remote clusters are
supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_resolve/index/my-index-*</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="resolve-index-api-request">Request</h4>
<div class="paragraph">
<p><code>GET /_resolve/index/&lt;name&gt;</code></p>
</div>
</div>
<div class="sect3">
<h4 id="resolve-index-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;name&gt;</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Required, string) Comma-separated name(s) or index pattern(s) of the
indices and index aliases to resolve. Resources on
<a href="modules-remote-clusters.html">remote clusters</a> can be specified using the
<code>&lt;cluster&gt;:&lt;name&gt;</code> syntax.</p>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="resolve-index-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>expand_wildcards</code></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>(Optional, string) Controls what kind of indices that wildcard expressions can
expand to. Multiple values are accepted when separated by a comma, as in
<code>open,hidden</code>. Valid values are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>all</code></dt>
<dd>
<p>Expand to open and closed indices, including <a href="api-conventions.html#hidden-indices">hidden indices</a>.</p>
</dd>
<dt class="hdlist1"><code>open</code></dt>
<dd>
<p>Expand only to open indices.</p>
</dd>
<dt class="hdlist1"><code>closed</code></dt>
<dd>
<p>Expand only to closed indices.</p>
</dd>
<dt class="hdlist1"><code>hidden</code></dt>
<dd>
<p>Expansion of wildcards will include hidden indices.
Must be combined with <code>open</code>, <code>closed</code>, or both.</p>
</dd>
<dt class="hdlist1"><code>none</code></dt>
<dd>
<p>Wildcard expressions are not accepted.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Defaults to <code>open</code>.</p>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="resolve-index-api-example">Examples</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_resolve/index/f*,remoteCluster1:bar*?expand_wildcards=all</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "indices": [                                 <b class="conum">(1)</b>
    {
      "name": "foo_closed",
      "attributes": [
        "closed"
      ]
    },
    {
      "name": "freeze-index",
      "aliases": [
        "f-alias"
      ],
      "attributes": [
        "open"
      ]
    },
    {
      "name": "remoteCluster1:bar-01",
      "attributes": [
        "open"
      ]
    }
  ],
  "aliases": [                                 <b class="conum">(2)</b>
    {
      "name": "f-alias",
      "indices": [
        "freeze-index",
        "my-index-000001"
      ]
    }
  ],
  "data_streams": [                            <b class="conum">(3)</b>
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>All indices matching the supplied names or expressions</p>
</li>
<li>
<p>All aliases matching the supplied names or expressions</p>
</li>
<li>
<p>All data streams matching the supplied names or expressions</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dangling-indices-list">List dangling indices API</h3>
<titleabbrev>List dangling indices</titleabbrev>
<div class="paragraph">
<p>Lists dangling indices.</p>
</div>
<div class="sect3">
<h4 id="dangling-indices-list-api-request">Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">GET /_dangling</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dangling-indices-list-api-desc">Description</h4>
<div class="paragraph">
<p>If OpenSearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code>cluster.indices.tombstones.size</code> indices while an OpenSearch node is offline.</p>
</div>
<div class="paragraph">
<p>Use this API to list dangling indices, which you can then
<a href="indices.html#dangling-index-import">import</a> or <a href="indices.html#dangling-index-delete">delete</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="dangling-indices-list-api-example">Examples</h4>
<div class="paragraph">
<p>The API returns the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "dangling_indices": [
   {
    "index_name": "my-index-000001",
    "index_uuid": "zmM4e0JtBkeUjiHD-MihPQ",
    "creation_date_millis": 1589414451372,
    "node_ids": [
      "pL47UN3dAb2d5RCWP6lQ3e"
    ]
   }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dangling-index-import">Import dangling index API</h3>
<titleabbrev>Import dangling index</titleabbrev>
<div class="paragraph">
<p>Imports a dangling index.</p>
</div>
<div class="sect3">
<h4 id="dangling-index-import-api-request">Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_dangling/&lt;index-uuid&gt;?accept_data_loss=true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-import-api-desc">Description</h4>
<div class="paragraph">
<p>If OpenSearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code>cluster.indices.tombstones.size</code> indices while an OpenSearch node is offline.</p>
</div>
<div class="paragraph">
<p>Import a single index into the cluster by referencing its UUID. Use the
<a href="indices.html#dangling-indices-list">List dangling indices API</a> to locate the UUID of an index.</p>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-import-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-uuid&gt;</code></dt>
<dd>
<p>(Required, string)
UUID of the index to import, which you can find using the
<a href="indices.html#dangling-indices-list">List dangling indices API</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-import-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>accept_data_loss</code></dt>
<dd>
<p>(Required, Boolean)
This field must be set to <code>true</code> to import a dangling index. Because OpenSearch
cannot know where the dangling index data came from or determine which shard
copies are fresh and which are stale, it cannot guarantee that the imported data
represents the latest state of the index when it was last in the cluster.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-import-api-example">Examples</h4>
<div class="paragraph">
<p>The following example shows how to import a dangling index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">POST /_dangling/zmM4e0JtBkeUjiHD-MihPQ?accept_data_loss=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API returns following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console-result" data-lang="console-result">{
  "acknowledged" : true
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dangling-index-delete">Delete dangling index API</h3>
<titleabbrev>Delete dangling index</titleabbrev>
<div class="paragraph">
<p>Deletes a dangling index.</p>
</div>
<div class="sect3">
<h4 id="dangling-index-delete-api-request">Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DELETE /_dangling/&lt;index-uuid&gt;?accept_data_loss=true</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-delete-api-desc">Description</h4>
<div class="paragraph">
<p>If OpenSearch encounters index data that is absent from the current cluster
state, those indices are considered to be dangling. For example,
this can happen if you delete more than
<code>cluster.indices.tombstones.size</code> indices while an OpenSearch node is offline.</p>
</div>
<div class="paragraph">
<p>Deletes a dangling index by referencing its UUID. Use the
<a href="indices.html#dangling-indices-list">List dangling indices API</a> to locate the UUID of an index.</p>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-delete-api-path-params">Path parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;index-uuid&gt;</code></dt>
<dd>
<p>(Required, string)
UUID of the index to delete. You can find this using the
<a href="indices.html#dangling-indices-list">List dangling indices API</a>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="dangling-index-delete-api-query-params">Query parameters</h4>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>accept_data_loss</code></dt>
<dd>
<p>(Optional, Boolean)
This field must be set to <code>true</code> in order to carry out the import, since it will
no longer be possible to recover the data from the dangling index.</p>
</dd>
<dt class="hdlist1"><code>master_timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a connection to the master node. If no response is received
before the timeout expires, the request fails and returns an error. Defaults to
<code>30s</code>.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>(Optional, <a href="api-conventions.html#time-units">time units</a>)
Period to wait for a response. If no response is received before the timeout
expires, the request fails and returns an error. Defaults to <code>30s</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph nav-footer">
<p>Previous:<a href="docs.html">Document APIs</a>| Up:<a href="rest-apis.html">REST APIs</a>| Home:<a href="index.html">OpenSearch Reference</a>| Next:<a href="ingest-apis.html">Ingest APIs</a></p>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-04-12 14:08:20 -0700
</div>
</div>
</body>
</html>